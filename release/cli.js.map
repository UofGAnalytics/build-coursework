{"version":3,"file":"cli.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAmBA;AACA;AAEA;;AAGA;AAEA;AACA;AACA;AACA;AAHA;;AAMA;AACA;AAMA;;AAEA;AACA;AAOA;AAEA;AAFA;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AAIA;;AAEA;AAOA;AACA;AAMA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;AChHA;AAGA;AAEA;AAAA;AAAA;AAEA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;ACzFA;AAEA;AAiCA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;;;;;;;;;;;;;;;;;;;;;;;AChDA;AAEA;AACA;AAEA;AACA;AAUA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;;AAEA;AAKA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;;;;;;;;;;;;;;;;;;;;;AC1DA;AAEA;AACA;AAEA;AAGA;AACA;AACA;AAEA;AADA;AAHA;AASA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACrBA;AAEA;AACA;AAEA;AAGA;AACA;AACA;AACA;AAEA;AADA;AAJA;AAUA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AAEA;AAEA;AACA;AACA;AACA;;AAGA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;AAbA;AAeA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AAEA;AACA;AAEA;AACA;AAHA;AAUA;AAEA;AAAA;AAAA;AACA;;AAEA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA;AAEA;AAFA;AAKA;AAEA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AALA;AAOA;;;;;;;;;;;;;;;;;;;;;AChKA;AACA;AACA;AAIA;AACA;AAEA;AAMA;AACA;AAAA;;AAIA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;ACzBA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AALA;AAOA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BA;AAGA;AAEA;AACA;AACA;AACA;AAKA;AACA;AACA;AAEA;AAQA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAFA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AAEA;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACnEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAPA;AAHA;AAcA;AACA;;;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAPA;AAHA;AAcA;AACA;;;;;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AANA;AAJA;AAcA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAKA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AARA;AAuBA;;;;;;;;;;;;;;;;;;;;;AC5CA;AACA;AAGA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AADA;AAGA;AANA;AASA;AACA;AACA;AACA;AADA;AAGA;AANA;AAdA;AAwBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AADA;AAGA;AANA;AAPA;AAkBA;;;;;;;;;;;;;;;;;;AC3DA;AAEA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AALA;AASA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AANA;AAQA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAEA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAcA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAcA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAcA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAjCA;AAvBA;AAyEA;;AC1HA;AAEA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AAFA;AAMA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AANA;AAQA;;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAaA;;ACpDA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAaA;AAEA;AACA;AAIA;AACA;AAGA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAJA;AAUA;;;;;;;;;;;;;;;;;;;;;;AC5CA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAGA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAIA;AACA;AAEA;AACA;AAEA;;AAEA;AACA;AACA;AAGA;AACA;;AACA;AACA;AAEA;AACA;AAGA;AACA;;AACA;AACA;;AAGA;AAAA;AAKA;AACA;AACA;;AAIA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AAUA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AAGA;AACA;AACA;AACA;;AACA;AACA;AACA;AAEA;;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACpPA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;;AACA;AACA;AAEA;AAEA;AAJA;AAMA;AACA;AACA;AACA;AAHA;AAKA;AArBA;AAuBA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAaA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAEA;AACA;;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACpCA;AAEA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAVA;AAeA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;;AAGA;AACA;;AAGA;AACA;AACA;AAFA;AAMA;AACA;AAFA;AAMA;AACA;AAKA;AACA;AARA;AAYA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AA1CA;AAlBA;;AAkEA;AAEA;;AAGA;AACA;AAEA;AACA;;AAEA;AACA;;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AAIA;;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AAIA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACxKA;AAGA;AACA;AAEA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC5BA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAGA;;AAEA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AAWA;AACA;AACA;;;;;;;;;;;;;;;;ACzBA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC9BA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AAKA;;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACnCA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AACA;AACA;AACA;AAEA;AAEA;AAFA;AAFA;AAOA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAKA;;AAUA;AACA;AAEA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;ACpEA;AAIA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;;AAQA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AAIA;AACA;AACA;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAHA;AAKA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACjFA;AACA;AAKA;AAmBA;AACA;AAAA;AAAA;AAAA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;;AAEA;AACA;AACA;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;;;AAEA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AALA;AAOA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AACA;AACA;AAJA;AAMA;;;;;;;;;;;;;;;;;;;;;AClHA;AAGA;AAEA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAjBA;AAmBA;AACA;AACA;;AAEA;AAKA;AACA;AAEA;AACA;;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AAAA;AAAA;AAAA;AACA;;AAEA;AAIA;AACA;AAEA;;AACA;AACA;AACA;AACA;;AAEA;AAEA;AAGA;AAAA;;AAGA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AAFA;AARA;AAeA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAPA;AArBA;AAgCA;;AAEA;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAaA;;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAAA;AAAA;;AACA;AACA;AACA;;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AARA;AAWA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAKA;;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;AC7MA;AAGA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAEA;;AACA;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAJA;AAPA;AAFA;AAwBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAaA;;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAaA;;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;;AACA;AACA;;;;;;;;;;;;;;;;;;;AC1HA;AAIA;AACA;AAEA;AAMA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;ACrBA;AAGA;AAEA;AACA;AACA;AAGA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAGA;;AAEA;AACA;;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;AAIA;AACA;AACA;AACA;;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACnEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAPA;;AAUA;AACA;AAEA;AAFA;AAIA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AALA;AAFA;AAUA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAJA;AAoBA;;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAIA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAKA;AAAA;AALA;AAUA;AACA;AAAA;AAAA;AAFA;AATA;AAAA;AAuBA;AACA;AACA;;;;;;;;;;;;;;;;;AChDA;AAEA;AACA;AACA;AAIA;AACA;;AAGA;AACA;AAEA;AAGA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAGA;AACA;AAEA;AAEA;AAFA;AAKA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;;;;;;AC5CA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACfA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACbA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAEA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAcA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AAFA;AAPA;AAcA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AAEA;AACA;AAFA;AAJA;AAWA;AACA;AAFA;AAjBA;AAjCA;AA2DA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAPA;AAPA;AAnEA;AAuFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AACA;AACA;AACA;;AACA;AACA;;;;;;;;;;;;;;;;;AClIA;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAEA;AAJA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AALA;AAYA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACvCA;AAGA;AACA;AACA;AACA;AACA;AAEA;;AAGA;;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;;AAIA;AACA;AACA;AACA;AACA;AAEA;;AALA;AASA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;;AAEA;AACA;;AACA;AAAA;AAAA;;AACA;AACA;AACA;;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AACA;AACA;;;;;;;;;;;;;ACpFA;AACA;AAGA;;AACA;AACA;AACA;;AACA;AACA;AAEA;;;;;;;;;;;;ACXA;AAEA;AACA;AAIA;AAEA;AACA;AAGA;AAIA;AACA;;AACA;AACA;AAEA;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACRA;AACA;AAGA;;AACA;AACA;AACA;;AACA;AACA;AAEA;;AAQA;AACA;;AACA;AACA;AACA;;AACA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AANA;AAQA;;AAEA;AAIA;AAEA;;AACA;AACA;AACA;;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;ACjEA;AACA;AAIA;AACA;AACA;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACxCA;AAEA;AAEA;AACA;AAGA;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AAKA;;AAEA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAKA;AACA;;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACzIA;AAEA;AAGA;AAUA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AACA;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACzDA;AACA;AAEA;AAMA;AACA;;AAGA;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AALA;AAOA;;;;;;;;;;;;;;;;ACfA;AAEA;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACZA;AACA;AACA;AAQA;AAKA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AADA;AAGA;AANA;AARA;AAkBA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AAHA;AAPA;AAcA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAMA;;;;;;;;;;;;;;;;ACpEA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMA;AAKA;AACA;AACA;AAEA;AAKA;AACA;AACA;AAEA;AAKA;AACA;AACA;;AAEA;AAMA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAJA;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZA;AACA;AAEA;AACA;AACA;AAGA;AAEA;AACA;AAAA;AAGA;AAIA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;AACA;AACA;AACA;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjGA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;ACAA;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC9SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACzJA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;AEAA;AACA;AACA;AACA","sources":["webpack://compiler/./src/build-unit.ts","webpack://compiler/./src/cli/cli.ts","webpack://compiler/./src/context.ts","webpack://compiler/./src/course/index.ts","webpack://compiler/./src/course/load-course.ts","webpack://compiler/./src/course/load-unit.ts","webpack://compiler/./src/hast/embed-assets.ts","webpack://compiler/./src/hast/index.ts","webpack://compiler/./src/hast/responsive-tables.ts","webpack://compiler/./src/html/index.ts","webpack://compiler/./src/html/pdf.ts","webpack://compiler/./src/html/wrapper/index.ts","webpack://compiler/./src/html/wrapper/main.ts","webpack://compiler/./src/html/wrapper/sidebar.ts","webpack://compiler/./src/html/wrapper/view-options/readability.ts","webpack://compiler/./src/html/wrapper/view-options/theme.ts","webpack://compiler/./src/html/wrapper/view-options/index.ts","webpack://compiler/./src/index.ts","webpack://compiler/./src/knitr/knitr.ts","webpack://compiler/./src/latex/directive-to-svg.ts","webpack://compiler/./src/latex/mathjax-tex.ts","webpack://compiler/./src/latex/tex-to-directive.ts","webpack://compiler/./src/linter/assert-asset-exists.ts","webpack://compiler/./src/linter/assert-no-h1.ts","webpack://compiler/./src/linter/assert-no-tex-tabular.ts","webpack://compiler/./src/linter/assert-task-answer.ts","webpack://compiler/./src/linter/assert-video-attributes.ts","webpack://compiler/./src/linter/assert-weblink-target.ts","webpack://compiler/./src/linter/index.ts","webpack://compiler/./src/linter/lint-latex.ts","webpack://compiler/./src/linter/report.ts","webpack://compiler/./src/mdast/boxouts.ts","webpack://compiler/./src/mdast/code-blocks.ts","webpack://compiler/./src/mdast/combined.ts","webpack://compiler/./src/mdast/embed-asset-url.ts","webpack://compiler/./src/mdast/images.ts","webpack://compiler/./src/mdast/index.ts","webpack://compiler/./src/mdast/move-answers-to-end.ts","webpack://compiler/./src/mdast/pagebreaks.ts","webpack://compiler/./src/mdast/remove-empty-paragraphs.ts","webpack://compiler/./src/mdast/youtube-videos.ts","webpack://compiler/./src/pdf/index.ts","webpack://compiler/./src/pdf/pdf-to-svg.ts","webpack://compiler/./src/pre-parse/allow-no-whitespace-before-heading.ts","webpack://compiler/./src/pre-parse/convert-block-tex.ts","webpack://compiler/./src/pre-parse/convert-inline-tex.ts","webpack://compiler/./src/pre-parse/convert-macro-to-directive.ts","webpack://compiler/./src/pre-parse/index.ts","webpack://compiler/./src/pre-parse/reformat-pandoc-simple-tables.ts","webpack://compiler/./src/utils/cache-to-file.ts","webpack://compiler/./src/utils/check-for-latest-version.ts","webpack://compiler/./src/utils/counter.ts","webpack://compiler/./src/utils/get-asset-hast.ts","webpack://compiler/./src/utils/icons.ts","webpack://compiler/./src/utils/message.ts","webpack://compiler/./src/utils/timer.ts","webpack://compiler/./src/utils/utils.ts","webpack://compiler/../node_modules/extend/index.js","webpack://compiler/../node_modules/is-buffer/index.js","webpack://compiler/../node_modules/mdurl/encode.js","webpack://compiler/./assets/crest.svg","webpack://compiler/./assets/hamburger-icon.svg","webpack://compiler/./assets/link-icon.svg","webpack://compiler/./assets/uofg.svg","webpack://compiler/external module \"@double-great/remark-lint-alt-text\"","webpack://compiler/external module \"@mapbox/remark-lint-link-text\"","webpack://compiler/external module \"base64-arraybuffer\"","webpack://compiler/external module \"chalk\"","webpack://compiler/external module \"dictionary-en-gb\"","webpack://compiler/external module \"figures\"","webpack://compiler/external module \"hash-sum\"","webpack://compiler/external module \"image-size\"","webpack://compiler/external module \"js-yaml\"","webpack://compiler/external module \"lodash/cloneDeep.js\"","webpack://compiler/external module \"lodash/kebabCase.js\"","webpack://compiler/external module \"lodash/startCase.js\"","webpack://compiler/external module \"markdown-table\"","webpack://compiler/external module \"mathjax-full/js/adaptors/liteAdaptor.js\"","webpack://compiler/external module \"mathjax-full/js/core/MathItem.js\"","webpack://compiler/external module \"mathjax-full/js/core/MmlTree/SerializedMmlVisitor.js\"","webpack://compiler/external module \"mathjax-full/js/handlers/html.js\"","webpack://compiler/external module \"mathjax-full/js/handlers/html/HTMLDocument.js\"","webpack://compiler/external module \"mathjax-full/js/input/mathml.js\"","webpack://compiler/external module \"mathjax-full/js/input/tex.js\"","webpack://compiler/external module \"mathjax-full/js/input/tex/AllPackages.js\"","webpack://compiler/external module \"mathjax-full/js/mathjax.js\"","webpack://compiler/external module \"mathjax-full/js/output/svg.js\"","webpack://compiler/external module \"mdast-util-toc\"","webpack://compiler/external module \"mime/lite.js\"","webpack://compiler/external module \"node-fetch\"","webpack://compiler/external module \"puppeteer\"","webpack://compiler/external module \"refractor\"","webpack://compiler/external module \"rehype-document\"","webpack://compiler/external module \"rehype-format\"","webpack://compiler/external module \"rehype-parse\"","webpack://compiler/external module \"rehype-raw\"","webpack://compiler/external module \"rehype-stringify\"","webpack://compiler/external module \"remark-autolink-headings\"","webpack://compiler/external module \"remark-directive\"","webpack://compiler/external module \"remark-footnotes\"","webpack://compiler/external module \"remark-frontmatter\"","webpack://compiler/external module \"remark-gfm\"","webpack://compiler/external module \"remark-parse\"","webpack://compiler/external module \"remark-rehype\"","webpack://compiler/external module \"remark-retext\"","webpack://compiler/external module \"remark-slug\"","webpack://compiler/external module \"retext-english\"","webpack://compiler/external module \"retext-spell\"","webpack://compiler/external module \"sandboxed-module\"","webpack://compiler/external module \"speech-rule-engine\"","webpack://compiler/external module \"svgo\"","webpack://compiler/external module \"to-vfile\"","webpack://compiler/external module \"unist-util-visit\"","webpack://compiler/external module \"yargs\"","webpack://compiler/external module \"yup\"","webpack://compiler/external node-commonjs \"buffer\"","webpack://compiler/external node-commonjs \"child_process\"","webpack://compiler/external node-commonjs \"fs\"","webpack://compiler/external node-commonjs \"os\"","webpack://compiler/external node-commonjs \"path\"","webpack://compiler/external node-commonjs \"url\"","webpack://compiler/./src/pdf/domstubs.js","webpack://compiler/../node_modules/mdast-util-definitions/index.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/footer.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/blockquote.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/break.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/code.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/delete.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/emphasis.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/footnote-reference.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/footnote.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/heading.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/html.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/revert.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/image-reference.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/image.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/inline-code.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/link-reference.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/link.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/list-item.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/list.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/paragraph.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/root.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/strong.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/table.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/text.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/thematic-break.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/handlers/index.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/index.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/traverse.js","webpack://compiler/../node_modules/mdast-util-to-hast/lib/wrap.js","webpack://compiler/../node_modules/micromark-util-character/lib/unicode-punctuation-regex.js","webpack://compiler/../node_modules/micromark-util-character/index.js","webpack://compiler/../node_modules/micromark-util-encode/index.js","webpack://compiler/../node_modules/micromark-util-sanitize-uri/index.js","webpack://compiler/../node_modules/bail/index.js","webpack://compiler/../node_modules/is-plain-obj/index.js","webpack://compiler/../node_modules/trough/index.js","webpack://compiler/../node_modules/unified/lib/index.js","webpack://compiler/../node_modules/unist-builder/index.js","webpack://compiler/../node_modules/unist-util-generated/index.js","webpack://compiler/../node_modules/unist-util-position/index.js","webpack://compiler/../node_modules/unist-util-stringify-position/index.js","webpack://compiler/../node_modules/vfile-message/index.js","webpack://compiler/external node-commonjs \"process\"","webpack://compiler/../node_modules/vfile/lib/minurl.shared.js","webpack://compiler/../node_modules/vfile/lib/index.js","webpack://compiler/webpack/bootstrap","webpack://compiler/webpack/runtime/async module","webpack://compiler/webpack/runtime/compat get default export","webpack://compiler/webpack/runtime/define property getters","webpack://compiler/webpack/runtime/hasOwnProperty shorthand","webpack://compiler/webpack/before-startup","webpack://compiler/webpack/startup","webpack://compiler/webpack/after-startup"],"sourcesContent":["import { EOL } from 'os';\n\nimport { Parent as HastParent } from 'hast';\nimport { Parent as MdastParent, Root } from 'mdast';\nimport { VFile } from 'vfile';\n\nimport { Context } from './context';\nimport { Unit } from './course/types';\nimport { hastPhase } from './hast';\nimport { htmlPhase } from './html';\nimport { knitr } from './knitr/knitr';\nimport { texToAliasDirective } from './latex/tex-to-directive';\nimport { createReport, reportErrors } from './linter';\nimport { mdastPhase } from './mdast';\nimport { combinedMdastPhase } from './mdast/combined';\nimport { convertToPdf } from './pdf';\nimport { preParsePhase } from './pre-parse';\n\nexport type BuiltUnit = {\n  unit: Unit;\n  md: string;\n  files: VFile[];\n  html?: {\n    mdast: MdastParent;\n    hast: HastParent;\n    html: string;\n  };\n  pdf?: {\n    mdast: MdastParent;\n    hast: HastParent;\n    html: string;\n    pdf: Buffer;\n  };\n};\n\nexport async function buildUnit(unit: Unit, ctx: Context) {\n  const unifiedFile = await knitr(unit, ctx);\n\n  const mdast = (await inSituTransforms(unifiedFile, ctx)) as Root;\n  // console.log(mdast);\n\n  await createReport(unifiedFile, mdast, ctx);\n\n  const result: BuiltUnit = {\n    unit,\n    md: combineMdFiles(unifiedFile),\n    files: [unifiedFile],\n  };\n\n  if (!ctx.options.noHtml) {\n    result.html = await syntaxTreeTransforms(\n      mdast,\n      unifiedFile,\n      unit,\n      ctx\n    );\n  }\n\n  if (!ctx.options.noPdf) {\n    const transformed = await syntaxTreeTransforms(\n      mdast,\n      unifiedFile,\n      unit,\n      ctx,\n      true\n    );\n    result.pdf = {\n      ...transformed,\n      pdf: await convertToPdf(transformed.html),\n    };\n  }\n\n  if (!ctx.options.noReport) {\n    reportErrors(result.files, ctx);\n  }\n\n  return result;\n}\n\nasync function inSituTransforms(file: VFile, ctx: Context) {\n  preParsePhase(file);\n  texToAliasDirective(file, ctx);\n  return mdastPhase(file, ctx);\n}\n\nfunction combineMdFiles(file: VFile) {\n  return removeDirectoryLines(file.value as string);\n}\n\nfunction removeDirectoryLines(md: string) {\n  return md\n    .split(EOL)\n    .filter((line) => !/^:directory\\[.+\\]$/.test(line))\n    .join(EOL);\n}\n\nasync function syntaxTreeTransforms(\n  _mdast: Root,\n  file: VFile,\n  unit: Unit,\n  ctx: Context,\n  targetPdf?: boolean\n) {\n  const mdast = await combinedMdastPhase(_mdast, ctx, file, targetPdf);\n  const hast = (await hastPhase(\n    mdast,\n    ctx,\n    file,\n    targetPdf\n  )) as HastParent;\n  const html = await htmlPhase(hast, mdast, file, unit, ctx, targetPdf);\n  return { mdast, hast, html };\n}\n","import yargs from 'yargs';\n\nimport { Options } from '../context';\nimport { rMarkdown } from '..';\n\nconst { argv } = yargs(process.argv.slice(2))\n  .option('week', {\n    type: 'number',\n    description: 'Build specific week (1-based index)',\n  })\n  .option('watch', {\n    type: 'boolean',\n    description: 'Watch coursework for changes',\n  })\n  .option('noDoc', {\n    type: 'boolean',\n    description: 'Only compile content HTML',\n  })\n  .option('noHtml', {\n    type: 'boolean',\n    description: \"Don't create HTML file\",\n  })\n  .option('noPdf', {\n    type: 'boolean',\n    description: \"Don't create PDF file\",\n  })\n  .option('noSyntaxHighlight', {\n    type: 'boolean',\n    description: 'No syntax highlighting',\n  })\n  .option('noReport', {\n    type: 'boolean',\n    description: 'Bypass linter',\n  })\n  .option('noEmbedAssets', {\n    type: 'boolean',\n    description: \"Don't embed assets\",\n  })\n  .option('noCache', {\n    type: 'boolean',\n    description: 'No cache',\n  })\n  .option('noTexSvg', {\n    type: 'boolean',\n    description: 'No Tex Svg',\n  })\n  .option('spelling', {\n    type: 'boolean',\n    description: 'Check spelling',\n  })\n  .option('pythonBin', {\n    type: 'string',\n    description: 'Custom path to python binary',\n  })\n  .option('force', {\n    type: 'boolean',\n    description: 'Compile even with fatal errors',\n  });\n\nconst dirPath = String(argv._[0] || '.');\n\nconst options: Options = {\n  week: argv.week,\n  watch: argv.watch,\n  noDoc: argv.noDoc,\n  noHtml: argv.noHtml,\n  noPdf: argv.noPdf,\n  noSyntaxHighlight: argv.noSyntaxHighlight,\n  noReport: argv.noReport,\n  noEmbedAssets: argv.noEmbedAssets,\n  noCache: argv.noCache,\n  noTexSvg: argv.noTexSvg,\n  spelling: argv.spelling,\n  pythonBin: argv.pythonBin,\n  force: argv.force,\n};\n\n// async function rMarkdown(dirPath: string, options: Options = {}) {\n//   try {\n//     return await run(dirPath, options);\n//   } catch (err) {\n//     console.error(err);\n//     if (err instanceof Error) {\n//       console.error(err.stack);\n//     }\n//     process.exit(1);\n//   }\n// }\n\nrMarkdown(dirPath, options);\n","import { collectCoursework } from './course';\nimport { Course } from './course/types';\nimport { getBuildDir, getCacheDir } from './utils/utils';\n\nexport type Options = {\n  noDoc?: boolean;\n  noHtml?: boolean;\n  noPdf?: boolean;\n  noSyntaxHighlight?: boolean;\n  noReport?: boolean;\n  reportOnlyErrors?: boolean;\n  noEmbedAssets?: boolean;\n  noCache?: boolean;\n  noTexSvg?: boolean;\n  week?: number;\n  watch?: boolean;\n  shouldFail?: boolean;\n  spelling?: boolean;\n  force?: boolean;\n  noWrite?: boolean;\n  format?: boolean;\n  pythonBin?: string;\n};\n\nexport type Context = {\n  dirPath: string;\n  buildDir: string;\n  cacheDir: string;\n  course: Course;\n  options: Options;\n  mmlStore?: string[];\n  refStore: Record<string, string>;\n  figureCounter: number;\n};\n\nexport async function createContext(\n  dirPath: string,\n  options: Options = {}\n): Promise<Context> {\n  return {\n    course: await collectCoursework(dirPath),\n    dirPath,\n    buildDir: getBuildDir(dirPath),\n    cacheDir: getCacheDir(dirPath),\n    options,\n    refStore: {},\n    figureCounter: 0,\n  };\n}\n","import path from 'path';\n\nimport kebabCase from 'lodash/kebabCase.js';\nimport { toVFile } from 'to-vfile';\n\nimport { loadCourseYaml } from './load-course';\nimport { loadUnitYaml } from './load-unit';\nimport {\n  Course,\n  CourseYaml,\n  Unit,\n  UnitTitles,\n  UnitTitlesInput,\n} from './types';\nimport { FileRef } from './types';\n\nexport async function collectCoursework(dirPath: string): Promise<Course> {\n  const course = await loadCourseYaml(dirPath);\n  const coursePath = path.join(process.cwd(), dirPath);\n  const units = await Promise.all(\n    course.units.map((unit) => collectUnit(unit, course, dirPath))\n  );\n  return { ...course, coursePath, units };\n}\n\nasync function collectUnit(\n  unit: FileRef,\n  course: CourseYaml,\n  dirPath: string\n): Promise<Unit> {\n  const { content, ...yaml } = await loadUnitYaml(dirPath, unit.src);\n  const unitPath = path.join(process.cwd(), dirPath, unit.src);\n  const files = await Promise.all(\n    content.map((c) => {\n      const filePath = path.join(dirPath, unit.src, '..', c.src);\n      return toVFile.read(filePath, 'utf-8');\n    })\n  );\n  const titles = getUnitTitles({\n    courseTitle: course.title,\n    unitName: yaml.name,\n    unitTitle: yaml.title,\n  });\n  return { ...yaml, unitPath, parts: content, files, titles };\n}\n\nexport function getUnitTitles({\n  courseTitle,\n  unitName,\n  unitTitle,\n}: UnitTitlesInput): UnitTitles {\n  return {\n    courseTitle,\n    unitTitle: `${unitName}: ${unitTitle}`,\n    unitName,\n    docTitle: `${unitTitle} | ${courseTitle}`,\n    fileName: kebabCase(unitName),\n  };\n}\n","import path from 'path';\n\nimport yaml from 'js-yaml';\nimport * as yup from 'yup';\n\nimport { readFile } from '../utils/utils';\nimport { CourseYaml } from './types';\n\nconst courseSchema = yup.object().shape({\n  title: yup.string().required(),\n  units: yup.array().of(\n    yup.object().shape({\n      src: yup.string().required(),\n    })\n  ),\n});\n\nexport async function loadCourseYaml(dirPath: string) {\n  const fileContents = await readFile(path.join(dirPath, 'course.yaml'));\n  const course = yaml.load(fileContents);\n  return courseSchema.validateSync(course) as CourseYaml;\n}\n","import path from 'path';\n\nimport yaml from 'js-yaml';\nimport * as yup from 'yup';\n\nimport { readFile } from '../utils/utils';\nimport { UnitYaml } from './types';\n\nconst unitSchema = yup.object().shape({\n  name: yup.string().required(),\n  title: yup.string().required(),\n  content: yup.array().of(\n    yup.object().shape({\n      src: yup.string().required(),\n    })\n  ),\n});\n\nexport async function loadUnitYaml(dirPath: string, src: string) {\n  const fileContents = await readFile(path.join(dirPath, src));\n  const unit = yaml.load(fileContents);\n  return unitSchema.validateSync(unit) as UnitYaml;\n}\n","import path from 'path';\n\nimport { encode as base46Encode } from 'base64-arraybuffer';\nimport { Element, Properties } from 'hast';\nimport sizeOf from 'image-size';\nimport mimes from 'mime/lite.js';\nimport fetch from 'node-fetch';\nimport { toVFile } from 'to-vfile';\n// import { optimize } from 'svgo';\nimport { Parent } from 'unist';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\nimport { pdfToSvg } from '../pdf/pdf-to-svg';\nimport { cacheToFile } from '../utils/cache-to-file';\nimport { getAssetHast } from '../utils/get-asset-hast';\nimport { failMessage } from '../utils/message';\nimport { readFile, rehypeParser } from '../utils/utils';\n\nexport function embedAssets(ctx: Context) {\n  async function embed(node: Element, file: VFile) {\n    const src = getImageSrc(node);\n    const parsed = path.parse(src);\n    try {\n      switch (parsed.ext) {\n        case '.png':\n        case '.jpg':\n        case '.jpeg':\n        case '.gif':\n          return await embedImage(node, ctx, file);\n        case '.svg':\n          return await embedSvg(node, ctx);\n        case '.pdf':\n          return await embedPdfSvg(node);\n        case '.html':\n          return await embedHtml(node);\n        default:\n          throw new Error(`Unhandled file extension: ${parsed.ext}`);\n      }\n    } catch (_err) {\n      const err = _err as Error;\n      failMessage(file, err?.message || '', node.position);\n    }\n  }\n  return async (tree: Element, file: VFile) => {\n    const transformations: Promise<void>[] = [];\n    visit(tree, 'element', (node) => {\n      if (node.tagName === 'img') {\n        transformations.push(embed(node, file));\n      }\n    });\n    await Promise.all(transformations);\n  };\n}\n\nasync function embedImage(node: Element, ctx: Context, file: VFile) {\n  const src = getImageSrc(node);\n  const mime = mimes.getType(path.extname(src));\n  try {\n    const image = await getImage(src, ctx);\n    const { width } = sizeOf(Buffer.from(image, 'base64'));\n    node.properties = {\n      ...node.properties,\n      src: `data:${mime};base64,${image}`,\n      style: [`max-width: ${width}px`],\n    };\n  } catch (err) {\n    console.log(err);\n    failMessage(file, `Image not found: ${src}`);\n  }\n}\n\nasync function embedSvg(imgNode: Element, ctx: Context) {\n  const src = getImageSrc(imgNode);\n  const contents = await readFile(src);\n  const idx = contents.indexOf('<svg');\n  const svg = idx === -1 ? contents : contents.slice(idx);\n  // const optimised = optimize(svg, { multipass: true }).data;\n  const svgNode = getAssetHast(svg) as Element;\n\n  const className = 'knitr-svg';\n  const properties = {\n    ...imgNode.properties,\n    ...svgNode.properties,\n    className: [\n      className,\n      ...getNodeClassNames(imgNode, className),\n      ...getNodeClassNames(svgNode, className),\n    ],\n  } as Properties;\n\n  delete properties.src;\n\n  Object.assign(imgNode, svgNode, { properties });\n}\n\nfunction getNodeClassNames(node: Element, removeClass: string) {\n  const classes = node.properties?.className;\n  if (typeof classes === 'string' && classes !== removeClass) {\n    return [classes];\n  }\n  if (Array.isArray(classes)) {\n    return classes.map((x) => String(x)).filter((s) => s !== removeClass);\n  }\n  return [];\n}\n\nfunction getImageSrc(node: Element) {\n  const properties = (node.properties || {}) as { src: string };\n  if (!properties.src) {\n    throw new Error('Image has no src');\n  }\n  return properties.src;\n}\n\nasync function getImage(src: string, ctx: Context) {\n  if (src.startsWith('http')) {\n    return cacheToFile({\n      ctx,\n      prefix: 'youtube',\n      key: src,\n      execFn: getImageDataFromWeb,\n    });\n  }\n  return readFile(src, 'base64');\n}\n\nasync function getImageDataFromWeb(src: string) {\n  const response = await fetch(src);\n  const buffer = await response.arrayBuffer();\n  return base46Encode(buffer);\n}\n\nasync function embedPdfSvg(imgNode: Element) {\n  const src = getImageSrc(imgNode);\n  const svgNode = (await pdfToSvg(src)) as Element;\n\n  const properties = {\n    ...imgNode.properties,\n    ...svgNode.properties,\n  } as Properties;\n\n  delete properties.src;\n\n  Object.assign(imgNode, svgNode, { properties });\n}\n\nasync function embedHtml(imgNode: Element) {\n  const src = getImageSrc(imgNode);\n  const value = await readFile(src);\n  const vfile = toVFile({ value });\n  const parsed = rehypeParser().parse(vfile) as Parent;\n\n  Object.assign(imgNode, {\n    tagName: 'div',\n    properties: {\n      className: 'interactive-element',\n    },\n    children: parsed.children,\n  });\n}\n","import { Root } from 'mdast';\nimport rehypeRaw from 'rehype-raw';\nimport remark2rehype from 'remark-rehype';\nimport { unified } from 'unified';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\nimport { embedAssets } from './embed-assets';\nimport { responsiveTables } from './responsive-tables';\n\nexport async function hastPhase(\n  mdast: Root,\n  ctx: Context,\n  file: VFile,\n  targetPdf?: boolean\n) {\n  const processor = unified()\n    .use(remark2rehype, { allowDangerousHtml: true })\n    .use(rehypeRaw)\n    .use(responsiveTables);\n\n  if (!ctx.options.noEmbedAssets) {\n    processor.use(embedAssets, ctx);\n  }\n\n  return processor.run(mdast, file);\n}\n","import { Element } from 'hast';\nimport cloneDeep from 'lodash/cloneDeep.js';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\ntype ParentProps = {\n  className: string[];\n};\n\nexport function responsiveTables() {\n  return async (tree: Element, file: VFile) => {\n    visit(tree, 'element', (node, idx, _parent) => {\n      if (node.tagName !== 'table') {\n        return;\n      }\n\n      const parent = _parent as Element;\n      const properties = (parent?.properties || {}) as ParentProps;\n      const className = properties.className || [];\n\n      if (!className.includes('table-wrapper')) {\n        Object.assign(node, {\n          tagName: 'div',\n          properties: {\n            className: 'table-wrapper',\n          },\n          children: [cloneDeep(node)],\n        });\n      }\n    });\n  };\n}\n","import path from 'path';\n\nimport { Parent as HastParent, Root } from 'hast';\nimport startCase from 'lodash/startCase.js';\nimport { Parent as MdastParent } from 'mdast';\nimport doc, { Options } from 'rehype-document';\nimport format from 'rehype-format';\nimport stringify from 'rehype-stringify';\nimport { unified } from 'unified';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\nimport { Unit } from '../course/types';\nimport { getLibraryDir, readFile } from '../utils/utils';\nimport { pdfWrapper } from './pdf';\nimport { htmlWrapper } from './wrapper';\n\nexport async function htmlPhase(\n  hast: HastParent,\n  mdast: MdastParent,\n  file: VFile,\n  unit: Unit,\n  ctx: Context,\n  targetPdf?: boolean\n) {\n  const processor = unified().use(stringify, { allowDangerousHtml: true });\n\n  if (ctx.options.format) {\n    // hangs in some scenarios so off by default, useful in tests\n    processor.use(format);\n  }\n\n  if (!ctx.options.noDoc) {\n    const cssPath = path.join(getLibraryDir(), 'template.css');\n    const docOptions: Options = {\n      title: unit.titles.docTitle,\n      style: `\\n${await readFile(cssPath)}\\n`,\n    };\n\n    if (!targetPdf) {\n      const jsPath = path.join(getLibraryDir(), 'template.js2');\n      docOptions.script = `\\n${await readFile(jsPath)}\\n`;\n      processor.use(htmlWrapper, unit, mdast);\n    } else {\n      processor.use(pdfWrapper, unit);\n    }\n\n    processor.use(doc, docOptions);\n  }\n\n  const transformed = await processor.run(hast as Root, file);\n\n  const result = processor.stringify(transformed, file);\n\n  return postTransforms(result, ctx);\n}\n\nfunction postTransforms(html: string, ctx: Context) {\n  let result = '';\n  result = referenceTransform(html, ctx.refStore);\n  return result;\n}\n\nfunction referenceTransform(html: string, refStore: Context['refStore']) {\n  return html.replace(/ref:\\/\\/(\\w+)/gms, (...match) => {\n    const key = match[1];\n    const link = refStore[key];\n    const name = startCase(link);\n    return `<a href=\"#${link}\">${name}</a>`;\n  });\n}\n","import { Node, Parent } from 'unist';\n\nimport { Unit } from '../course/types';\n// import { UnitTitles } from '../course/types';\nimport { createDefs } from '../utils/icons';\nimport { createMain } from './wrapper/main';\n\nexport function pdfWrapper(unit: Unit) {\n  return async (tree: Node) => {\n    const main = await createMain(unit.titles, (tree as Parent).children);\n    const iconDefs = createDefs();\n    return {\n      type: 'root',\n      children: [\n        {\n          type: 'element',\n          tagName: 'div',\n          properties: {\n            id: 'root',\n            className: ['hide-sidebar', 'font-default', 'pdf'],\n          },\n          children: [iconDefs, main],\n        },\n      ],\n    };\n  };\n}\n","import { Node, Parent } from 'unist';\n\nimport { Unit } from '../../course/types';\nimport { createDefs, createSvg } from '../../utils/icons';\nimport { createMain } from './main';\nimport { createSidebar } from './sidebar';\n\nexport function htmlWrapper(unit: Unit, mdast: Node) {\n  return async (tree: Node) => {\n    const hamburgerIcon = createSvg('hamburger-icon');\n    const sidebar = await createSidebar(mdast);\n    const main = await createMain(unit.titles, (tree as Parent).children);\n    const iconDefs = createDefs();\n    return {\n      type: 'root',\n      children: [\n        {\n          type: 'element',\n          tagName: 'div',\n          properties: {\n            id: 'root',\n            className: ['hide-sidebar'],\n          },\n          children: [iconDefs, main, hamburgerIcon, sidebar],\n        },\n      ],\n    };\n  };\n}\n","import { Node } from 'unist';\n\nimport { UnitTitles } from '../../course/types';\n\nexport async function createMain(titles: UnitTitles, content: Node[]) {\n  return {\n    type: 'element',\n    tagName: 'main',\n    children: [\n      {\n        type: 'element',\n        tagName: 'div',\n        properties: {\n          className: 'wrapper',\n        },\n        children: [createH1(titles), ...content],\n      },\n    ],\n  };\n}\n\nfunction createH1(titles: UnitTitles) {\n  return {\n    type: 'element',\n    tagName: 'h1',\n    children: [\n      {\n        type: 'text',\n        value: titles.courseTitle,\n      },\n      {\n        type: 'element',\n        tagName: 'span',\n        properties: {\n          className: 'unit',\n        },\n        children: [\n          {\n            type: 'text',\n            value: titles.unitTitle,\n          },\n        ],\n      },\n    ],\n  };\n}\n","import { Root } from 'mdast';\nimport { toHast } from 'mdast-util-to-hast';\nimport { toc as getToc } from 'mdast-util-toc';\nimport { Node } from 'unist';\n\nimport crestSvg from '../../../assets/crest.svg';\nimport uOfGSvg from '../../../assets/uofg.svg';\nimport { getAssetHast } from '../../utils/get-asset-hast';\nimport { createSvg } from '../../utils/icons';\nimport {\n  createViewOptions,\n  createViewOptionsButton,\n} from './view-options';\n\nexport async function createSidebar(mdast: Node) {\n  const logo = await createLogo();\n  const toc = getToc(mdast as Root, { maxDepth: 3 }).map;\n  const tocChildren = toc === null ? [] : [toHast(toc)];\n\n  return {\n    type: 'element',\n    tagName: 'aside',\n    children: [\n      logo,\n      createViewOptionsButton(),\n      {\n        type: 'element',\n        tagName: 'nav',\n        properties: {\n          id: 'toc',\n        },\n        children: tocChildren,\n      },\n      {\n        type: 'element',\n        tagName: 'div',\n        properties: {\n          id: 'view-options',\n        },\n        children: createViewOptions(),\n      },\n    ],\n  };\n}\n\nasync function createLogo() {\n  const crest = getAssetHast(crestSvg);\n  const uofg = getAssetHast(uOfGSvg);\n  const hamburgerIcon = createSvg('hamburger-icon');\n  return {\n    type: 'element',\n    tagName: 'div',\n    properties: {\n      className: 'logo',\n    },\n    children: [\n      {\n        type: 'element',\n        tagName: 'div',\n        properties: {\n          className: 'logo-wrapper',\n        },\n        children: [crest, uofg],\n      },\n      hamburgerIcon,\n    ],\n  };\n}\n","import { Item } from './shared';\n\ntype ReadabilityItem = Item & {\n  min: number;\n  max: number;\n  increment: number;\n};\n\nconst options: ReadabilityItem[] = [\n  {\n    value: 'fontSize',\n    label: 'Font-size',\n    min: 0.6,\n    max: 2,\n    increment: 0.1,\n  },\n  {\n    value: 'lineSpacing',\n    label: 'Line spacing',\n    min: 0.6,\n    max: 2,\n    increment: 0.1,\n  },\n  {\n    value: 'letterSpacing',\n    label: 'Letter spacing',\n    min: -0.1,\n    max: 0.2,\n    increment: 0.05,\n  },\n  {\n    value: 'lineWidth',\n    label: 'Line width',\n    min: 0.6,\n    max: 1.2,\n    increment: 0.05,\n  },\n];\n\nexport function createReadabilityList() {\n  return {\n    type: 'element',\n    tagName: 'ul',\n    properties: {\n      id: 'readability',\n    },\n    children: options.map(createOption),\n  };\n}\n\nfunction createOption(item: ReadabilityItem) {\n  return {\n    type: 'element',\n    tagName: 'li',\n    properties: {\n      className: [item.value],\n      'data-min': item.min,\n      'data-max': item.max,\n      'data-increment': item.increment,\n    },\n    children: [\n      {\n        type: 'element',\n        tagName: 'span',\n        properties: {\n          className: ['label'],\n        },\n        children: [\n          {\n            type: 'text',\n            value: item.label,\n          },\n        ],\n      },\n      {\n        type: 'element',\n        tagName: 'span',\n        properties: {\n          className: ['actions'],\n        },\n        children: [\n          {\n            type: 'element',\n            tagName: 'span',\n            properties: {\n              className: ['btn', 'minus'],\n            },\n            children: [\n              {\n                type: 'text',\n                value: '−',\n              },\n            ],\n          },\n          {\n            type: 'element',\n            tagName: 'span',\n            properties: {\n              className: ['btn', 'plus'],\n            },\n            children: [\n              {\n                type: 'text',\n                value: '+',\n              },\n            ],\n          },\n          {\n            type: 'element',\n            tagName: 'span',\n            properties: {\n              className: ['btn', 'reset'],\n            },\n            children: [\n              {\n                type: 'text',\n                value: 'Reset',\n              },\n            ],\n          },\n        ],\n      },\n    ],\n  };\n}\n","import { Item } from './shared';\n\nconst themes: Item[] = [\n  {\n    value: 'light',\n    label: 'Light',\n  },\n  {\n    value: 'dark',\n    label: 'Dark',\n  },\n  {\n    value: 'yellow-on-black',\n    label: 'Yellow on Black',\n  },\n  {\n    value: 'black-on-yellow',\n    label: 'Black on Yellow',\n  },\n  {\n    value: 'black-on-red',\n    label: 'Black on Red',\n  },\n  {\n    value: 'black-on-blue',\n    label: 'Black on Blue',\n  },\n];\n\nexport function createThemeList() {\n  return {\n    type: 'element',\n    tagName: 'ul',\n    properties: {\n      id: 'themes',\n    },\n    children: themes.map(createThemeButton),\n  };\n}\n\nfunction createThemeButton(theme: Item) {\n  return {\n    type: 'element',\n    tagName: 'li',\n    properties: {\n      className: [theme.value],\n    },\n    children: [\n      {\n        type: 'text',\n        value: theme.label,\n      },\n    ],\n  };\n}\n","import { Node } from 'unist';\n\n// import { createFontList } from './font';\nimport { createReadabilityList } from './readability';\nimport { createThemeList } from './theme';\n\nexport function createViewOptionsButton() {\n  return {\n    type: 'element',\n    tagName: 'div',\n    properties: {\n      id: 'view-options-toggle',\n    },\n    children: [\n      {\n        type: 'text',\n        value: 'View options',\n      },\n    ],\n  };\n}\n\nexport function createViewOptions(): Node[] {\n  return [\n    createTitle('Theme'),\n    createThemeList(),\n    // createTitle('Font'),\n    // createFontList(),\n    createTitle('Readability'),\n    createReadabilityList(),\n  ];\n}\n\nfunction createTitle(value: string) {\n  return {\n    type: 'element',\n    tagName: 'h3',\n    children: [\n      {\n        type: 'text',\n        value,\n      },\n    ],\n  };\n}\n","import path from 'path';\n\nimport chalk from 'chalk';\n\nimport { BuiltUnit, buildUnit } from './build-unit';\nimport { Context, Options, createContext } from './context';\nimport { checkForLatestVersion } from './utils/check-for-latest-version';\nimport { Timer, createTimer } from './utils/timer';\nimport { mkdir, writeFile } from './utils/utils';\n\nexport async function rMarkdown(dirPath: string, options: Options = {}) {\n  await checkForLatestVersion();\n\n  const timer = createTimer();\n  const ctx = await createContext(dirPath, options);\n\n  const result = [];\n\n  if (ctx.options.week) {\n    // write single week\n    const idx = ctx.options.week - 1;\n    const input = ctx.course.units[idx];\n\n    if (input === undefined) {\n      const courseYaml = path.join(ctx.dirPath, 'course.yaml');\n      throw new Error(\n        `Week ${ctx.options.week} not found in ${courseYaml}`\n      );\n    }\n\n    const built = await buildUnit(input, ctx);\n    await writeUnit(built, ctx, timer);\n    result.push(built);\n  } else {\n    // write full course\n    for (const input of ctx.course.units) {\n      const built = await buildUnit(input, ctx);\n      await writeUnit(built, ctx, timer);\n      result.push(built);\n    }\n  }\n\n  return result;\n}\n\nasync function writeUnit(built: BuiltUnit, ctx: Context, timer: Timer) {\n  if (ctx.options.noWrite) {\n    return;\n  }\n\n  await mkdir(ctx.buildDir);\n  const filePath = path.join(ctx.buildDir, built.unit.titles.fileName);\n\n  if (built.html) {\n    await writeFile(filePath + '.html', built.html.html);\n    const status = chalk.green.bold(`Complete in ${timer.seconds()}s`);\n    console.log(`✨ ${status} ${filePath}.html`);\n  }\n\n  if (built.pdf) {\n    await writeFile(filePath + '.pdf', built.pdf.pdf);\n\n    // debug\n    // await writeFile(filePath + '.pdf.html', built.pdf.html);\n\n    const status = chalk.green.bold(`Complete in ${timer.seconds()}s`);\n    console.log(`✨ ${status} ${filePath}.pdf`);\n  }\n}\n","import { exec } from 'child_process';\nimport { EOL } from 'os';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nimport chalk from 'chalk';\nimport hashSum from 'hash-sum';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\nimport { Unit } from '../course/types';\nimport { warnMessage } from '../utils/message';\nimport { mkdir, rmFile, writeFile } from '../utils/utils';\n\nexport async function knitr(unit: Unit, ctx: Context) {\n  const parentFile = await createParentFile(unit, ctx);\n\n  const result = await execKnitr(parentFile, ctx);\n  // console.log(result);\n  parentFile.value = result;\n  return parentFile;\n}\n\n// creating a temporary file which includes all child files allows\n// R/Python state to be shared across multiple .Rmd files\n// https://yihui.org/knitr/options/#child-documents\nasync function createParentFile(unit: Unit, ctx: Context) {\n  const file = new VFile();\n\n  file.value = unit.files.reduce((acc, o) => {\n    const [filePath] = o.history;\n\n    // directory directive is used to ensure external assets\n    // can have relative paths to the .Rmd document.\n    // used in embed-asset-url mdast transform\n    const fileDir = path.parse(filePath).dir;\n    const directive = `:directory[${fileDir}]`;\n\n    // child document\n    const relativePath = path\n      .relative(ctx.cacheDir, filePath)\n      // escape backslash path on windows\n      .replace(/\\\\/g, '\\\\\\\\');\n\n    const childCodeBlock = `\\`\\`\\`{r, child='${relativePath}'}${EOL}\\`\\`\\``;\n    return acc + directive + EOL + EOL + childCodeBlock + EOL + EOL;\n  }, '');\n\n  // console.log(file.value);\n\n  return file;\n}\n\n// TODO: see what can be done with output when \"quiet\" in knitr.R is turned off\nasync function execKnitr(file: VFile, ctx: Context) {\n  const md = file.value as string;\n  const uniqueId = getUniqueId(md);\n  const cachedFile = path.join(ctx.cacheDir, `${uniqueId}.Rmd`);\n  const cacheDir = path.join(ctx.cacheDir, uniqueId);\n  await mkdir(cacheDir);\n  await writeFile(cachedFile, md);\n\n  return new Promise<string>((resolve, reject) => {\n    const cmd = createKnitrCommand(file, ctx, uniqueId);\n\n    exec(cmd, async (err, response, stdErr) => {\n      if (stdErr) {\n        console.log(chalk.grey(`[knitr] ${stdErr.trim()}`));\n      }\n      if (err) {\n        console.error('ERROR', err);\n        reject(err);\n      } else {\n        reportErrors(response, file);\n        resolve(formatResponse(response));\n      }\n      await rmFile(cachedFile);\n    });\n  });\n}\n\nfunction getUniqueId(md: string) {\n  const hash = hashSum(md);\n  const ts = new Date().getTime().toString();\n  return `knitr-${hash}-${ts}`;\n}\n\nfunction createKnitrCommand(file: VFile, ctx: Context, uniqueId: string) {\n  const rFileDir = getKnitrFileDir();\n  const rFile = path.join(rFileDir, 'knitr.R');\n  const baseDir = path.parse(ctx.course.units[0].unitPath).dir; // TODO\n  const cachedFile = path.join(ctx.cacheDir, `${uniqueId}.Rmd`);\n  const cacheDir = path.join(ctx.cacheDir, uniqueId);\n  let cmd = `Rscript \"${rFile}\" \"${cachedFile}\" \"${baseDir}/\" \"${cacheDir}/\"`;\n\n  if (ctx.options.pythonBin) {\n    cmd += ` \"${ctx.options.pythonBin}\"`;\n  }\n\n  return cmd;\n}\n\nfunction getKnitrFileDir() {\n  // temporary hack until this PR is merged\n  // https://github.com/webpack/webpack/pull/15246\n  if (process.env.NODE_ENV === 'production') {\n    return __dirname;\n  }\n  return path.dirname(fileURLToPath(import.meta.url));\n}\n\nfunction reportErrors(response: string, file: VFile) {\n  response.split('\\n').forEach((line, idx) => {\n    const trimmed = line.trim();\n    if (trimmed.startsWith('## Error')) {\n      warnMessage(file, trimmed.replace('## ', ''), {\n        start: {\n          line: idx + 1,\n          column: 0,\n        },\n        end: {\n          line: idx + 1,\n          column: line.length,\n        },\n      });\n    }\n  });\n}\n\nasync function formatResponse(response: string) {\n  let md = response;\n  md = removeCustomPythonBinNotice(md);\n  md = addCodeBlockClasses(md);\n  md = addErrorCodeBlock(md);\n  md = removeHashSigns(md);\n  md = removeEmptyLog(md);\n  md = addNewLineAfterKable(md);\n  return md;\n}\n\nfunction removeCustomPythonBinNotice(md: string) {\n  return md.replace(/^\\$python\\s\\[1\\]\\s\"\\S+\"/, '');\n}\n\nfunction addCodeBlockClasses(md: string) {\n  return md\n    .split('\\n')\n    .reduce((acc: string[], line) => {\n      if (line.startsWith('```{.knitr-output}')) {\n        const lang = findLanguageForOutput(acc);\n        acc.push(`\\`\\`\\`{.${lang}-output}`);\n      } else {\n        acc.push(line);\n      }\n      return acc;\n    }, [])\n    .join('\\n');\n}\n\nfunction removeHashSigns(md: string) {\n  let insideCodeResponse = false;\n  let openingLine = '';\n  return md\n    .split('\\n')\n    .reduce((acc: string[], line) => {\n      if (line.startsWith('```')) {\n        insideCodeResponse = !insideCodeResponse;\n        openingLine = insideCodeResponse ? line : '';\n      }\n      if (insideCodeResponse && openingLine.endsWith('-output}')) {\n        acc.push(line.replace(/^##\\s+/, ''));\n      } else {\n        acc.push(line);\n      }\n      return acc;\n    }, [])\n    .join('\\n');\n}\n\nfunction removeEmptyLog(md: string) {\n  return md.replace(/\\[1\\]\\s\"\"$/gm, '').trim();\n}\n\nfunction addErrorCodeBlock(md: string) {\n  return md\n    .split('\\n')\n    .reduce((acc: string[], line, idx) => {\n      if (line.startsWith('## Error') && acc[idx - 1].startsWith('```')) {\n        const lang = findLanguageForOutput(acc.slice(0, -1));\n        acc[acc.length - 1] = `\\`\\`\\`{.${lang}-error-output}`;\n      }\n      acc.push(line);\n      return acc;\n    }, [])\n    .join('\\n');\n}\n\nfunction addNewLineAfterKable(md: string) {\n  return md\n    .split('\\n')\n    .reduce((acc: string[], line, idx) => {\n      if (acc[idx - 1]?.startsWith('|') && !line.startsWith('|')) {\n        acc.push('', line);\n      } else {\n        acc.push(line);\n      }\n      return acc;\n    }, [])\n    .join('\\n');\n}\n\nfunction findLanguageForOutput(prev: string[]) {\n  const pattern = /```(\\w*)/;\n  const reversed = prev.slice().reverse();\n  const prevClosingIdx = reversed.findIndex((s) => s.startsWith('```'));\n  const prevOpening = reversed\n    .slice(prevClosingIdx + 1)\n    .find((s) => pattern.test(s)) as string;\n\n  if (!prevOpening) {\n    return 'r';\n  }\n\n  const match = prevOpening.match(pattern) as RegExpMatchArray;\n  return match[1];\n}\n\n// attempt at changing knitr output. doesn't completely work\n// const hooks = `\n//   knit_hooks$set(\n//     source = function(x, options) {\n//       paste(c(\"\\`\\`\\`r\", x, \"\\`\\`\\`\"), collapse = \"\\n\")\n//     },\n//     output = function(x, options) {\n//       paste(c(\"\\`\\`\\`\", x, \"\\`\\`\\`\"), collapse = \"\\n\")\n//     },\n//     error = function(x, options) {\n//       paste(\n//         c(\n//           \"\\`\\`\\`plaintext error\",\n//           gsub(\"## Error\", \"\\#\\# Error\", x),\n//           \"\\`\\`\\`\"\n//         ),\n//         collapse = \"\\n\"\n//       )\n//     }\n//   )\n// `;\n","import { Element, Literal } from 'hast';\nimport { Parent, Root } from 'mdast';\nimport { TextDirective } from 'mdast-util-directive';\nimport { visit } from 'unist-util-visit';\n\nimport { Context } from '../context';\nimport { rehypeParser } from '../utils/utils';\nimport { mmlToSpeech, mmlToSvg } from './mathjax-tex';\n\nexport function aliasDirectiveToSvg(ctx: Context) {\n  return (tree: Root) => {\n    visit(tree, 'textDirective', (node) => {\n      if (!ctx.mmlStore || ctx.options.noTexSvg) {\n        return;\n      }\n      switch (node.name) {\n        case 'inlineMath':\n        case 'blockMath': {\n          const idx = getTexIdx(node as TextDirective);\n          console.log(idx);\n          const mml = ctx.mmlStore[idx];\n          // if (idx === 10) {\n          //   console.log(mml);\n          // }\n          const svg = renderSvg(mml);\n          const properties = {\n            ...svg.properties,\n            className:\n              node.name === 'inlineMath' ? 'inline-math' : 'block-math',\n            id: getRefId(mml),\n          };\n          node.data = {\n            hName: svg.tagName,\n            hProperties: properties,\n            hChildren: svg.children,\n          };\n        }\n      }\n    });\n  };\n}\n\nfunction getTexIdx(node: Parent) {\n  const firstChild = node.children[0] as Literal;\n  return Number(firstChild.value || 0);\n}\n\nfunction getRefId(mml: string) {\n  const match = mml.match(/<mtd.+?id=\"(.*?)\"/);\n  if (match === null) {\n    return undefined;\n  }\n  return match[1];\n}\n\nfunction renderSvg(mml: string) {\n  const label = mmlToSpeech(mml);\n  const svg = mmlToSvg(mml);\n  return createAccessibleSvg(svg, label);\n}\n\nfunction createAccessibleSvg(mathjaxSvg: string, label: string = '') {\n  const tree = rehypeParser.parse(mathjaxSvg);\n  const parent = tree.children[0] as Element;\n  const svg = parent.children[0] as Element;\n  const properties = svg.properties as Record<string, string>;\n\n  const newProperties: Record<string, string> = {\n    width: properties.width,\n    height: properties.height,\n    viewBox: properties.viewBox,\n    role: 'img',\n  };\n\n  if (label !== '') {\n    const uniqueId = `math-${Math.random().toString(16).slice(2)}`;\n    newProperties['aria-labelledby'] = uniqueId;\n    svg.children.unshift({\n      type: 'element',\n      tagName: 'title',\n      properties: {\n        id: uniqueId,\n      },\n      children: [\n        {\n          type: 'text',\n          value: label,\n        },\n      ],\n    });\n  }\n\n  svg.properties = newProperties;\n  return svg;\n}\n","import { liteAdaptor } from 'mathjax-full/js/adaptors/liteAdaptor.js';\nimport { STATE } from 'mathjax-full/js/core/MathItem.js';\nimport { SerializedMmlVisitor } from 'mathjax-full/js/core/MmlTree/SerializedMmlVisitor.js';\nimport { RegisterHTMLHandler } from 'mathjax-full/js/handlers/html.js';\nimport { HTMLDocument } from 'mathjax-full/js/handlers/html/HTMLDocument.js';\nimport { MathML } from 'mathjax-full/js/input/mathml.js';\nimport { TeX } from 'mathjax-full/js/input/tex.js';\nimport { AllPackages } from 'mathjax-full/js/input/tex/AllPackages.js';\nimport { mathjax } from 'mathjax-full/js/mathjax.js';\nimport { SVG } from 'mathjax-full/js/output/svg.js';\n// @ts-expect-error\nimport SRE from 'speech-rule-engine';\n\nexport function texToMml(tex: string = '') {\n  const adaptor = liteAdaptor();\n  //  Busproofs requires an output jax, which we aren't using\n  const packages = AllPackages.filter((name) => name !== 'bussproofs');\n  const input = new TeX({ packages });\n  const doc = new HTMLDocument('', adaptor, { InputJax: input });\n  const node = doc.convert(tex, { end: STATE.CONVERT });\n  const visitor = new SerializedMmlVisitor();\n  return visitor.visitTree(node);\n}\n\nexport function mmlToSvg(mml: string) {\n  const adaptor = liteAdaptor();\n  RegisterHTMLHandler(adaptor);\n  const input = new MathML();\n  const output = new SVG({ fontCache: 'local' });\n  const doc = mathjax.document('', { InputJax: input, OutputJax: output });\n  const node = doc.convert(mml, { em: 25 });\n  return adaptor.outerHTML(node);\n}\n\nexport function mmlToSpeech(mml: string) {\n  return SRE.toSpeech(mml);\n}\n","import { liteAdaptor } from 'mathjax-full/js/adaptors/liteAdaptor.js';\nimport { MathDocument } from 'mathjax-full/js/core/MathDocument.js';\nimport * as MathItem from 'mathjax-full/js/core/MathItem.js';\nimport { SerializedMmlVisitor } from 'mathjax-full/js/core/MmlTree/SerializedMmlVisitor.js';\nimport { RegisterHTMLHandler } from 'mathjax-full/js/handlers/html.js';\nimport { TeX } from 'mathjax-full/js/input/tex.js';\nimport { AllPackages } from 'mathjax-full/js/input/tex/AllPackages.js';\nimport { mathjax } from 'mathjax-full/js/mathjax.js';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\nimport { assertNoTexTabular } from '../linter/assert-no-tex-tabular';\nimport { failMessage } from '../utils/message';\n\n// This custom MathJax implementation has had to diverge from the provided demos found\n// here: https://github.com/mathjax/MathJax-demos-node, because they are all focused on\n// either converting LaTeX on its own or (referencing \"page\" demos) LaTeX embedded in\n// HTML, whereas at this stage in the processor we're dealing with LaTeX embedded in\n// Markdown. Due to TeX/LaTeX making heavy use of the backslash (\\) character, we need\n// to deal with it early as it conflicts with other libraries used later.\n\n// I use the MathJax \"page\" process as it will pick up LaTeX even without delimiters\n// and stores context required for numbered references (based on direct/tex2mml-page).\n// However this has a naive HTML handler which will munge HTML (and Python) in some\n// cases so I am careful to only mutate TeX and leave the rest of the Markdown alone.\n\n// I replace the TeX with a placeholder formatted as a Markdown directive, for example\n// :inlineMath[21] or :blockMath[42].\n\n// I convert the TeX to MathML and store it memory for use later (in directive-to-svg.ts).\n\nexport function texToAliasDirective(file: VFile, ctx: Context) {\n  // simple regex tests\n  assertNoTexTabular(file);\n\n  const md = file.value as string;\n  const store: string[] = [];\n  const adaptor = liteAdaptor();\n  const visitor = new SerializedMmlVisitor();\n  RegisterHTMLHandler(adaptor);\n\n  const doc = mathjax.document(md, {\n    InputJax: new TeX({\n      // Bussproofs requires an output jax\n      packages: AllPackages.filter((name) => name !== 'bussproofs'),\n      // Allow numbered references\n      tags: 'ams',\n      // Allow single $ delimiters\n      inlineMath: [\n        ['$', '$'],\n        ['\\\\(', '\\\\)'],\n      ],\n      displayMath: [\n        ['$$', '$$'],\n        [`\\\\[`, `\\\\]`],\n      ],\n    }),\n    // wrap verbatim latex with <div class=\"mathjax-ignore\"></div>\n    ignoreHtmlClass: 'mathjax-ignore',\n    renderActions: {\n      typeset: [\n        MathItem.STATE.TYPESET,\n        ({ math }: MathDocument<any, any, any>) => {\n          for (const item of Array.from(math)) {\n            let newMarkdown = '';\n\n            // convert to MathML\n            const mml = visitor.visitTree(item.root);\n            assertNoMmlError(mml, file);\n\n            // escaped dollar sign...\n            if (item.math === '$') {\n              newMarkdown = '$';\n            }\n\n            // double backslash...\n            else if (item.math === '\\\\') {\n              newMarkdown = '\\\\\\\\';\n            }\n\n            // reference link...\n            else if (isReferenceLink(item.math)) {\n              const refNum = extractRefNumFromMml(mml, item.math, file);\n              const anchor = extractAnchorLinkFromMml(\n                mml,\n                item.math,\n                file\n              );\n              newMarkdown = `[${refNum}](${anchor})`;\n            }\n\n            // normal use case (equation)...\n            else {\n              store.push(mml);\n              const type = item.display ? 'blockMath' : 'inlineMath';\n              newMarkdown = `:${type}[${store.length - 1}]`;\n            }\n\n            const tree = adaptor.parse(newMarkdown, 'text/html');\n            item.typesetRoot = adaptor.firstChild(adaptor.body(tree));\n          }\n        },\n      ],\n    },\n  });\n\n  // add store to ctx\n  ctx.mmlStore = store;\n\n  doc.render();\n\n  // replace md in VFile\n  const result = adaptor.innerHTML(adaptor.body(doc.document));\n  file.value = postParse(result);\n\n  return file;\n}\n\nfunction assertNoMmlError(mml: string, file: VFile) {\n  const match = mml.match(/<merror.*?title=\"(.+?)\"/);\n  if (match !== null) {\n    failMessage(file, `LaTeX error: \"${match[1]}\".`);\n  }\n}\n\nfunction isReferenceLink(tex: string) {\n  return /^\\\\ref\\{(.+)\\}$/.test(tex);\n}\n\nfunction extractRefNumFromMml(mml: string, tex: string, file: VFile) {\n  const match = mml.match(/<mtext>(.+)<\\/mtext>/);\n  if (match === null) {\n    failMessage(file, `Invalid reference: ${tex}`);\n    return;\n  }\n  if (match[1] === '???') {\n    failMessage(\n      file,\n      `Invalid reference: ${tex}. You may only reference numbered sections.`\n    );\n  }\n  return match[1] as string;\n}\n\nfunction extractAnchorLinkFromMml(mml: string, tex: string, file: VFile) {\n  const match = mml.match(/<mrow href=\"(.+)\" class=\"MathJax_ref\">/);\n  if (match === null) {\n    failMessage(file, `Reference has no anchor link: ${tex}`);\n    return;\n  }\n  return decodeURIComponent(match[1] || '') as string;\n}\n\nfunction postParse(html: string) {\n  let result = html;\n  result = unprotectHtml(result);\n  result = removeUnresolvedLabels(result);\n  return result;\n}\n\n// https://github.com/mathjax/MathJax-src/blob/41565a97529c8de57cb170e6a67baf311e61de13/ts/adaptors/lite/Parser.ts#L399-L403\nfunction unprotectHtml(html: string) {\n  return html\n    .replace(/&amp;/g, '&')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>');\n}\n\nfunction removeUnresolvedLabels(html: string) {\n  return html.replace(/\\\\label{def:.*?}/gm, '');\n}\n","import { Image } from 'mdast';\nimport { Node } from 'unist';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nimport { failMessage } from '../utils/message';\nimport { checkLocalFileExists } from '../utils/utils';\n\nexport function assertAssetExists() {\n  async function getAssetUrl(node: Image, file: VFile) {\n    const url = (node.url || '') as string;\n    if (!file.dirname) {\n      throw new Error('VFile dirname undefined');\n    }\n    if (!url.startsWith('http')) {\n      const exists = await checkLocalFileExists(url);\n      if (!exists) {\n        failMessage(file, `No asset found at ${url}`, node.position);\n      }\n    }\n  }\n\n  return async (tree: Node, file: VFile) => {\n    const transformations: Promise<void>[] = [];\n    visit(tree, 'image', (node) => {\n      transformations.push(getAssetUrl(node, file));\n    });\n    await Promise.all(transformations);\n  };\n}\n","import { Root } from 'mdast';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nimport { failMessage } from '../utils/message';\n\nexport function assertNoH1() {\n  return (tree: Root, file: VFile) => {\n    visit(tree, 'heading', (node) => {\n      if (node.depth === 1) {\n        failMessage(\n          file,\n          'Level 1 heading found. Only one Level 1 heading can be used in the document and it is automatically generated from .yaml file and should not be found in .Rmd file.  Please use Level 2 (## Example) and below.',\n          node.position\n        );\n        return;\n      }\n    });\n  };\n}\n","import { VFile } from 'vfile';\n\nimport { failMessage } from '../utils/message';\n\n// TODO: could possibly try converting to array here\n// https://stackoverflow.com/questions/51803244\n\nexport function assertNoTexTabular(file: VFile) {\n  const md = file.value as string;\n  md.split('\\n').forEach((line, idx) => {\n    if (line.includes('\\\\begin{tabular}')) {\n      failMessage(\n        file,\n        'LaTeX tables are not allowed, please use Markdown syntax',\n        {\n          start: {\n            line: idx + 1,\n            column: 0,\n          },\n          end: {\n            line: idx + 1,\n            column: line.length,\n          },\n        }\n      );\n    }\n  });\n}\n","import { Root } from 'mdast';\nimport { ContainerDirective } from 'mdast-util-directive';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nimport { failMessage } from '../utils/message';\n\nexport function assertTaskAnswerStructure() {\n  return (tree: Root, file: VFile) => {\n    let count = 0;\n    visit(tree, 'containerDirective', (node, index, _parent) => {\n      if (node.name === 'task') {\n        count++;\n        const children = node.children as ContainerDirective[];\n        const answers = children.filter((o) => o.name === 'answer');\n        if (answers.length < 1) {\n          failMessage(file, `Task ${count} has no answer`, node.position);\n        }\n        if (answers.length > 1) {\n          failMessage(file, 'Task has multiple answers', node.position);\n        }\n      }\n      if (node.name === 'answer') {\n        const parent = _parent as ContainerDirective;\n        if (!parent || parent.name !== 'task') {\n          failMessage(\n            file,\n            'Answer must be nested inside task',\n            node.position\n          );\n        }\n      }\n    });\n  };\n}\n","import { Literal, Parent } from 'mdast';\nimport { Root } from 'mdast';\nimport { LeafDirective } from 'mdast-util-directive';\nimport { Node } from 'unist';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nimport { failMessage } from '../utils/message';\n\nexport function assertVideoAttributes() {\n  return async (tree: Root, file: VFile) => {\n    visit(tree, 'leafDirective', (node: LeafDirective) => {\n      if (node.name === 'video') {\n        if (!node.attributes?.id) {\n          failMessage(file, 'id attribute is required', node.position);\n        }\n        if (!node.attributes?.duration) {\n          failMessage(\n            file,\n            'duration attribute is required',\n            node.position\n          );\n        }\n\n        const title = getTitle(node);\n        if (!title) {\n          failMessage(file, 'title is required', node.position);\n        }\n      }\n    });\n  };\n}\n\nfunction getTitle(node: Parent) {\n  const children = node.children as Node[];\n  const firstChild = children[0] as Literal;\n  return (firstChild?.value || '') as string;\n}\n","import { Root } from 'mdast';\nimport { ContainerDirective } from 'mdast-util-directive';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nimport { failMessage } from '../utils/message';\n\nexport function assertWeblinkTarget() {\n  return (tree: Root, file: VFile) => {\n    visit(tree, 'containerDirective', (node: ContainerDirective) => {\n      if (node.name === 'weblink') {\n        if (node.attributes?.target === undefined) {\n          failMessage(\n            file,\n            'Weblink has no target attribute',\n            node.position\n          );\n        }\n      }\n    });\n  };\n}\n","// @ts-expect-error\nimport lintAltText from '@double-great/remark-lint-alt-text';\n// @ts-expect-error\nimport lintLinkText from '@mapbox/remark-lint-link-text';\n// @ts-expect-error\nimport dictionary from 'dictionary-en-gb';\nimport remark2retext from 'remark-retext';\nimport english from 'retext-english';\nimport spell from 'retext-spell';\nimport { unified } from 'unified';\nimport { Node } from 'unist';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\nimport { assertAssetExists } from './assert-asset-exists';\nimport { assertNoH1 } from './assert-no-h1';\nimport { assertTaskAnswerStructure } from './assert-task-answer';\nimport { assertVideoAttributes } from './assert-video-attributes';\nimport { assertWeblinkTarget } from './assert-weblink-target';\nimport { lintLatex } from './lint-latex';\nimport { printReport, reportHasFatalErrors } from './report';\n\nexport function reportErrors(files: VFile[], ctx: Context) {\n  if (!ctx.options.noReport) {\n    printReport(files, ctx);\n  }\n  if (reportHasFatalErrors(files, ctx)) {\n    if (ctx.options.noReport) {\n      printReport(files, {\n        ...ctx,\n        options: {\n          ...ctx.options,\n          reportOnlyErrors: true,\n        },\n      });\n    }\n    console.log('Report has fatal errors');\n    if (ctx.options.force) {\n      console.log('Compiling using force option...');\n    } else {\n      process.exit();\n    }\n  }\n}\n\nexport async function createReport(\n  file: VFile,\n  mdast: Node,\n  ctx: Context\n) {\n  const processor = unified()\n    .use(assertAssetExists)\n    .use(assertVideoAttributes)\n    .use(assertTaskAnswerStructure)\n    .use(assertWeblinkTarget)\n    .use(assertNoH1)\n    .use(lintLatex)\n    .use(lintAltText)\n    .use(lintLinkText);\n\n  if (ctx.options.spelling) {\n    const retextProcessor = unified()\n      .use(english)\n      .use(spell, { dictionary, max: 1 });\n    processor.use(remark2retext, retextProcessor);\n  }\n\n  await processor.run(mdast, file);\n}\n","import { exec } from 'child_process';\n\nimport { Literal, Root } from 'mdast';\nimport { Position } from 'unist';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nexport function lintLatex() {\n  return async (tree: Root, file: VFile) => {\n    const transformations: Promise<void>[] = [];\n\n    visit(tree, 'math', (node: Literal) => {\n      transformations.push(chktex(node, file));\n    });\n\n    await Promise.all(transformations);\n    return tree;\n  };\n}\n\nasync function chktex(node: Literal, file: VFile) {\n  return new Promise<void>((resolve, reject) => {\n    exec(`chktex -q <<< \"${node.value}\"`, (err, response) => {\n      if (err) {\n        reject(err);\n      } else {\n        const messages = formatResponse(response);\n        const position = node.position as Position;\n        messages.forEach(({ line, column, message }) => {\n          file.message(message, {\n            line: position.start.line + line,\n            column: position.start.column + column,\n          });\n        });\n        resolve();\n      }\n    });\n  });\n}\n\ntype Message = {\n  line: number;\n  column: number;\n  message: string;\n};\n\nfunction formatResponse(response: string) {\n  if (response.trim() === '') {\n    return [];\n  }\n\n  function formatMessage(message: string) {\n    return message.replace(/'/g, '').replace(/`/g, '');\n  }\n\n  return response\n    .split(/Warning \\d+ in stdin line /)\n    .filter(Boolean)\n    .reduce((acc: Message[], s) => {\n      const [key, value] = s.split(':');\n      const line = Number(key);\n      const trimmed = value.trim();\n\n      const match = trimmed.match(/(.*)\\n(.*)\\n(\\s*)\\^/m);\n      if (Array.isArray(match)) {\n        const message = formatMessage(match[1]);\n        acc.push({\n          line,\n          column: match[3].length,\n          message: `${message}\\n\\n${match[2]}\\n${match[3]}^`,\n        });\n      } else {\n        acc.push({\n          line,\n          column: 0,\n          message: formatMessage(trimmed),\n        });\n      }\n\n      return acc;\n    }, []);\n}\n","import chalk from 'chalk';\nimport figures from 'figures';\nimport { VFile } from 'vfile';\nimport { VFileMessage } from 'vfile-message';\n\nimport { Context } from '../context';\nimport { MessageStatus } from '../utils/message';\n\nexport type Report = {\n  failed: boolean;\n  files: ReportFile[];\n};\n\nexport type ReportFile = Omit<VFile, 'messages'> & {\n  messages: ReportMessage[];\n};\n\nexport type ReportMessage = {\n  status: MessageStatus;\n  position: string;\n  reason: string;\n  line: number;\n  column: number;\n};\n\nexport function printReport(files: VFile[], ctx: Context) {\n  const { reportOnlyErrors, shouldFail } = ctx.options;\n\n  if (reportOnlyErrors && shouldFail) {\n    return;\n  }\n\n  for (const file of files) {\n    // console.log(file.messages);\n    const messages = reportOnlyErrors\n      ? failingMessages(file.messages)\n      : file.messages;\n\n    if (messages.length !== 0) {\n      // if (file.path !== undefined) {\n      //   console.log(`\\n${getFilePath(file.path)}`);\n      // }\n      messages.forEach((message) => {\n        printMessage(message);\n      });\n    }\n  }\n}\n\nexport function reportHasFatalErrors(files: VFile[], ctx: Context) {\n  return files.some((file) => {\n    const messages = file.messages as unknown as ReportMessage[];\n    return messages.some(\n      (message) => message.status === MessageStatus.fail\n    );\n  });\n}\n\nexport function reportHasWarnings(files: VFile[], ctx: Context) {\n  return files.some((file) => {\n    const messages = file.messages as unknown as ReportMessage[];\n    return messages.some(\n      (message) => message.status === MessageStatus.warning\n    );\n  });\n}\n\nfunction failingMessages(_messages: VFileMessage[]) {\n  const messages = _messages as unknown as ReportMessage[];\n  return messages.filter(\n    (o) => o.status === MessageStatus.fail\n  ) as unknown as VFileMessage[];\n}\n\nfunction printMessage(_message: VFileMessage) {\n  const message = _message as unknown as ReportMessage;\n  // console.log(message);\n  const status = message.status;\n  const position = chalk.grey(`${message.line}:${message.column}`);\n  const reason = formatReason(message.reason, status);\n  console.log(`${formatStatus(status)}  ${position}  ${reason}`);\n}\n\n// function getFilePath(filePath: string) {\n//   return path.isAbsolute(filePath)\n//     ? filePath\n//     : path.join(process.cwd(), filePath);\n// }\n\nfunction formatStatus(status: MessageStatus) {\n  const statusColour = getStatusColour(status);\n  switch (status) {\n    case MessageStatus.fail:\n      return statusColour(figures.cross);\n    default:\n      return statusColour(figures.warning);\n    // TODO: fail on unsupported status?\n  }\n}\n\nfunction formatReason(reason: string, status: MessageStatus) {\n  const statusColour = getStatusColour(status);\n  const [first, ...rest] = reason.split('\\n');\n  const formattedFirst = statusColour(first);\n  const formattedRest = rest.map((line) => chalk.grey(line));\n  return [formattedFirst, ...formattedRest].join('\\n');\n}\n\nfunction getStatusColour(status: MessageStatus) {\n  switch (status) {\n    case MessageStatus.fail:\n      return chalk.red;\n    default:\n      return chalk.yellow;\n  }\n}\n","import { Element, Parent as HastParent, Text } from 'hast';\nimport startCase from 'lodash/startCase.js';\nimport { Root } from 'mdast';\nimport { ContainerDirective } from 'mdast-util-directive';\nimport { toHast } from 'mdast-util-to-hast';\nimport { Node, Parent } from 'unist';\nimport { visit } from 'unist-util-visit';\n\nimport { Context } from '../context';\nimport { createCounter } from '../utils/counter';\n\nexport function boxouts(refStore: Context['refStore']) {\n  const counter = createCounter();\n  return async (tree: Node) => {\n    visit(tree, 'containerDirective', (node: ContainerDirective) => {\n      switch (node.name) {\n        case 'example':\n        case 'error':\n        case 'supplement':\n        case 'background':\n        case 'definition':\n        case 'weblink':\n        case 'theorem':\n        case 'task':\n        case 'proposition':\n        case 'answer': {\n          const name = node.name as string;\n          const count = counter.increment(name);\n          node.data = {\n            hProperties: createAttributes(node, count, refStore),\n            hChildren: createBoxout(node, count),\n          };\n        }\n      }\n    });\n  };\n}\n\nfunction createAttributes(\n  node: ContainerDirective,\n  count: number,\n  refStore: Context['refStore']\n) {\n  const name = node.name as string;\n  const id = `${name}-${count}`;\n\n  const attributes = node.attributes as Record<string, string>;\n  const className = ['boxout', name];\n  if (attributes.icon) {\n    className.push(`${attributes.icon}-icon`);\n  }\n\n  if (node.attributes?.label !== undefined) {\n    refStore[node.attributes.label] = id;\n  }\n\n  return { className, id };\n}\n\nexport function createBoxout(\n  node: ContainerDirective,\n  count: number\n): Node[] {\n  const typeTitle = createBoxoutType(node, count);\n  const titles = [typeTitle];\n\n  const titleValue = getTitleValue(node);\n  if (titleValue.length > 0) {\n    const title = createTitle(node);\n    titles.push(title);\n  }\n\n  const children = node.children as ContainerDirective[];\n\n  const content = children\n    .filter((o) => !o.data?.directiveLabel)\n    .filter((o) => o.type !== 'containerDirective' && o.name !== 'answer')\n    .map((o) => toHast(o, { allowDangerousHtml: true }))\n    .filter(Boolean) as HastParent[];\n\n  if (node.name === 'task') {\n    const answer = children.find(\n      (o) => o.type === 'containerDirective' && o.name === 'answer'\n    );\n    if (answer) {\n      const answerHast = createAnswer(answer, count);\n      content.push(answerHast as HastParent);\n    }\n  }\n\n  return [...titles, ...content];\n}\n\nfunction createAnswer(node: ContainerDirective, count: number) {\n  const { children } = toHast(node) as HastParent;\n  return {\n    type: 'element',\n    tagName: 'div',\n    properties: {\n      className: ['answer'],\n    },\n    children: [\n      {\n        type: 'element',\n        tagName: 'span',\n        properties: {\n          className: ['answer-trigger'],\n          'data-answer-id': count,\n        },\n        children: [\n          {\n            type: 'text',\n            value: 'Show answer',\n          },\n        ],\n      },\n      {\n        type: 'element',\n        tagName: 'div',\n        properties: {\n          className: ['answer-reveal'],\n          id: `answer-${count}`,\n        },\n        children,\n      },\n    ],\n  };\n}\n\nfunction createBoxoutType(\n  node: ContainerDirective,\n  count: number\n): Element {\n  const name = node.name as string;\n  const label = startCase(name);\n  let value = `${label} ${count}`;\n\n  if (node.attributes?.optional !== undefined) {\n    value += ` (Optional)`;\n  }\n\n  return {\n    type: 'element',\n    tagName: 'span',\n    properties: {\n      className: ['type'],\n    },\n    children: [\n      {\n        type: 'text',\n        value,\n      },\n    ],\n  };\n}\n\nfunction createTitle(node: ContainerDirective): Element {\n  return {\n    type: 'element',\n    tagName: 'h3',\n    children: createTitleValue(node) as Element['children'],\n  };\n}\n\nfunction createTitleValue(node: ContainerDirective) {\n  const name = node.name as string;\n  const newRoot = {\n    type: 'root',\n    children: getTitleValue(node),\n  };\n  const { children = [] } = toHast(newRoot as Root) as Parent;\n  if (name !== 'weblink') {\n    return children;\n  }\n  const { target } = node.attributes as Record<string, string>;\n  return [\n    {\n      type: 'element',\n      tagName: 'a',\n      properties: {\n        href: target,\n        target: '_blank',\n        className: ['target'],\n      },\n      children,\n    },\n  ];\n}\n\nfunction getTitleValue(node: ContainerDirective): Node[] {\n  const children = (node.children || []) as Node[];\n  const parent = (children[0] || {}) as Parent;\n\n  if (!parent.data?.directiveLabel) {\n    if (node.name === 'weblink') {\n      const attributes = node.attributes as Record<string, string>;\n      return [\n        {\n          type: 'text',\n          value: attributes.target,\n        } as Text,\n      ];\n    }\n    return [];\n  }\n\n  return parent.children || [];\n}\n","import { Properties, Text } from 'hast';\nimport { Code } from 'mdast';\nimport { refractor } from 'refractor';\nimport { RefractorElement } from 'refractor/lib/core';\nimport { Node } from 'unist';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\n\nexport function codeBlocks(ctx: Context) {\n  return async (tree: Node, file: VFile) => {\n    // replace \\\\n with \\n in code samples\n    // visit<InlineCode>(tree, 'inlineCode', (node) => {\n    //   const old = node.value;\n    //   const transformed = old.replace(/\\\\\\\\n/g, '\\\\n');\n    //   // console.log({ old, transformed, same: old === transformed });\n    //   node.value = transformed;\n    // });\n\n    visit(tree, 'code', (node: Code) => {\n      customCode(node, ctx, file);\n    });\n  };\n}\n\nfunction customCode(node: Code, ctx: Context, file: VFile) {\n  // const { language, options, value } = parseCodeParams(node);\n  const language = parseLanguage(node);\n  const klass = parseClass(node);\n  const meta = (node.meta || '') as string;\n\n  const codeProps: Properties = {};\n  if (meta !== '') {\n    codeProps.className = meta;\n  }\n\n  const children: (RefractorElement | Text)[] = [];\n  const trimmed = node.value.trim();\n  if (ctx.options.noSyntaxHighlight || language === '') {\n    children.push({\n      type: 'text',\n      value: trimmed,\n    });\n  } else {\n    const highlighted = refractor.highlight(trimmed, language);\n    children.push(...highlighted.children);\n  }\n\n  Object.assign(node, {\n    type: 'custom-code',\n    data: {\n      hName: 'div',\n      hProperties: {\n        className: ['code-wrapper', klass],\n      },\n      hChildren: [\n        addConsoleHeading(klass),\n        {\n          type: 'element',\n          tagName: 'pre',\n          children: [\n            {\n              type: 'element',\n              tagName: 'code',\n              properties: codeProps,\n              children,\n            },\n          ],\n        },\n      ],\n    },\n  });\n}\n\nfunction addConsoleHeading(klass: string) {\n  if (klass === 'r-output' || klass === 'r-error-output') {\n    return {\n      type: 'element',\n      tagName: 'h6',\n      properties: {\n        className: 'console-heading',\n      },\n      children: [\n        {\n          type: 'text',\n          value: 'R Console',\n        },\n      ],\n    };\n  }\n  if (klass === 'python-output' || klass === 'python-error-output') {\n    return {\n      type: 'element',\n      tagName: 'h6',\n      properties: {\n        className: 'console-heading',\n      },\n      children: [\n        {\n          type: 'text',\n          value: 'Python Console',\n        },\n      ],\n    };\n  }\n  return null;\n}\n\nfunction parseLanguage(node: Code) {\n  const lang = (node.lang || '') as string;\n  if (lang === 'plaintext' || lang.startsWith('{')) {\n    return '';\n  }\n  return lang.toLowerCase();\n}\n\nfunction parseClass(node: Code) {\n  const lang = (node.lang || '') as string;\n  if (!lang.startsWith('{.')) {\n    return '';\n  }\n  return lang.slice(2, -1);\n}\n","import { Root } from 'mdast';\nimport { unified } from 'unified';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\nimport { boxouts } from './boxouts';\nimport { moveAnswersToEnd } from './move-answers-to-end';\n\nexport async function combinedMdastPhase(\n  mdast: Root,\n  ctx: Context,\n  file: VFile,\n  targetPdf?: boolean\n) {\n  const processor = unified().use(boxouts, ctx.refStore);\n\n  if (targetPdf) {\n    processor.use(moveAnswersToEnd);\n  }\n\n  return processor.run(mdast, file) as Promise<Root>;\n}\n","import path from 'path';\n\nimport { Literal, Root } from 'mdast';\nimport { visit } from 'unist-util-visit';\n\nexport function embedAssetUrl() {\n  return async (tree: Root) => {\n    let activeDir = '';\n\n    // nodes need to be visited in the correct order\n    // to derive the document directory\n    visit(tree, (node, index, parent) => {\n      // to ensure relative paths to assets across multiple .Rmd files\n      if (node.type === 'textDirective' && node.name === 'directory') {\n        const firstChild = node.children[0] as Literal;\n        activeDir = firstChild.value || '';\n        const parentChildren = parent?.children || [];\n        parentChildren.splice(index || 0, 1);\n      }\n\n      if (node.type === 'image') {\n        node.url = getPath(node.url, activeDir);\n      }\n\n      // also fix for raw html nodes sometimes output by knitr\n      if (node.type === 'html') {\n        const props = getProps(node.value);\n        if (props !== null && props.src) {\n          const { src, ...otherProps } = props;\n          Object.assign(node, {\n            type: 'image',\n            url: getPath(src, activeDir),\n            value: '',\n            data: otherProps,\n          });\n        }\n      }\n    });\n  };\n}\n\nfunction getPath(url: string, dirname: string) {\n  return path.isAbsolute(url) || url.startsWith('http')\n    ? url\n    : path.join(dirname, url);\n}\n\nfunction getProps(value: string) {\n  const matchImg = value.match(/^<img.*?src=\"(.+?)\".*?>$/);\n  if (matchImg !== null) {\n    return propsToObject(value.slice(5, -1));\n  }\n  const matchPdf = value.match(/^<embed.*?src=\"(.+?)\".*?>$/);\n  if (matchPdf !== null) {\n    return propsToObject(value.slice(7, -1));\n  }\n  return null;\n}\n\nfunction propsToObject(str: string) {\n  return str\n    .split(/(\\w+)=\"(.*?)\"/)\n    .filter((s) => s.trim() !== '')\n    .reduce((acc: Record<string, string>, value, idx, arr) => {\n      if (idx % 2 === 1) {\n        const key = arr[idx - 1];\n        acc[key] = value;\n      }\n      return acc;\n    }, {});\n}\n","import { Element } from 'hast';\nimport { Image, Text } from 'mdast';\nimport { Node } from 'unist';\nimport { visit } from 'unist-util-visit';\n\nimport { Context } from '../context';\n\nexport function images(ctx: Context) {\n  return (tree: Node) => {\n    visit(tree, 'image', (node) => {\n      template(node, ++ctx.figureCounter);\n    });\n  };\n}\n\nfunction template(node: Image, count: number) {\n  const image: Element = {\n    type: 'element',\n    tagName: 'img',\n    properties: {\n      src: node.url,\n      alt: node.alt,\n    },\n    children: [],\n  };\n\n  if (node.data?.width) {\n    image.properties = {\n      ...image.properties,\n      style: `width: ${node.data.width};`,\n    };\n  }\n\n  const caption = createCaption(node, count);\n\n  Object.assign(node, {\n    type: 'custom-image',\n    data: {\n      hName: 'figure',\n      hProperties: {\n        className: ['img-wrapper'],\n      },\n      hChildren: [image, caption],\n    },\n  });\n}\n\nfunction createCaption(node: Image, count: number) {\n  const result: Element = {\n    type: 'element',\n    tagName: 'figcaption',\n    children: [\n      {\n        type: 'element',\n        tagName: 'span',\n        properties: {\n          className: 'caption-count',\n        },\n        children: [\n          {\n            type: 'text',\n            value: `Figure ${count}`,\n          },\n        ],\n      },\n    ],\n  };\n\n  const altText = node.alt || '';\n\n  if (altText !== '' && !altText.includes('unnamed-chunk')) {\n    const currentCaption = result.children[0] as Element;\n    const currentValue = currentCaption.children[0] as Text;\n    currentValue.value += ': ';\n\n    result.children.push({\n      type: 'text',\n      value: `${node.alt}`,\n    });\n  }\n\n  return result;\n}\n","import headings from 'remark-autolink-headings';\nimport directive from 'remark-directive';\nimport footnotes from 'remark-footnotes';\nimport frontmatter from 'remark-frontmatter';\nimport gfm from 'remark-gfm';\nimport markdown from 'remark-parse';\nimport slug from 'remark-slug';\nimport { unified } from 'unified';\nimport { VFile } from 'vfile';\n\nimport { Context } from '../context';\nimport { aliasDirectiveToSvg } from '../latex/directive-to-svg';\n// import { aliasDirectiveToTex } from '../latex/directive-to-tex';\nimport { createSvg } from '../utils/icons';\nimport { codeBlocks } from './code-blocks';\nimport { embedAssetUrl } from './embed-asset-url';\nimport { images } from './images';\nimport { pagebreaks } from './pagebreaks';\nimport { removeEmptyParagraphs } from './remove-empty-paragraphs';\nimport { youtubeVideos } from './youtube-videos';\n\nexport async function mdastPhase(file: VFile, ctx: Context) {\n  // https://github.com/unifiedjs/unified\n  // convert markdown to syntax tree: complex transforms\n  // should be more robust and straightforward\n  const processor = unified()\n    // third-party plugins:\n    .use(markdown)\n    .use(directive)\n    .use(frontmatter)\n    .use(footnotes, { inlineNotes: true })\n    .use(gfm)\n    // .use(sectionize)\n    .use(slug)\n    .use(headings, {\n      content: createSvg('link-icon'),\n      linkProperties: { className: 'link' },\n    })\n    // custom plugins:\n    .use(embedAssetUrl)\n    .use(youtubeVideos)\n    .use(aliasDirectiveToSvg, ctx)\n    .use(removeEmptyParagraphs)\n    // .use(aliasDirectiveToTex, ctx)\n    .use(codeBlocks, ctx)\n    .use(images, ctx)\n    .use(pagebreaks);\n\n  const parsed = processor.parse(file);\n  return processor.run(parsed, file);\n}\n","import { Node, Parent } from 'hast';\nimport { ContainerDirective } from 'mdast-util-directive';\nimport { visit } from 'unist-util-visit';\n\nexport function moveAnswersToEnd() {\n  return (tree: Node) => {\n    visit(\n      tree,\n      'containerDirective',\n      (node: ContainerDirective, _index, _parent) => {\n        const index = _index as number;\n        const parent = _parent as Parent;\n\n        // remove answer from task rehype\n        if (node.name === 'task' && node.data) {\n          const children = (node.data.hChildren ||\n            []) as ContainerDirective[];\n          node.data.hChildren = children.filter(\n            (o) => o.name !== 'answer'\n          );\n        }\n\n        if (node.name === 'answer') {\n          // these nodes have already been moved to the end\n          if (node.attributes?.movedToEnd === 'yes') {\n            return;\n          }\n\n          // remove answer block from task node\n          const parentChildren = parent?.children || [];\n          parentChildren.splice(index || 0, 1);\n\n          // add to root node\n          const treeParent = tree as Parent;\n          const treeChildren = (treeParent.children || []) as Node[];\n\n          node.attributes = {\n            ...(node.attributes || {}),\n            movedToEnd: 'yes',\n          };\n\n          treeChildren.push(node);\n        }\n      }\n    );\n  };\n}\n","import { LeafDirective } from 'mdast-util-directive';\nimport { Node } from 'unist';\nimport { visit } from 'unist-util-visit';\n\nexport function pagebreaks() {\n  return async (tree: Node) => {\n    visit(tree, 'leafDirective', (node: LeafDirective) => {\n      if (node.name === 'pagebreak') {\n        node.data = {\n          hName: 'hr',\n          hProperties: {\n            className: 'pagebreak',\n          },\n        };\n      }\n    });\n  };\n}\n","import { Paragraph, Parent } from 'mdast';\nimport { Node } from 'unist';\nimport { visit } from 'unist-util-visit';\n\nexport function removeEmptyParagraphs() {\n  return async (tree: Node) => {\n    visit(tree, 'paragraph', (node: Paragraph, _index, _parent) => {\n      const index = _index as number;\n      const parent = _parent as Parent;\n\n      if (node.children.length === 0) {\n        const parentChildren = parent?.children || [];\n        parentChildren.splice(index || 0, 1);\n      }\n    });\n  };\n}\n","import { Literal } from 'mdast';\nimport { LeafDirective } from 'mdast-util-directive';\nimport { Node } from 'unist';\nimport { visit } from 'unist-util-visit';\nimport { VFile } from 'vfile';\n\nimport { failMessage } from '../utils/message';\n\nexport function youtubeVideos() {\n  return async (tree: Node, file: VFile) => {\n    visit(tree, 'leafDirective', (node: LeafDirective) => {\n      if (node.name === 'video') {\n        const attributes = node.attributes;\n        const title = getTitle(node, file);\n        node.data = {\n          hName: 'a',\n          hProperties: {\n            className: ['boxout', 'video'],\n            href: getYoutubeUrl(attributes?.id || ''),\n            title: attributes?.title || null,\n            target: '_blank',\n          },\n          hChildren: [\n            {\n              type: 'element',\n              tagName: 'span',\n              properties: {\n                className: 'content',\n              },\n              children: [\n                {\n                  type: 'element',\n                  tagName: 'span',\n                  properties: {\n                    className: 'type',\n                  },\n                  children: [\n                    {\n                      type: 'text',\n                      value: 'Video',\n                    },\n                  ],\n                },\n                {\n                  type: 'element',\n                  tagName: 'span',\n                  properties: {\n                    className: 'title',\n                  },\n                  children: [\n                    {\n                      type: 'text',\n                      value: title,\n                    },\n                  ],\n                },\n                {\n                  type: 'element',\n                  tagName: 'span',\n                  properties: {\n                    className: 'duration',\n                  },\n                  children: [\n                    {\n                      type: 'element',\n                      tagName: 'strong',\n                      children: [\n                        {\n                          type: 'text',\n                          value: 'Duration',\n                        },\n                      ],\n                    },\n                    {\n                      type: 'text',\n                      value: formatDuration(attributes?.duration || ''),\n                    },\n                  ],\n                },\n              ],\n            },\n            {\n              type: 'element',\n              tagName: 'span',\n              properties: {\n                className: 'thumbnail',\n              },\n              children: [\n                {\n                  type: 'element',\n                  tagName: 'img',\n                  properties: {\n                    src: getYoutubeThumbnailUrl(attributes?.id || ''),\n                    alt: '',\n                  },\n                  children: [],\n                },\n              ],\n            },\n          ],\n        };\n      }\n    });\n  };\n}\n\nfunction getTitle(node: LeafDirective, file: VFile) {\n  const children = node.children as Node[];\n  const firstChild = children[0] as Literal;\n  const title = firstChild?.value || '';\n  if (title.trim() === '') {\n    failMessage(file, 'Video has no title', node.position);\n  }\n  return title;\n}\n\nfunction getYoutubeUrl(id: string) {\n  return `https://youtu.be/${id}`;\n}\n\nfunction getYoutubeThumbnailUrl(id: string) {\n  return `http://img.youtube.com/vi/${id}/mqdefault.jpg`;\n}\n\nfunction formatDuration(duration: string = '') {\n  const match = duration.match(/^(\\d+)m(\\d+)s$/);\n  if (match === null) {\n    return '';\n  }\n  return `${match[1]}:${match[2].padStart(2, '0')}`;\n}\n","import puppeteer from 'puppeteer';\n\n// const footerTemplate = `\n//   <div style=\"font-size: 14px; padding-top: 20px; text-align: center; width: 100%;\">\n//     Page <span class=\"pageNumber\"></span> of <span class=\"totalPages\"></span>\n//   </div>\n// `;\n\nexport async function convertToPdf(html: string) {\n  const browser = await puppeteer.launch({\n    headless: true,\n    args: [\n      // attempted fix for windows https://stackoverflow.com/questions/59979188#66549119\n      '--disable-gpu',\n      '--disable-dev-shm-usage',\n      '--disable-setuid-sandbox',\n      '--no-first-run',\n      '--no-sandbox',\n      '--no-zygote',\n    ],\n  });\n  const page = await browser.newPage();\n  page.setDefaultNavigationTimeout(0);\n  await page.setContent(html);\n  await page.evaluateHandle('document.fonts.ready');\n  const pdf = await page.pdf({\n    format: 'a4',\n    printBackground: true,\n    // displayHeaderFooter: true,\n    // footerTemplate,\n    margin: {\n      top: '20px',\n      left: '40px',\n      right: '40px',\n      bottom: '40px',\n    },\n  });\n  await browser.close();\n  return pdf;\n}\n","import { Blob } from 'buffer';\n\nimport { Properties, Root } from 'hast';\nimport rehype from 'rehype-parse';\nimport stringify from 'rehype-stringify';\nimport SandboxedModule from 'sandboxed-module';\nimport { optimize } from 'svgo';\nimport { unified } from 'unified';\nimport { Parent } from 'unist';\nimport { visit } from 'unist-util-visit';\n\n// @ts-expect-error\nimport { Element, Image, document } from './domstubs';\n\n// inject globals into pdf.js in a non-leaky way\nconst pdfjsLib = SandboxedModule.require('pdfjs-dist/legacy/build/pdf', {\n  globals: { document, Image, Element, Blob, console, process, URL },\n});\n\nexport async function pdfToSvg(filePath: string) {\n  const doc = await pdfjsLib.getDocument({\n    url: filePath,\n    fontExtraProperties: true,\n    verbosity: 0,\n    // cMapUrl: '../node_modules/pdfjs-dist/cmaps/',\n    // cMapPacked: true,\n  }).promise;\n\n  // may come in handy again...\n  // const metadata = await doc.getMetadata();\n  // if (!isPdfTexDocument(metadata.info)) {\n  //   throw new Error('Unhandled pdf file: was not produced by PdfTeX');\n  // }\n\n  const page = await doc.getPage(1);\n  const opList = await page.getOperatorList();\n  const viewport = page.getViewport({ scale: 1.0 });\n  const svgGfx = new pdfjsLib.SVGGraphics(page.commonObjs, page.objs);\n  svgGfx.embedFonts = true;\n  const svg = await svgGfx.getSVG(opList, viewport);\n  const result = await formatSvg(svg.toString());\n  return result;\n}\n\n// function isPdfTexDocument(info: Record<string, string> = {}) {\n//   return info['Producer']?.startsWith('pdfTeX');\n// }\n\nasync function formatSvg(_str: string) {\n  const str = _str.replace(/svg:/g, '');\n  const optimised = optimize(str, { multipass: true });\n  if (optimised.modernError) {\n    throw optimised.modernError;\n  }\n  const processor = unified()\n    .use(rehype, { fragment: true })\n    .use(addWrapper)\n    .use(stringify);\n  const parsed = processor.parse(optimised.data);\n  const transformed = (await processor.run(parsed)) as Parent;\n  return transformed.children[0];\n}\n\nfunction addWrapper() {\n  return (tree: Root) => {\n    visit(tree, 'element', (node) => {\n      if (node.tagName === 'svg') {\n        const properties = node.properties || {};\n        node.properties = {\n          // width: properties.width,\n          // height: properties.height,\n          viewBox: getViewBox(properties),\n          className: 'pdftex',\n        };\n      }\n    });\n  };\n}\n\nfunction getViewBox(properties: Properties) {\n  if (properties.viewBox) {\n    return properties.viewBox;\n  }\n  return `0 0 ${properties.width} ${properties.height}`;\n}\n","export function allowNoWhitespaceBeforeHeading(contents: string) {\n  return contents\n    .split('\\n')\n    .map((line) => {\n      const match = line.match(/^(#+)(\\w)(.*?)$/);\n      if (match !== null) {\n        return `${match[1]} ${match[2]}${match[3]}`;\n      }\n      return line;\n    })\n    .join('\\n');\n}\n","const blockList = ['\\\\newpage', '\\\\pagebreak'];\n\nexport function convertNewPageToDirective(contents: string) {\n  return contents\n    .split('\\n')\n    .map((a) => (blockList.some((b) => a.includes(b)) ? '::pagebreak' : a))\n    .join('\\n');\n}\n\nexport function convertEmptyMBoxToDirective(contents: string) {\n  return contents\n    .split('\\n')\n    .map((line) => {\n      if (\n        line.includes('\\\\mbox') &&\n        line.replace('{', '').replace('}', '').trim() === '\\\\mbox'\n      ) {\n        return '::pagebreak';\n      }\n      return line;\n    })\n    .join('\\n');\n}\n","export function convertTextBfToMd(contents: string) {\n  const pattern = /\\\\textbf\\{(.*?)\\}/g;\n  return contents.replace(pattern, (_, str) => `**${str}**`);\n}\n\nexport function convertUrlToMd(contents: string) {\n  const pattern = /\\\\url\\{(.*?)\\}/g;\n  return contents.replace(pattern, (_, str) => str);\n}\n","export function convertMacroToDirective(contents: string) {\n  return contents\n    .split('\\n')\n    .map((line) => {\n      const container = parseCustomContainer(line);\n      if (container !== null) {\n        return renderContainerDirective(container);\n      }\n      return line;\n    })\n    .join('\\n');\n}\n\ntype Container = {\n  name: string;\n  title: string;\n  attributes: string;\n};\n\nfunction parseCustomContainer(line: string): Container | null {\n  const match = line.match(/^#{1,6}\\s*\\[(\\D.+)](.*)/);\n  if (!Array.isArray(match)) {\n    return null;\n  }\n  const [, attributeStr = '', extra = ''] = match;\n  const [name, ...attributesArr] = attributeStr\n    .split(',')\n    .map((s) => s.trim());\n  const title = extra.trim();\n  const attributes = transformAttributes(name, attributesArr);\n  return { name, title, attributes };\n}\n\nfunction renderContainerDirective({ name, title, attributes }: Container) {\n  const colons = getColons(name);\n  if (name.startsWith('/')) {\n    return colons;\n  }\n  const newTitle = title ? `[${title}]` : '';\n  const newAttributes = attributes ? `{${attributes}}` : '';\n  return colons + name + newTitle + newAttributes;\n}\n\nfunction getColons(name: string) {\n  switch (name.replace('/', '')) {\n    case 'task':\n      return '::::';\n    case 'video':\n      return '::';\n    default:\n      return ':::';\n  }\n}\n\nfunction transformAttributes(\n  containerName: string,\n  attributesArr: string[]\n) {\n  return attributesArr\n    .map((attribute) => {\n      const [key, value] = attribute.split('=').map((s) => s.trim());\n      if (containerName === 'video' && key === 'videoid') {\n        return `id=${value}`;\n      }\n      return attribute;\n    })\n    .join(' ');\n}\n","import { VFile } from 'vfile';\n\nimport { allowNoWhitespaceBeforeHeading } from './allow-no-whitespace-before-heading';\nimport {\n  convertEmptyMBoxToDirective,\n  convertNewPageToDirective,\n} from './convert-block-tex';\nimport { convertTextBfToMd, convertUrlToMd } from './convert-inline-tex';\nimport { convertMacroToDirective } from './convert-macro-to-directive';\nimport { reformatPandocSimpleTables } from './reformat-pandoc-simple-tables';\n\n// Some of the original coursework syntax can't easily be parsed by\n// existing plugins for unified.js, so in a \"pre-parse\" phase\n// I transform some syntax using regex so it can be parsed.\n// A successful generic approach I found is to convert problem syntax to a\n// custom markdown directive: https://github.com/remarkjs/remark-directive\n\nexport function preParsePhase(file: VFile) {\n  let result = file.value as string;\n  result = removeCommentedSections(result);\n  result = escapeDollarsInCodeBlocks(result);\n  result = allowNoWhitespaceBeforeHeading(result);\n  result = convertMacroToDirective(result);\n  result = convertTextBfToMd(result);\n  result = convertUrlToMd(result);\n  result = convertNewPageToDirective(result);\n  result = convertEmptyMBoxToDirective(result);\n  result = reformatPandocSimpleTables(result);\n  file.value = result;\n  return file;\n}\n\nfunction removeCommentedSections(md: string) {\n  return md.replace(/<!--[^-][\\s\\S]*?-->/g, '').replace(/<!---/g, '<!--');\n}\n\nfunction escapeDollarsInCodeBlocks(md: string) {\n  return md.replace(/(```.+?```)/gms, (match) => {\n    return '\\n' + match.replace(/\\$/g, '\\\\$') + '\\n';\n  });\n}\n","import { EOL } from 'os';\n\nimport { markdownTable } from 'markdown-table';\n\nexport function reformatPandocSimpleTables(contents: string) {\n  const lines = contents.split(EOL);\n\n  // operate on array backwards as length may change with transformation,\n  // preserving index in loop\n  for (var idx = lines.length - 1; idx >= 0; idx--) {\n    if (isValidPandocSimpleTableSeparator(lines, idx)) {\n      const { startIdx, count } = getTableBounds(lines, idx);\n      const currentLines = lines.slice(startIdx, startIdx + count + 1);\n      const newLines = convertLines(currentLines);\n      lines.splice(startIdx, count + 1, ...newLines, '');\n    }\n  }\n\n  return lines.join(EOL);\n}\n\nfunction isValidPandocSimpleTableSeparator(\n  lines: string[],\n  idx: number,\n  isEnd?: boolean\n) {\n  const line = lines[idx] || '';\n\n  if (idx === 0 || !/-{2,}/g.test(line) || !/^[\\s|-]+$/.test(line)) {\n    return false;\n  }\n  if (getColumnIndexes(line).length <= 1) {\n    return false;\n  }\n  if (!isEnd) {\n    const nextLine = lines[idx + 1] || '';\n    if (nextLine.trim() === '') {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getTableBounds(arr: string[], idx: number) {\n  const startIdx = idx - 1;\n  const endIdx = arr.slice(startIdx).findIndex((l) => l.trim() === '');\n  const count = endIdx === -1 ? arr.length - 1 : endIdx;\n  return { startIdx, count };\n}\n\nfunction convertLines(lines: string[]) {\n  const table = parseTable(lines);\n  const align = getColumnAlignment(table[0]);\n  const result = markdownTable(table, { align });\n  return result.split(EOL);\n}\n\nfunction parseTable(lines: string[]) {\n  const [titles, separator, ...body] = lines;\n  const columnIndexes = getColumnIndexes(separator);\n  const titleCells = parseTitleRow(titles, columnIndexes);\n  const rows = body.map((line) => parseBodyRow(line, columnIndexes));\n  const endSeparatorIdx = getEndSeparatorIdx(body);\n\n  if (endSeparatorIdx !== -1) {\n    return [titleCells, ...rows.slice(0, endSeparatorIdx)];\n  }\n  const multilineRows = rows.reduce(multilineReducer, []);\n  return [titleCells, ...multilineRows];\n}\n\nfunction getColumnIndexes(line: string) {\n  return line.split('').reduce((acc: number[][], str, idx) => {\n    if (str === '-' && (idx === 0 || line[idx - 1] === ' ')) {\n      acc.push([idx]);\n    } else if (\n      idx !== line.length - 1 &&\n      str === ' ' &&\n      line[idx - 1] === '-'\n    ) {\n      acc[acc.length - 1].push(idx);\n    }\n    return acc;\n  }, []);\n}\n\nfunction getColumnAlignment(titleCells: string[]): string[] {\n  return titleCells.map((title) => {\n    if (title[0] === ' ') {\n      if (title[title.length - 1] === ' ') {\n        return 'center';\n      }\n      return 'right';\n    }\n    return 'left';\n  });\n}\n\nfunction parseTitleRow(line: string, columnIndexes: number[][]) {\n  return columnIndexes.map((tuple) => line.slice(...tuple));\n}\n\nfunction parseBodyRow(line: string, columnIndexes: number[][]) {\n  return columnIndexes.map((tuple) => {\n    const end = tuple[1] === undefined ? tuple[1] : tuple[1] + 1;\n    return line.slice(tuple[0], end).trim();\n  });\n}\n\nfunction getEndSeparatorIdx(lines: string[]) {\n  for (let idx = lines.length - 1; idx > 0; idx--) {\n    const line = lines[idx];\n    if (line.trim() !== '') {\n      if (isValidPandocSimpleTableSeparator(lines, idx, true)) {\n        return idx;\n      } else {\n        return -1;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction multilineReducer(acc: string[][], row: string[]) {\n  if (row.some((cell) => cell.trim() === '')) {\n    const prevIdx = acc.length - 1;\n    acc[prevIdx].forEach((cell, i) => {\n      const trimmed = row[i].trim();\n      if (trimmed !== '') {\n        acc[prevIdx][i] = cell + ' ' + trimmed;\n      }\n    });\n  } else {\n    acc.push(row.slice());\n  }\n  return acc;\n}\n","import path from 'path';\n\nimport hashSum from 'hash-sum';\n\nimport { Context } from '../context';\nimport { checkLocalFileExists, mkdir, readFile, writeFile } from './utils';\n\ntype Options = {\n  ctx: Context;\n  prefix: string;\n  key: string;\n  execFn: (code: string) => Promise<string>;\n  json?: boolean;\n};\n\nexport async function cacheToFile(options: Options): Promise<string> {\n  const { ctx, prefix, key, execFn, json } = options;\n\n  if (ctx.options.noCache === true) {\n    return execFn(key);\n  }\n\n  const filePath = `${prefix}-${hashSum(key)}.txt`;\n  const cachedFilePath = path.join(ctx.cacheDir, filePath);\n  const exists = await checkLocalFileExists(cachedFilePath);\n\n  if (exists) {\n    const str = await readFile(cachedFilePath);\n\n    // ignore cache if json is corrupt\n    if (json) {\n      try {\n        return JSON.parse(str);\n      } catch (err) {\n        return execAndCache(options, cachedFilePath);\n      }\n    }\n\n    return str;\n  }\n\n  return execAndCache(options, cachedFilePath);\n}\n\nexport async function cacheJsonToFile(options: Options) {\n  return cacheToFile({ ...options, json: true });\n}\n\nasync function execAndCache(\n  { ctx, key, execFn, json }: Options,\n  cachedFilePath: string\n) {\n  const out = (await execFn(key)) as string;\n  const str = json ? JSON.stringify(out, null, 2) : out;\n  await mkdir(ctx.cacheDir);\n  await writeFile(cachedFilePath, str);\n  return out;\n}\n","import chalk from 'chalk';\nimport fetch from 'node-fetch';\n\nconst repo = 'UofGAnalytics/build-coursework';\n\ntype ReleaseInfo = {\n  tag_name: string;\n};\n\nexport async function checkForLatestVersion() {\n  if (process.env.NODE_ENV === 'test') {\n    return;\n  }\n  const response = await fetch(\n    `https://api.github.com/repos/${repo}/releases/latest`\n  );\n  const json = (await response.json()) as ReleaseInfo;\n  const latestTag = json.tag_name.replace('v', '');\n  const currentVersion = process.env.VERSION;\n\n  if (latestTag !== currentVersion) {\n    console.log(chalk.yellow.bold('New version available'));\n    console.log(chalk.yellow(`Current version: ${currentVersion}`));\n    console.log(chalk.yellow(`Latest version: ${latestTag}`));\n    console.log(chalk.yellow(`Run the following command to update:`));\n    console.log(chalk.yellow(`npm install -g ${repo}`));\n    console.log('');\n  }\n}\n","type Store = Record<string, number>;\n\nexport type Counter = {\n  increment: (key: string) => number;\n};\n\nexport function createCounter() {\n  const store: Store = {};\n  return {\n    increment(key: string) {\n      const value = (store[key] || 0) + 1;\n      store[key] = value;\n      return value;\n    },\n  };\n}\n","import { toVFile } from 'to-vfile';\n\nimport { rehypeParser } from '../utils/utils';\n\n// export async function getAssetHast(name: string) {\n//   const contents = await getAsset(name);\n//   const vfile = toVFile({ contents }) as VFile;\n//   const parsed = rehypeParser().parse(vfile) as Parent;\n//   return parsed.children[0];\n// }\n\nexport function getAssetHast(value: string) {\n  const vfile = toVFile({ value });\n  const parsed = rehypeParser().parse(vfile);\n  return parsed.children[0];\n}\n","import { Element } from 'hast';\nimport { Node } from 'unist';\n\nimport hamburgerSvg from '../../assets/hamburger-icon.svg';\nimport linkSvg from '../../assets/link-icon.svg';\nimport { getAssetHast } from './get-asset-hast';\n\ntype Svg = {\n  id: string;\n  viewBox: string;\n  children: Node[];\n};\n\nconst svgs: Svg[] = [\n  createStoredSvg('hamburger-icon', hamburgerSvg),\n  createStoredSvg('link-icon', linkSvg),\n];\n\nexport function createSvg(name: string): Element {\n  const { id, viewBox } = getSvg(name);\n  return {\n    type: 'element',\n    tagName: 'svg',\n    properties: {\n      className: ['icon', id],\n      viewBox,\n    },\n    children: [\n      {\n        type: 'element',\n        tagName: 'use',\n        properties: {\n          href: `#${id}`,\n        },\n        children: [],\n      },\n    ],\n  };\n}\n\nexport function createDefs() {\n  return {\n    type: 'element',\n    tagName: 'svg',\n    properties: {\n      style: 'display: none',\n    },\n    children: [\n      {\n        type: 'element',\n        tagName: 'defs',\n        children: svgs.map(createGroup),\n      },\n    ],\n  };\n}\n\nfunction createStoredSvg(id: string, svg: string) {\n  const hast = getAssetHast(svg) as Element;\n  const children = hast.children;\n  const properties = (hast.properties || {}) as Record<string, string>;\n  const viewBox = properties.viewBox as string;\n  return { id, viewBox, children };\n}\n\nfunction getSvg(id: string) {\n  const stored = svgs.find((o) => o.id === id);\n  if (stored === undefined) {\n    throw new Error(`svg icon not found: ${id}`);\n  }\n  return stored;\n}\n\nfunction createGroup({ id, children }: Svg) {\n  return {\n    type: 'element',\n    tagName: 'g',\n    properties: { id },\n    children,\n  };\n}\n","import { Position } from 'unist';\nimport { VFile } from 'vfile';\nimport { VFileMessage } from 'vfile-message';\n\nexport type VFileWithStatus = Omit<VFile, 'messages'> & {\n  messages: MessageWithStatus[];\n};\n\nexport type MessageWithStatus = VFileMessage & {\n  status: MessageStatus;\n};\n\nexport enum MessageStatus {\n  fail = 'fail',\n  warning = 'warning',\n  info = 'info',\n}\n\nexport function failMessage(\n  file: VFile,\n  message: string,\n  position?: Position\n) {\n  const status = MessageStatus.fail;\n  return messageWithStatus(file, message, position, status);\n}\n\nexport function warnMessage(\n  file: VFile,\n  message: string,\n  position: Position | undefined\n) {\n  const status = MessageStatus.warning;\n  return messageWithStatus(file, message, position, status);\n}\n\nexport function infoMessage(\n  file: VFile,\n  message: string,\n  position: Position | undefined\n) {\n  const status = MessageStatus.info;\n  return messageWithStatus(file, message, position, status);\n}\n\nfunction messageWithStatus(\n  file: VFile,\n  message: string,\n  position: Position | undefined,\n  status: MessageStatus\n) {\n  // console.log(message);\n  const msg = file.message(message, position) as MessageWithStatus;\n  msg.status = status;\n  return msg;\n}\n","export type Timer = {\n  seconds: () => string;\n};\n\nexport function createTimer(): Timer {\n  const start = process.hrtime();\n  return {\n    seconds() {\n      const hrtime = process.hrtime(start);\n      return (hrtime[0] + hrtime[1] / 1e9).toFixed(3);\n    },\n  };\n}\n","import fs from 'fs';\nimport path from 'path';\n\nimport rehype from 'rehype-parse';\nimport stringify from 'rehype-stringify';\nimport { unified } from 'unified';\nimport { Node, Parent } from 'unist';\n\n// import { visit } from 'unist-util-visit';\n\nexport const rehypeParser = unified()\n  .use(rehype, { fragment: true })\n  .use(stringify);\n\nexport function readFile(\n  filePath: string,\n  encoding: BufferEncoding = 'utf-8'\n) {\n  return fs.promises.readFile(filePath, encoding);\n}\n\nexport function writeFile(filePath: string, value: string | Buffer) {\n  return fs.promises.writeFile(filePath, value);\n}\n\nexport async function checkLocalFileExists(filePath: string) {\n  try {\n    await fs.promises.access(filePath, fs.constants.F_OK);\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\n\nexport async function rmFile(filePath: string) {\n  return fs.promises.unlink(filePath);\n}\n\nexport function mkdir(dirPath: string) {\n  return fs.promises.mkdir(dirPath, { recursive: true });\n}\n\nexport function rmdir(dirPath: string) {\n  return fs.promises.rmdir(dirPath, { recursive: true });\n}\n\nexport function getBuildDir(dirPath: string) {\n  return path.join(process.cwd(), dirPath, 'build');\n}\n\nexport function getCacheDir(dirPath: string) {\n  return path.join(process.cwd(), dirPath, 'cache');\n}\n\nexport function getLibraryDir() {\n  return __dirname;\n}\n\nexport function combineMdastTrees(mdasts: Parent[]): Parent {\n  const children = mdasts.flatMap(\n    (mdast) => mdast.children || []\n  ) as Node[];\n  return { type: 'root', children };\n}\n\nexport function inspect() {\n  return (tree: Node) => {\n    console.log(JSON.stringify(tree, null, 2));\n    // console.dir(tree, { depth: null });\n    // visit(tree, 'leafDirective', (node) => {\n    //   console.log('---------------------');\n    //   console.dir(node, { depth: null });\n    // });\n    return tree;\n  };\n}\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","\n'use strict';\n\n\nvar encodeCache = {};\n\n\n// Create a lookup array where anything but characters in `chars` string\n// and alphanumeric chars is percent-encoded.\n//\nfunction getEncodeCache(exclude) {\n  var i, ch, cache = encodeCache[exclude];\n  if (cache) { return cache; }\n\n  cache = encodeCache[exclude] = [];\n\n  for (i = 0; i < 128; i++) {\n    ch = String.fromCharCode(i);\n\n    if (/^[0-9a-z]$/i.test(ch)) {\n      // always allow unencoded alphanumeric characters\n      cache.push(ch);\n    } else {\n      cache.push('%' + ('0' + i.toString(16).toUpperCase()).slice(-2));\n    }\n  }\n\n  for (i = 0; i < exclude.length; i++) {\n    cache[exclude.charCodeAt(i)] = exclude[i];\n  }\n\n  return cache;\n}\n\n\n// Encode unsafe characters with percent-encoding, skipping already\n// encoded sequences.\n//\n//  - string       - string to encode\n//  - exclude      - list of characters to ignore (in addition to a-zA-Z0-9)\n//  - keepEscaped  - don't encode '%' in a correct escape sequence (default: true)\n//\nfunction encode(string, exclude, keepEscaped) {\n  var i, l, code, nextCode, cache,\n      result = '';\n\n  if (typeof exclude !== 'string') {\n    // encode(string, keepEscaped)\n    keepEscaped  = exclude;\n    exclude = encode.defaultChars;\n  }\n\n  if (typeof keepEscaped === 'undefined') {\n    keepEscaped = true;\n  }\n\n  cache = getEncodeCache(exclude);\n\n  for (i = 0, l = string.length; i < l; i++) {\n    code = string.charCodeAt(i);\n\n    if (keepEscaped && code === 0x25 /* % */ && i + 2 < l) {\n      if (/^[0-9a-f]{2}$/i.test(string.slice(i + 1, i + 3))) {\n        result += string.slice(i, i + 3);\n        i += 2;\n        continue;\n      }\n    }\n\n    if (code < 128) {\n      result += cache[code];\n      continue;\n    }\n\n    if (code >= 0xD800 && code <= 0xDFFF) {\n      if (code >= 0xD800 && code <= 0xDBFF && i + 1 < l) {\n        nextCode = string.charCodeAt(i + 1);\n        if (nextCode >= 0xDC00 && nextCode <= 0xDFFF) {\n          result += encodeURIComponent(string[i] + string[i + 1]);\n          i++;\n          continue;\n        }\n      }\n      result += '%EF%BF%BD';\n      continue;\n    }\n\n    result += encodeURIComponent(string[i]);\n  }\n\n  return result;\n}\n\nencode.defaultChars   = \";/?:@&=+$,-_.!~*'()#\";\nencode.componentChars = \"-_.!~*'()\";\n\n\nmodule.exports = encode;\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 483.08 738.15\\\" class=\\\"crest\\\">\\n  <path fill=\\\"#13385E\\\"\\n    d=\\\"M477.26 392.43c0 119.82-147.87 251.55-236.25 256.22C143.28 641 5.19 503.76 5.19 393.71V6.19h472.08c-.01 0 .42 223.93-.01 386.24zM18.66 634.45c15.73-8.5 39.97-13.61 53.15-31.89 4.68 18.71-7.23 31.4-6.8 58.62l351.64-.01c2.64-13.83-11.46-40.33-6.35-58.61 13.18 18.28 37 23.39 52.73 31.89 13.61 7.23 14.03 11.06 14.03 34.87v48.48c0 9.36-11.06 14.88-23.81 14.46H27.59c-12.76.43-23.39-5.1-23.39-14.46v-48.48c0-22.96 0-28.06 14.46-34.87z\\\" />\\n  <path fill=\\\"#9ADAF8\\\"\\n    d=\\\"M447.72 661.24h-31.5c.27-1.43.58-2.93.89-4.6.01.68.01 1.36 0 2.05 11.48-20.84 2.13-26.36 3.83-36.14 8.93 11.48 22.54 13.18 32.32 18.28 11.89 6.38 19.55 20.41-5.54 20.41zm-83.06-204.65c12.75-12.32 21.67 0 19.12 9.35 0 .42-.42.85-.42 1.27-14.87 42.92-52.26 71.38-95.61 83.71 2.12 4.25 8.5 8.5 15.3 13.17-33.99 5.52-61.19-2.12-73.08-6.37-32.29-1.27-64.16-10.62-89.23-29.32-26.77-14.87-35.69-31.02-47.59-55.66-1.27-2.97-3.82-5.95-6.8-11.05-1.7-3.4-2.12-9.35 6.8-6.37 8.07 2.55 18.27 4.67 21.67.42.42-.85.42-1.27.42-1.7-.42-1.27 2.12-4.25 5.52-2.55 5.95-2.12 9.35-5.95 11.05-8.07 2.97.85 5.95 1.27 9.35 2.55 11.05 4.25 33.14 15.3 38.67 36.97 0-16.15-6.37-25.49-12.75-30.59 26.39.31 49.75 5.74 70.96 11.81v-15.89c6.31 2.82 11.45 6.33 14.87 8.99v11.3c2.29.69 4.56 1.38 6.8 2.06 8.07-.85 26.77-2.55 48.44.42-2.12 2.12-5.1 6.37-6.37 8.92 17.85 1.7 34.84-1.27 52.26-12.75 19.55-12.75-15.3-22.52-15.3-70.54 18.27 15.3 35.27 8.5 49.29 17.42 15.3-8.92 39.09-18.27 63.31-5.95-26.34 8.07-45.89 29.32-60.76 49.29 3.83-16.13-14.87-27.61-25.92-.84zm-237.52 19.55c-2.55 0-4.67 2.12-4.67 4.25 0 2.12 2.12 3.82 4.67 3.82s4.67-1.7 4.67-3.82c0-2.13-2.12-4.25-4.67-4.25zm110.9-307.21h14.87v24.52h-14.87v-24.52zm14.87 250.42h-14.87v-60.12c6.38 2.91 11.53 6.5 14.87 9.13v50.99zm-14.87-147.88c6.46 3 11.62 6.67 14.87 9.28v51.23h-14.87v-60.51zm2.97-141.21s-28.89-15.3-60.34-4.67c-.85-3.4-2.55-11.47-3.82-14.02 21.25-5.52 54.39-1.7 64.59 7.65 10.2-8.92 43.34-12.75 63.74-7.65-1.27 2.55-2.97 10.62-3.82 14.02-31.03-10.63-60.35 4.67-60.35 4.67zm-7.22-24.22c-3.4-2.55-8.5-5.1-15.3-5.95 10.62-20.4 11.47-27.62 14.87-62.46 3.82 2.12 5.95 5.1 8.07 8.92v7.22s-10.19 22.95-7.64 52.27zm-118.98 342.9c-2.55-.85-8.5-2.55-15.3-2.55-5.1 0-9.77-2.97-9.77-4.67.43-.85 1.7-1.7 3.82-1.7 4.67-.85 15.3 0 26.77 1.7-.84 2.55-2.54 5.1-5.52 7.22zM29.86 640.83c9.36-5.1 23.39-6.8 32.32-18.71 1.67 9.59-7.28 14.7 3.2 34.94.17 1.44.42 2.84.78 4.18H35.82c-25.94 0-18.29-14.03-5.96-20.41zm223.05-65.69h-14.87v-6.74c5.45 1.51 10.59 2.5 14.87 3.16v3.58z\\\" />\\n  <path fill=\\\"#FFF\\\"\\n    d=\\\"m445.32 712.41-1.56-5.63h-12.13l-1.64 5.63h-8.49l10.83-31.35h10.7l10.82 31.35h-8.53zm-6.58-22c-.12-.53-.46-1.94-1.02-4.24-.61 2.3-.95 3.71-1.09 4.24l-3.14 10.31h8.46l-3.21-10.31zm-26.92 22h-8.52v-23.93h-6.95v-7.42h22.49v7.42h-7.02v23.93zm-28.04-275.79c-1.7-9.35 4.25-26.77 30.17-30.17-12.32 4.25-24.22 17.43-30.17 30.17zm5.95 275.79h-8.63v-31.35h8.63v31.35zm-60.76-200.58c-28.47 7.65-75.63 20.4-145.32 2.97-18.7-4.67-62.46-16.15-80.31-39.09-3.4-4.67-4.67-13.17-4.67-14.45 0-1.7.85-2.55 4.67-1.7 12.32 2.12 14.45-2.55 19.12-7.65 5.52-.85 22.95-3.82 36.97 5.52 15.3 10.2 20.4 25.07 20.4 25.07s5.1-12.75-2.12-22.52c14.02-3.82 38.24 2.12 59.91 10.62 31.87 12.32 56.09 16.57 80.31 12.32s36.97-9.35 45.04-21.25c4.25-6.37 16.57-5.1 13.17 4.67-3.4 9.8-18.7 37.42-47.17 45.49zm-201.83-35.69c-2.55 0-4.67 2.12-4.67 4.25 0 2.12 2.12 3.82 4.67 3.82s4.67-1.7 4.67-3.82c0-2.13-2.12-4.25-4.67-4.25zm232.85-65.86c5.95 14.87 6.8 33.57 6.8 33.57s-14.45-23.37-6.8-33.57zm-15.3-3.83c6.8 10.2 16.57 41.22 16.57 41.22s-21.67-23.37-16.57-41.22zM241.44 111.57V46.56c11.05-21.67 26.77-5.1 54.39-13.6 5.1 22.52 9.77 62.89 11.05 70.11-20.83 5.95-39.1-16.15-65.44 8.5zm-.06-64.93-.01-.21.06.12c-.03.13-.05.28-.08.42.02-.12.03-.24.03-.33zm-1.25 6.7c.2-.91.54-2.45.81-3.85-.21 1.4-.36 2.59-.36 2.59s-.16.44-.45 1.26zm-5.07 393.7c1.12.43 2.22.89 3.27 1.36v16.83c-1.08-.31-2.18-.62-3.27-.92v-17.27zm0-89.03h.1c1.08.43 2.14.88 3.17 1.35v58.98h-3.27v-60.33zm0-87.83c1.13.46 2.21.94 3.27 1.44v60.35h-3.27v-61.79zm0-101.25h3.27v24.52h-3.27v-24.52zm-13.56-68.48c5.23.99 9.32 2.98 12.28 5.05 0 .04 0 .07.01.11-4.3-2.75-8.37-4.34-12.29-5.16zm-45.5 2.62c1.27-7.22 6.37-47.59 11.05-70.11 22.04 6.78 36.49-2.11 47.05 4.8-3.39 34.72-4.25 41.96-14.85 62.31-15.63-2.15-28.8 7.26-43.25 3zm-61.75 609.34h-8.5l-1.55-5.63H92.07l-1.65 5.63h-8.48l10.8-31.35h10.7l10.81 31.35zm-15.06-22c-.14-.53-.51-1.94-1.05-4.24-.57 2.3-.96 3.71-1.1 4.24l-3.17 10.31h8.52l-3.2-10.31zm-31.29-9.35h8.67v31.35H67.9v-31.35zm-24.54 31.35-13.15-31.35h9.05l6.29 17.53c.14.39.48 1.79 1.02 4.22.6-2.44.98-3.83 1.14-4.22l6.14-17.53h9.11l-13.12 31.35h-6.48zm103.14-13.82c.14.39.45 1.79 1.04 4.22.55-2.44.96-3.83 1.08-4.22l6.24-17.53h9.05l-13.11 31.35h-6.49l-13.16-31.35h9.09l6.26 17.53zm41.33-10.63h-10.89v5.44h10.26v6.68h-10.26v5.35h10.89v6.99h-19.19v-31.35h19.19v6.89zm17.28-6.9c4.32 0 7.67.04 10.37 2.13 2.24 1.76 3.47 4.42 3.47 7.68 0 4.83-2.44 7.93-6.99 8.92l8.54 12.63h-9.65l-7.19-12.28v12.28h-8.01v-31.35h8.93c.19-.01.35-.01.53-.01zm-1.46 14.83h1.61c3.56 0 5.28-1.13 5.28-3.92 0-3.27-1.61-4.27-5.18-4.27h-1.72v8.19zm31.12 16.52h-8.64v-31.35h8.64v31.35zm3.57-137.27h-3.27v-7.61c1.1.34 2.19.65 3.27.95v6.66zm25.54 113.33h-7.02v23.93h-8.52v-23.93h-6.98v-7.42h22.52v7.42zm24.14-7.41 10.82 31.35h-8.46l-1.61-5.63h-12.11l-1.6 5.63h-8.52l10.83-31.35h10.65zM287 700.72l-3.2-10.31c-.13-.53-.48-1.94-1.05-4.24-.55 2.3-.97 3.71-1.11 4.24l-3.14 10.31h8.5zm25.9 5.83c2.32 0 3.89-1.35 3.89-3.21 0-2.51-1.73-3.27-5.28-4.18-5.62-1.47-8.37-3.77-8.37-8.63 0-5.83 4.23-10.17 10.79-10.17 3.51 0 6.58.91 9.26 2.79l-2.66 6.12c-1.97-1.65-4.06-2.48-5.99-2.48-2.1 0-3.49 1.14-3.49 2.6 0 2.27 2.2 2.74 5 3.5 5.55 1.48 8.65 3.51 8.65 9.32 0 6.46-4.66 11.02-11.99 11.02-4.43 0-7.78-1.39-11.13-4.6l3.83-6.33c2.53 2.87 5 4.25 7.49 4.25zm45.84-7.96c.12.39.47 1.79 1.01 4.22.59-2.44.99-3.83 1.11-4.22l6.21-17.53h9.09l-13.15 31.35h-6.47l-13.16-31.35h9.08l6.28 17.53z\\\" />\\n  <path fill=\\\"#0499D6\\\"\\n    d=\\\"M374.44 472.74c-29.32 72.66-153.82 91.36-228.18 48.44-25.07-5.52-54.81-57.36-45.47-58.21 4.9-.31 13.11 4.46 22.4 10.17-3.06 1.76-4.87 4.93-4.56 8.1.42 4.25 4.67 7.65 9.35 7.22 5.1-.42 8.5-4.25 8.07-8.92-.42-2.3-1.66-4.18-3.31-5.5 6.31 1.3 9.26 5.53 9.26 10.18 12.32 5.95 23.79 9.35 31.44.85 3.82 7.22 10.62 11.05 17.42 13.6 15.72 3.4 44.19 5.95 47.59 1.7-9.35-12.32-28.47-16.15-44.19-19.55-2.97-4.25-2.55-12.32-8.92-17.85 8.92 2.97 9.77 8.5 13.6 12.75 19.55.85 47.17 12.75 50.14 28.89-7.65 2.97-20.82 3.82-33.57 2.55 15.3 3.82 32.72 5.95 50.14 5.52 42.92-1.27 84.13-7.65 105.38-48.01 4.68-8.93 8.08-2.13 3.41 8.07z\\\" />\\n  <path fill=\\\"#FFCF39\\\"\\n    d=\\\"M412.25 312.12h-74.36c-7.22 0-8.07 2.55-17 14.87-2.55 2.97-.42 5.95 4.25 6.37 8.5.43 20.82.85 35.27 1.7-2.55-3.82-2.97-8.5-2.12-11.05 4.25-3.4 10.2-3.4 12.75-3.4-5.52 18.27 17 19.97 18.7 2.55.42 1.27.85 7.65-2.97 12.32 10.62 0 22.1.42 33.99.85-14.02.42-25.92.85-36.54 1.27-2.12 1.27-5.1 2.55-9.35 2.55s-7.22-.85-9.77-2.12c-25.92.42-41.22.42-54.39-.42-6.8-.42-5.95-3.82-5.52-8.07.42-2.55 5.95-47.17 9.77-80.31 2.55-19.55 8.07-42.49 24.64-48.01-2.12-6.37-7.65-19.55-10.62-27.62-4.25-10.62 2.12-19.12 15.72-19.12h52.69c3.82 0 8.92 0 13.17 2.55 5.1 2.97 7.65 8.92 5.1 15.3-4.67 12.32-10.62 27.62-11.05 28.89 6.37 2.97 8.07 4.67 11.05 8.5 9.77 11.9 12.32 31.02 13.17 38.24 3.4 27.19 8.07 64.59 8.92 71.81-1.7-4.67-3.4-7.65-25.5-7.65zm-18.27-145.74h-49.29c-5.52 0-4.25 5.1-1.7 10.62 4.25 9.77 7.65 17.85 10.2 23.37h37.39c2.55-5.1 7.65-17 11.05-25.49 3.82-9.78-3.4-8.5-7.65-8.5zM209.99 607.86c1.27-1.7 6.37-6.8 9.35-9.35-2.12-2.55-3.4-5.52-3.4-9.35 0-7.65 6.37-14.02 14.02-14.02h23.79c7.65 0 14.02 6.37 14.02 14.02 0 3.82-1.27 7.22-3.82 9.77l8.92 8.92c-16.98 6.39-47.15 6.81-62.88.01zm43.77-161.46h-23.79c-7.65 0-14.02-6.37-14.02-14.02s6.37-14.02 14.02-14.02h23.79c7.65.42 14.02 6.37 14.02 14.02s-6.37 14.02-14.02 14.02zm-24.22-116.43h23.8c7.65 0 14.02 5.95 14.02 14.02 0 7.65-6.37 14.02-14.02 14.02h-23.8c-7.65 0-14.02-6.37-14.02-14.02 0-7.65 6.37-14.02 14.02-14.02zm24.22-60.34h-23.79c-7.65 0-14.02-6.37-14.02-14.02s6.37-14.02 14.02-14.02h23.79c7.65 0 14.02 6.37 14.02 14.02s-6.37 14.02-14.02 14.02zm-33.57-78.18h42.49v41.64h-42.49v-41.64zm13.6-40.37h15.3v17.85h-15.3v-17.85zm8.07-16.99 7.22 13.17-15.3.42 8.08-13.59zM114.81 455.32c-3.4 1.27-6.8 1.7-9.77.42-2.97-1.27-5.52-3.4-6.8-6.8-.4-.88-.7-1.8-.95-2.74.72.12 1.47.19 2.23.19 1.34 0 2.64.07 3.9.18.48 1.25 1.72 2.83 3.75 3.64 2.12.85 4.25.43 5.1-.42.64-.27 1.27-.64 1.89-1.06.24.07.46.15.65.21 2.97-2.12 4.67-4.67 5.52-7.22l-.81-.12c.82-2.09 1.23-4.16 1.23-5.83 0-4.25-1.7-7.65-4.67-8.92-2.12-.42-4.25 0-5.52.42-2.97 1.27-5.52 4.25-7.22 8.07-.48 1.45-.78 2.97-.9 4.45-2.15-.11-4.08-.14-5.71-.08.18-2.04.68-4.09 1.51-6.07 2.12-5.52 5.95-9.35 10.2-11.47 3.4-1.27 6.8-1.7 9.77 0 7.22 2.97 10.62 12.75 6.8 22.1-2.12 5.1-5.95 9.35-10.2 11.05z\\\" />\\n  <path fill=\\\"#E2A034\\\"\\n    d=\\\"M359.99 227.57c-1.7 12.75-1.7 57.79-2.12 76.91-9.35.42-22.1 0-24.64.85 1.7-19.97 2.97-66.71 3.82-80.73.85-14.45 7.65-17.85 17-17.42h31.87c-10.63.84-24.23 6.36-25.93 20.39zm-104.1 15.29h-28.47c0-.85.43-8.92-7.22-9.77h25.07v-41.64h11.47v41.64h5.95c-7.23 1.7-6.8 7.65-6.8 9.77zm-14.03-91.78h4.67v17.85h-4.67v-17.85zm0-16.99 4.67 13.6-4.67-.42v-13.18zm-110.05-29.32c3.82 27.62-18.27 35.69-25.07 36.12-4.67 1.27-2.12 5.95-2.12 5.95 2.12 2.97 3.82 4.25 11.05 8.92 2.12 2.55-2.97 4.25-2.97 4.25s-9.35-8.92-14.02-11.47c-2.12-.85 1.27-3.82-1.27-4.67-.85-.42-9.35-.85-10.62-1.7 16.15-1.7 41.64-15.72 26.34-35.27 11.47 24.64-31.87 32.72-35.27 33.14-12.75 2.12-21.67 15.3-25.92 11.05-4.67 4.67-14.87 5.52-10.62 2.97 3.82-2.55 17.85-14.02 27.62-27.19 21.25-28.89 39.94-31.02 41.22-36.54 2.55-14.45 26.34-19.12 30.59-2.55 2.12.42 5.1 1.27 8.5 4.25-3.4 0-6.8 0-8.92.85-5.54 2.54-8.94 7.21-8.52 11.89zm2.55-18.7c-1.27 0-2.55 1.27-2.55 2.55 0 1.27 1.27 2.55 2.55 2.55 1.27 0 2.55-.85 2.55-2.55s-1.27-2.97-2.55-2.55zm117.7 510.74c-17.42 1.27-25.92-.42-25.92-.42s23.37-2.55 32.29-14.45c2.13 2.55 3.4 14.02-6.37 14.87zm.85-155.09h-26.34s19.97-1.27 32.29-14.45c3.82 2.13 4.25 14.45-5.95 14.45zm0-88.81h-26.34s19.97-1.27 32.29-14.45c3.4 2.13 4.25 14.45-5.95 14.45zm.43-88.38H227s19.97-1.27 32.29-14.45c3.39 2.13 4.24 14.45-5.95 14.45z\\\" />\\n  <path fill=\\\"#EE422D\\\" d=\\\"M132.66 111.14c0 21.25-16.57 28.04-20.82 28.89 1.28-4.67 8.07-26.76 20.82-28.89\\\" />\\n  <path fill=\\\"#81C341\\\"\\n    d=\\\"M174.3 274.31s21.25-10.62 23.37-21.25c-6.37-6.37-22.95-6.8-22.95-6.8s19.12-14.45 18.27-24.64c-9.35-4.25-26.34-1.7-26.34-1.7 7.65-10.62 9.77-19.55 9.77-26.77-9.77-1.7-25.07 4.25-25.07 4.25s5.1-18.27 0-27.62c-8.92-2.55-21.67 13.6-21.67 13.6s-4.67-19.97-15.3-30.17c-10.62 10.62-15.3 30.17-15.3 30.17s-12.75-16.15-22.1-13.6c-5.1 9.35 0 27.62 0 27.62s-15.3-5.95-25.07-4.25c-.42 7.65 2.12 16.15 9.77 26.77 0 0-17-2.55-26.34 1.7-.85 10.62 18.27 24.64 18.27 24.64s-16.57.42-22.95 6.8c2.12 10.62 22.95 21.25 22.95 21.25s-12.32 2.55-20.4 11.47c5.1 6.37 15.72 12.75 24.64 14.02-7.22 5.52-11.47 10.2-13.6 14.02 11.9 9.77 37.39 11.05 62.46 3.4 0 4.67 0 43.77-5.95 61.61h25.49c-5.95-17.85-5.95-56.94-5.95-61.61 25.07 7.65 50.56 6.37 62.46-3.4-1.7-3.4-5.95-8.07-13.6-14.02 8.5-1.27 19.55-7.65 24.22-14.02-6.76-8.92-19.08-11.47-19.08-11.47\\\" />\\n  <path fill=\\\"#07974B\\\"\\n    d=\\\"M151.36 274.73c2.55-1.27 14.45-5.1 20.82-16.15-6.37-5.95-20.82-6.37-20.82-6.37s13.17-8.5 17.42-21.25c-11.05-3.4-22.52 0-22.52 0s9.35-13.6 10.62-24.64c-10.62 1.27-22.1 6.8-22.1 6.8 3.4-7.22 4.67-17 3.4-25.49-5.1.85-10.2 7.22-13.17 11.05-2.55-8.5-7.22-11.47-10.62-13.17-5.1 7.65-6.37 12.75-5.52 22.95 1.7-1.7 4.67-4.67 8.92-7.22 2.55 14.87-2.55 25.92-2.55 25.92s6.37-4.25 15.3-5.1c.42 8.07-2.55 17-11.47 26.77 0 0 7.65-4.67 16.57-5.1-1.27 11.47-8.5 19.55-15.72 25.92 4.67-2.12 13.17-2.12 19.12-.42-2.97 8.92-9.77 13.17-19.97 18.7 6.37 0 12.75.85 16.15 3.4-4.25 7.65-14.02 11.05-20.82 13.17 15.72 5.95 31.02 8.5 45.89 5.1-.85-4.67-6.8-9.77-13.17-13.6 5.95-1.27 14.87-3.4 22.95-9.77-4.69-5.97-11.06-9.37-18.71-11.5\\\" />\\n  <path fill=\\\"#fff\\\" fill-rule=\\\"evenodd\\\" class=\\\"dark-only\\\"\\n    d=\\\"M483.06 0 .4.05v390.87c-.09 125.7 152.44 256.62 241.01 261.36l.32.02.33-.02c88.59-4.74 241.11-135.66 241.02-261.35L483.06 0zm-12.2 12.23-458.23.05v378.65c-.08 117.34 146.75 244.4 229.1 249.09 82.37-4.69 229.2-131.77 229.12-249.11.5-145.16.09-341.72.01-378.68zM16.27 636.17s3.41-1.95 3.41-1.98c.02 0 2.13-.92 2.22-.98 0 0 5.82-2.63 6.09-2.71 0 0 6.24-2.89 6.2-2.86 13.22-5.57 28.15-11.85 37.64-24.83l1.12-1.53c.25.98.49 1.85.49 1.85.78 3.13 1.17 6.19 1.17 9.14 0 5.78-1.47 11.25-3.04 17.11-1.7 6.31-3.83 14.16-4.19 24.5l-.05 1.63h348.32l-.05-1.63c-.36-10.36-2.48-18.21-4.29-24.9-1.57-5.92-2.91-11.01-2.91-16.7 0-3.12.39-6.09 1.18-9.13 0 0 .26-.98.48-1.83.57.82 1.07 1.5 1.07 1.5 9.51 12.97 24.46 19.26 37.63 24.8 0 0 5.17 2.32 5 2.18 0 0 .49.29.7.42 0 0 8.74 3.94 8.77 3.95 0 0 7.44 4.72 7.61 4.84 7.71 4.68 12.19 10.28 12.19 24.89 0 0-.19 5.98-.19 6.04l.01 8.42-.05 39.39c0 4.68-1.86 8.99-5.42 12.4-5.44 5.31-14.31 8.25-24.36 7.99H30.13c-10.14.26-19.08-2.68-24.5-7.99-3.56-3.47-5.44-7.72-5.44-12.29l-.02-39.19v-8.33L0 665.37c0-16.97 6.46-23.92 16.27-29.2zm46.72 17.15c-2.06-5.06-3.07-9.42-3.07-13.32 0-3.27.63-5.96 1.17-8.31l.21-1.32.8-5.37-3.32 2.95c-5.94 5.31-13.12 8.01-18.97 10.2 0 0-7.6 3.18-7.8 3.28 0 0-2.55 1.3-2.89 1.48-4.16 2.53-7.27 5.84-8.31 8.77l-.56 1.63 1.65.45c4.14 1.15 9.14 1.73 14.88 1.73h27.13l-.92-2.17zm398.9-2.25c-1.04-2.36-3.32-4.9-6.41-7.01 0 0-6-3.26-6.14-3.33 0 0-6.22-2.56-6.28-2.57-5.77-2.21-12.95-4.92-18.87-10.2l-3.24-2.83.7 5.13s.22 1.38.32 1.8c.53 2.41 1.1 4.91 1.1 7.95 0 3.8-1.03 8.16-3.14 13.32l-.91 2.18h27.13c7.68 0 12.34-1.26 14.89-2.3l1.51-.64-.66-1.5zM11.7 664.69s.2 5.36.2 5.24l-.02 8.72.02 39.09c0 1.48.61 2.75 1.86 3.97 3.05 3.06 9.29 4.84 16.24 4.66h423.17c6.84.18 12.97-1.6 15.96-4.62 1.32-1.21 1.96-2.53 1.96-4.09l.01-48.13.4-9.17-2.58 1.56c-5.65 3.45-13.53 5.28-22.77 5.28H36.79c-9.4 0-17.07-1.38-22.79-4.1l-2.38-1.08.08 2.67z\\\" />\\n  </svg>\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"448\\\" height=\\\"392\\\" viewBox=\\\"0 0 448 392\\\">\\n  <defs>\\n    <style>\\n      .cls-1 {\\n        fill-rule: evenodd;\\n      }\\n    </style>\\n  </defs>\\n  <path id=\\\"Color_Fill_1\\\" data-name=\\\"Color Fill 1\\\" class=\\\"cls-1\\\" d=\\\"M16,62H432a15.8,15.8,0,0,0,16-16V16A15.8,15.8,0,0,0,432,0H16A15.8,15.8,0,0,0,0,16V46A15.8,15.8,0,0,0,16,62Zm0,165H432a15.8,15.8,0,0,0,16-16V181a15.8,15.8,0,0,0-16-16H16A15.8,15.8,0,0,0,0,181v30A15.8,15.8,0,0,0,16,227Zm0,165H432a15.8,15.8,0,0,0,16-16V346a15.8,15.8,0,0,0-16-16H16A15.8,15.8,0,0,0,0,346v30A15.8,15.8,0,0,0,16,392Z\\\"/>\\n</svg>\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 16 16\\\">\\n  <path\\n    d=\\\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\\\">\\n  </path>\\n</svg>\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 117.18 48.02\\\" class=\\\"uofg\\\">\\n  <path fill=\\\"#003865\\\"\\n    d=\\\"m114.74 32-3.83 9.36h-.8l-3.54-8.38-3.57 8.38h-.83l-4.43-9.99c-.41-.92-.83-1.37-2.2-1.51v-.54h5.77v.54c-1.75.09-1.87.59-1.25 1.99l3.21 7.16 2.91-6.9c-.65-1.51-1.16-2.05-2.2-2.17l-.71-.09v-.54h6.15v.54c-1.46.03-1.9.47-1.28 1.96l2.91 7.07 2.85-6.95c.65-1.58.15-2.08-1.72-2.08v-.54h4.99v.54c-1.12.13-1.83.7-2.43 2.15zm-.03-21.93-5.05 12.6c-.89 2.2-1.57 3.18-2.61 3.18-.71 0-1.22-.45-1.22-1.04 0-1.22 1.72-.92 2.46-1.67.33-.33.77-1.1 1.01-1.69l.89-2.23-4.6-9.77c-.57-1.22-1.1-1.73-2.35-1.75v-.54h5.97v.54c-1.81.03-2.02.56-1.43 1.81l3.36 7.25 2.52-6.3c.89-2.26.33-2.7-1.43-2.76v-.54h4.93v.54c-1.2.14-1.88.98-2.45 2.37zm-14.79 9.22c-1.75 0-3-1.46-3-3.45V8.47h-1.37v-.48c1.16-.56 2.17-1.93 2.85-3.77h.51v2.94h3.67l-.47 1.31h-3.2v6.92c0 1.87 1.34 2.5 1.96 2.5.66 0 1.25-.51 1.81-1.49l.48.45c-.72 1.54-1.88 2.44-3.24 2.44zm-11.72-.92c1.82 0 2.47-.6 2.47-2.17v-5.97c0-1.16-.15-1.31-.92-1.46l-1.4-.27v-.48l3.86-1.34h.45v9.98c0 1.04.56 1.7 2.14 1.7v.56h-6.6v-.55zm3.24-16.11c-.71 0-1.28-.51-1.28-1.13C90.17.5 90.73 0 91.44 0c.71 0 1.31.5 1.31 1.13 0 .62-.59 1.13-1.31 1.13zM86.77 15.9c0 1.93-1.61 3.39-3.69 3.39-.56 0-.98-.09-1.31-.21-.33-.09-.57-.18-.8-.18-.18 0-.36.12-.51.35h-.45l-.33-3.33h.48c.35 1.79 1.48 2.79 2.82 2.79 1.19 0 2.11-.89 2.11-1.96 0-.62-.15-1.01-.95-1.81-2.11-2.11-4.46-2.32-4.46-4.78 0-1.96 1.55-3.33 3.8-3.33.8 0 1.63.18 2.38.48l.06 2.7h-.51c-.21-1.52-1.19-2.46-2.38-2.46-.98 0-1.81.68-1.81 1.66.03 2.62 5.55 3.06 5.55 6.69zm-3.86 15.87c-.45-.03-1.84-.15-2.97-.36.18.33.5.95.5 1.9 0 2.2-1.9 4.31-5.2 4.31-.56 0-.83-.06-1.37-.24-.47.51-1.81.83-1.81 1.51 0 .75 1.28 1.04 4.25 1.07 3.36.03 4.52.18 5.41 1.07.71.71.89 1.46.89 2.08 0 1.93-2.61 4.9-8.11 4.9-3.09 0-4.57-1.37-4.57-2.82 0-1.72 1.81-1.99 3.18-3.65-1.6-.15-2.82-1.16-2.82-2.11 0-1.37 1.99-1.43 3.03-2.2-1.81-.71-2.85-1.99-2.85-3.69 0-2.56 2.29-4.55 5.23-4.55 1.37 0 2.53.42 3.33 1.19 1.34 0 2.58-.15 3.89-.3v1.89zM71.77 44.21c0 1.4 1.96 2.97 4.4 2.97 2.53 0 4.9-1.66 4.9-3.54 0-1.1-.92-1.66-1.99-1.75-.77-.09-4.51-.12-5.38-.24-.83.99-1.93 1.41-1.93 2.56zm3.57-14.64c-1.13 0-2.88.62-2.88 3.39 0 1.75.89 4.1 3.15 4.1 1.72 0 2.85-1.43 2.85-3.48 0-2.56-1.31-4.01-3.12-4.01zm.87-20.54c-.32-.15-.68-.29-1.04-.29-.53 0-.86.36-1.16.77-.39.53-.71 1.04-.95 1.48v5.76c0 1.22.45 1.61 1.93 1.61h1.13v.56h-7.04v-.56c1.52-.03 1.99-.65 1.99-2.23V9.27l-1.99-.72v-.5l3.39-1.19h.6v3.15h.06c1.48-2.44 1.84-3 2.82-3 .36 0 .45.03 1.01.27.3.12.83.24 1.54.44l-.71 1.79a5.47 5.47 0 0 1-1.58-.48zm-7.56 29.04c0 1.93-1.61 3.39-3.68 3.39-.56 0-.98-.09-1.31-.21-.32-.09-.56-.18-.8-.18-.18 0-.35.12-.5.36h-.45l-.32-3.33h.47c.36 1.78 1.49 2.8 2.83 2.8 1.19 0 2.11-.9 2.11-1.96 0-.63-.15-1.01-.95-1.82-2.11-2.11-4.46-2.32-4.46-4.78 0-1.96 1.54-3.33 3.8-3.33.8 0 1.63.18 2.38.48l.06 2.7h-.5c-.21-1.52-1.19-2.47-2.38-2.47-.98 0-1.81.68-1.81 1.66-.01 2.61 5.51 3.06 5.51 6.69zm-9.79-25.44c0 3.09 2.17 5.17 4.51 5.17 1.49 0 2.65-.59 3.78-1.93l.33.36c-1.25 1.58-3.12 3.06-5.29 3.06-2.91 0-5.17-2.65-5.17-6.09 0-3.15 2.11-6.36 5.73-6.36 4.01 0 3.92 2.88 4.9 3.86v.68h-8.68c-.05.45-.11.86-.11 1.25zm6.3-2.02c-.33-1.93-1.51-3.21-2.94-3.21-.98 0-2.46.45-3.15 3.21h6.09zm-10.33-.74-4.1 9.33h-.86l-4.31-9.86c-.45-1.04-.83-1.4-1.31-1.49l-.92-.15v-.54h6.06v.54c-1.81.06-2.38.29-1.67 1.69l3.15 7.4 3.03-6.86c.54-1.22.27-2.08-1.9-2.23v-.54h5.17v.54c-1.12.2-1.77.86-2.34 2.17zm-11.01 9.06h-6.6v-.56c1.81 0 2.47-.6 2.47-2.17v-5.97c0-1.16-.15-1.31-.92-1.46l-1.4-.27v-.48l3.86-1.34h.45v9.98c0 1.04.56 1.7 2.14 1.7v.57zM40.46 2.26c-.72 0-1.28-.51-1.28-1.13 0-.63.57-1.13 1.28-1.13.71 0 1.31.5 1.31 1.13 0 .62-.6 1.13-1.31 1.13zM29.98 18.37c.86-.03 1.36-.24 1.69-.57.56-.57.62-2.74.62-6.69 0-2.38-1.16-3.12-2.35-3.12-.95 0-2.4.83-3.95 1.9v6.45c0 1.63.39 2.02 1.99 2.02v.56h-5.97v-.56c1.31 0 1.99-.72 1.99-1.87v-6.24c0-1.1-.12-1.31-.89-1.46l-1.01-.2v-.48l3.42-1.25H26v2.32c1.99-1.25 3.65-2.35 5.11-2.35 2.02 0 3.18 1.48 3.18 4.45 0 3.95-.21 4.72-.24 5.89-.03.8.44 1.19 1.66 1.19h.65v.56h-6.39v-.55zM19.94 3.74v8.02c0 3.68-2.35 7.64-8.8 7.64-5.67 0-8.59-3.24-8.59-7.49V3.24c0-1.9-.53-2.2-2.56-2.23V.45h7.64v.56h-.26c-1.63 0-2.35.45-2.35 2.17v8.26c0 4.01 2.35 6.42 6.77 6.42 3.36 0 6.78-1.4 6.78-6.44V4.49c0-2.85-.45-3.36-2.91-3.48V.45h6.98v.56c-1.99.03-2.7.83-2.7 2.73zM3.66 41.45c-1.4 0-2.64-2.23-2.64-4.7 0-4.81 5.17-7.79 6.95-7.79.86 0 2.7 1.19 2.7 4.37 0 5.66-5.62 8.12-7.01 8.12zm2.79-11.38c-1.87 0-3.54 3.59-3.54 6.57 0 2.49 1.07 3.71 2.08 3.71 2.38 0 3.77-3.86 3.77-6.6.01-2.08-1-3.68-2.31-3.68zm5.37-.32c.71-.09 1.43-.21 2.17-.39.45-2.44 1.34-4.99 3-6.65 1.04-1.04 2.35-1.6 3.51-1.6 1.16 0 2.11.65 2.11 1.43 0 .47-.36.86-.83.86-.98 0-1.78-1.22-2.64-1.22-1.16 0-2.11 1.31-2.53 3.27l-.8 3.89h2.55l-.3.98h-2.44L14.11 39c-1.16 6.66-4.55 9.03-7.34 9.03-1.25 0-2.29-.62-2.29-1.37 0-.48.48-.89.98-.89 1.1 0 1.69 1.31 2.82 1.31.68 0 1.28-.33 1.81-.86 1.48-1.49 2.05-6.56 2.17-7.28l1.52-8.62h-2.05l.09-.57zm23.44 3.95h-1.1v-.53h8.02v.53c-1.48.09-2.08.6-2.08 1.87v4.13c-2.94 1.52-6.71 1.87-7.96 1.87-6.51 0-9.54-5.02-9.54-9.36 0-4.46 3.12-10.04 10.37-10.04 3.18 0 5.29 1.01 5.91 1.01.27 0 .51-.06.68-.21h.42v4.81h-.59c-.81-3.71-3.33-4.87-6.09-4.87-5.23 0-7.9 4.34-7.9 9.12 0 6.09 4.28 8.79 7.7 8.79 1.37 0 2.88-.3 4.55-1.13v-3.74c-.01-1.69-.61-2.25-2.39-2.25zM43.74 23l-1.34-.15v-.5l3.8-1.22h.44v17.62c0 1.22.57 1.78 1.72 1.78h.51v.57h-6.68v-.57c1.9 0 2.46-.56 2.46-1.99V24.19c.01-.83-.08-1.1-.91-1.19zm6.6 9.87c-.06-.18-.09-.27-.09-.42 0-1.04 2.47-3.45 4.4-3.45.89 0 2.29.42 3.12 1.58.45.62.45 1.01.45 2.55v3.98c0 2.38 0 2.91.77 2.91.32 0 .71-.03 1.45-.65l.15.45c-1.6 1.31-2.44 1.63-2.94 1.63-1.22 0-1.34-1.34-1.37-1.81-2.05 1.69-2.64 1.81-3.45 1.81-1.72 0-2.76-.98-2.76-2.44 0-1.81 1.6-2.44 3.51-2.91.62-.15 1.6-.51 2.64-1.13v-2.35c0-.83 0-1.31-.51-1.9-.38-.48-1.01-.86-1.66-.86-.98 0-1.84.83-1.84 1.45 0 .18.03.3.15.57l-2.02.99zm4.13 3.53c-1.81.74-2.5 1.04-2.5 2.26 0 1.07.86 1.75 1.75 1.75.47 0 .83-.15 2.5-1.31v-3.54c-.56.34-1.03.55-1.75.84zm29.05-1.1c0-4.1 3.33-6.3 6.42-6.3 3.63 0 6.39 2.7 6.39 6.24 0 3.5-2.76 6.21-6.3 6.21-3.69 0-6.51-2.67-6.51-6.15zm10.57.69c0-3.39-2.08-6.27-4.57-6.27-1.96 0-3.78 2.02-3.78 4.58 0 3.6 2.05 6.45 4.61 6.45 1.75-.01 3.74-1.79 3.74-4.76z\\\" />\\n</svg>\\n\";","module.exports = import(\"@double-great/remark-lint-alt-text\");;","module.exports = import(\"@mapbox/remark-lint-link-text\");;","module.exports = import(\"base64-arraybuffer\");;","module.exports = import(\"chalk\");;","module.exports = import(\"dictionary-en-gb\");;","module.exports = import(\"figures\");;","module.exports = import(\"hash-sum\");;","module.exports = import(\"image-size\");;","module.exports = import(\"js-yaml\");;","module.exports = import(\"lodash/cloneDeep.js\");;","module.exports = import(\"lodash/kebabCase.js\");;","module.exports = import(\"lodash/startCase.js\");;","module.exports = import(\"markdown-table\");;","module.exports = import(\"mathjax-full/js/adaptors/liteAdaptor.js\");;","module.exports = import(\"mathjax-full/js/core/MathItem.js\");;","module.exports = import(\"mathjax-full/js/core/MmlTree/SerializedMmlVisitor.js\");;","module.exports = import(\"mathjax-full/js/handlers/html.js\");;","module.exports = import(\"mathjax-full/js/handlers/html/HTMLDocument.js\");;","module.exports = import(\"mathjax-full/js/input/mathml.js\");;","module.exports = import(\"mathjax-full/js/input/tex.js\");;","module.exports = import(\"mathjax-full/js/input/tex/AllPackages.js\");;","module.exports = import(\"mathjax-full/js/mathjax.js\");;","module.exports = import(\"mathjax-full/js/output/svg.js\");;","module.exports = import(\"mdast-util-toc\");;","module.exports = import(\"mime/lite.js\");;","module.exports = import(\"node-fetch\");;","module.exports = import(\"puppeteer\");;","module.exports = import(\"refractor\");;","module.exports = import(\"rehype-document\");;","module.exports = import(\"rehype-format\");;","module.exports = import(\"rehype-parse\");;","module.exports = import(\"rehype-raw\");;","module.exports = import(\"rehype-stringify\");;","module.exports = import(\"remark-autolink-headings\");;","module.exports = import(\"remark-directive\");;","module.exports = import(\"remark-footnotes\");;","module.exports = import(\"remark-frontmatter\");;","module.exports = import(\"remark-gfm\");;","module.exports = import(\"remark-parse\");;","module.exports = import(\"remark-rehype\");;","module.exports = import(\"remark-retext\");;","module.exports = import(\"remark-slug\");;","module.exports = import(\"retext-english\");;","module.exports = import(\"retext-spell\");;","module.exports = import(\"sandboxed-module\");;","module.exports = import(\"speech-rule-engine\");;","module.exports = import(\"svgo\");;","module.exports = import(\"to-vfile\");;","module.exports = import(\"unist-util-visit\");;","module.exports = import(\"yargs\");;","module.exports = import(\"yup\");;","module.exports = require(\"buffer\");","module.exports = require(\"child_process\");","module.exports = require(\"fs\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"url\");","/**\n * @licstart The following is the entire license notice for the\n * Javascript code in this page\n *\n * Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * Javascript code in this page\n */\n\"use strict\";\n\nfunction xmlEncode(s) {\n  var i = 0,\n    ch;\n  s = String(s);\n\n  while (i < s.length && (ch = s[i]) !== \"&\" && ch !== \"<\" && ch !== '\"' && ch !== \"\\n\" && ch !== \"\\r\" && ch !== \"\\t\") {\n    i++;\n  }\n\n  if (i >= s.length) {\n    return s;\n  }\n\n  var buf = s.substring(0, i);\n\n  while (i < s.length) {\n    ch = s[i++];\n\n    switch (ch) {\n      case \"&\":\n        buf += \"&amp;\";\n        break;\n\n      case \"<\":\n        buf += \"&lt;\";\n        break;\n\n      case '\"':\n        buf += \"&quot;\";\n        break;\n\n      case \"\\n\":\n        buf += \"&#xA;\";\n        break;\n\n      case \"\\r\":\n        buf += \"&#xD;\";\n        break;\n\n      case \"\\t\":\n        buf += \"&#x9;\";\n        break;\n\n      default:\n        buf += ch;\n        break;\n    }\n  }\n\n  return buf;\n}\n\nexport function Element(name) {\n  this.nodeName = name;\n  this.childNodes = [];\n  this.attributes = {};\n  this.textContent = \"\";\n\n  if (name === \"style\") {\n    this.sheet = {\n      cssRules: [],\n      insertRule: function (rule) {\n        this.cssRules.push(rule);\n      }\n    };\n  }\n}\n\nElement.prototype = {\n  getAttribute: function DOMElement_getAttribute(name) {\n    if (name in this.attributes) {\n      return this.attributes[name];\n    }\n\n    return null;\n  },\n  getAttributeNS: function DOMElement_getAttributeNS(NS, name) {\n    if (name in this.attributes) {\n      return this.attributes[name];\n    }\n\n    if (NS) {\n      var suffix = \":\" + name;\n\n      for (var fullName in this.attributes) {\n        if (fullName.slice(-suffix.length) === suffix) {\n          return this.attributes[fullName];\n        }\n      }\n    }\n\n    return null;\n  },\n  setAttribute: function DOMElement_setAttribute(name, value) {\n    value = value || \"\";\n    value = xmlEncode(value);\n    this.attributes[name] = value;\n  },\n  setAttributeNS: function DOMElement_setAttributeNS(NS, name, value) {\n    this.setAttribute(name, value);\n  },\n  appendChild: function DOMElement_appendChild(element) {\n    var childNodes = this.childNodes;\n\n    if (!childNodes.includes(element)) {\n      childNodes.push(element);\n    }\n  },\n  hasChildNodes: function DOMElement_hasChildNodes() {\n    return this.childNodes.length !== 0;\n  },\n  cloneNode: function DOMElement_cloneNode() {\n    var newNode = new Element(this.nodeName);\n    newNode.childNodes = this.childNodes;\n    newNode.attributes = this.attributes;\n    newNode.textContent = this.textContent;\n    return newNode;\n  },\n  toString: function DOMElement_toString() {\n    var buf = [];\n    var serializer = this.getSerializer();\n    var chunk;\n\n    while ((chunk = serializer.getNext()) !== null) {\n      buf.push(chunk);\n    }\n\n    return buf.join(\"\");\n  },\n  getSerializer: function DOMElement_getSerializer() {\n    return new DOMElementSerializer(this);\n  }\n};\n\nfunction DOMElementSerializer(node) {\n  this._node = node;\n  this._state = 0;\n  this._loopIndex = 0;\n  this._attributeKeys = null;\n  this._childSerializer = null;\n}\n\nDOMElementSerializer.prototype = {\n  getNext: function DOMElementSerializer_getNext() {\n    var node = this._node;\n\n    switch (this._state) {\n      case 0:\n        ++this._state;\n        return \"<\" + node.nodeName;\n\n      case 1:\n        ++this._state;\n\n        if (node.nodeName === \"svg:svg\") {\n          return ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"' + ' xmlns:svg=\"http://www.w3.org/2000/svg\"';\n        }\n\n      case 2:\n        ++this._state;\n        this._loopIndex = 0;\n        this._attributeKeys = Object.keys(node.attributes);\n\n      case 3:\n        if (this._loopIndex < this._attributeKeys.length) {\n          var name = this._attributeKeys[this._loopIndex++];\n          return \" \" + name + '=\"' + xmlEncode(node.attributes[name]) + '\"';\n        }\n\n        ++this._state;\n        return \">\";\n\n      case 4:\n        if (node.nodeName === \"svg:tspan\" || node.nodeName === \"svg:style\") {\n          this._state = 6;\n          return xmlEncode(node.textContent);\n        }\n\n        ++this._state;\n        this._loopIndex = 0;\n\n      case 5:\n        var value;\n\n        while (true) {\n          value = this._childSerializer && this._childSerializer.getNext();\n\n          if (value !== null) {\n            return value;\n          }\n\n          var nextChild = node.childNodes[this._loopIndex++];\n\n          if (nextChild) {\n            this._childSerializer = new DOMElementSerializer(nextChild);\n          } else {\n            this._childSerializer = null;\n            ++this._state;\n            break;\n          }\n        }\n\n      case 6:\n        ++this._state;\n        return \"</\" + node.nodeName + \">\";\n\n      case 7:\n        return null;\n\n      default:\n        throw new Error(\"Unexpected serialization state: \" + this._state);\n    }\n  }\n};\nexport const document = {\n  childNodes: [],\n\n  get currentScript() {\n    return {\n      src: \"\"\n    };\n  },\n\n  get documentElement() {\n    return this;\n  },\n\n  createElementNS: function (NS, element) {\n    var elObject = new Element(element);\n    return elObject;\n  },\n  createElement: function (element) {\n    return this.createElementNS(\"\", element);\n  },\n  getElementsByTagName: function (element) {\n    if (element === \"head\") {\n      return [this.head || (this.head = new Element(\"head\"))];\n    }\n\n    return [];\n  }\n};\n\nexport function Image() {\n  this._src = null;\n  this.onload = null;\n}\n\nImage.prototype = {\n  get src() {\n    return this._src;\n  },\n\n  set src(value) {\n    this._src = value;\n\n    if (this.onload) {\n      this.onload();\n    }\n  }\n\n};\n// exports.document = document;\n// exports.Image = Image;\n// exports.Element = DOMElement;\n// var exported_symbols = Object.keys(exports);\n\n// exports.setStubs = function (namespace) {\n//   exported_symbols.forEach(function (key) {\n//     console.assert(!(key in namespace), \"property should not be set: \" + key);\n//     namespace[key] = exports[key];\n//   });\n// };\n\n// exports.unsetStubs = function (namespace) {\n//   exported_symbols.forEach(function (key) {\n//     console.assert(key in namespace, \"property should be set: \" + key);\n//     delete namespace[key];\n//   });\n// };\n","/**\n * @typedef {import('mdast').Root|import('mdast').Content} Node\n * @typedef {import('mdast').Definition} Definition\n * @typedef {import('unist-util-visit').Visitor<Definition>} DefinitionVisitor\n */\n\nimport {visit} from 'unist-util-visit'\n\nconst own = {}.hasOwnProperty\n\n/**\n *\n * @param {Node} node\n */\nexport function definitions(node) {\n  /** @type {Object.<string, Definition>} */\n  const cache = Object.create(null)\n\n  if (!node || !node.type) {\n    throw new Error('mdast-util-definitions expected node')\n  }\n\n  visit(node, 'definition', ondefinition)\n\n  return getDefinition\n\n  /** @type {DefinitionVisitor} */\n  function ondefinition(definition) {\n    const id = clean(definition.identifier)\n    if (id && !own.call(cache, id)) {\n      cache[id] = definition\n    }\n  }\n\n  /**\n   * Get a node from the bound definition-cache.\n   *\n   * @param {string} identifier\n   * @returns {Definition|null}\n   */\n  function getDefinition(identifier) {\n    const id = clean(identifier)\n    return id && own.call(cache, id) ? cache[id] : null\n  }\n}\n\n/**\n * @param {string} [value]\n * @returns {string}\n */\nfunction clean(value) {\n  return String(value || '').toUpperCase()\n}\n","/**\n * @typedef {import('mdast').BlockContent} BlockContent\n * @typedef {import('mdast').FootnoteDefinition} FootnoteDefinition\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('./index.js').H} H\n */\n\nimport {sanitizeUri} from 'micromark-util-sanitize-uri'\nimport {u} from 'unist-builder'\nimport {all} from './traverse.js'\nimport {wrap} from './wrap.js'\n\n/**\n * @param {H} h\n */\nexport function footer(h) {\n  let index = -1\n  /** @type {Array<ElementContent>} */\n  const listItems = []\n\n  while (++index < h.footnoteOrder.length) {\n    const def = h.footnoteById[h.footnoteOrder[index].toUpperCase()]\n\n    if (!def) {\n      continue\n    }\n\n    const content = all(h, def)\n    const id = String(def.identifier)\n    const safeId = sanitizeUri(id.toLowerCase())\n    let referenceIndex = 0\n    /** @type {Array<ElementContent>} */\n    const backReferences = []\n\n    while (++referenceIndex <= h.footnoteCounts[id]) {\n      /** @type {Element} */\n      const backReference = {\n        type: 'element',\n        tagName: 'a',\n        properties: {\n          href:\n            '#' +\n            h.clobberPrefix +\n            'fnref-' +\n            safeId +\n            (referenceIndex > 1 ? '-' + referenceIndex : ''),\n          dataFootnoteBackref: true,\n          className: ['data-footnote-backref'],\n          ariaLabel: h.footnoteBackLabel\n        },\n        children: [{type: 'text', value: '↩'}]\n      }\n\n      if (referenceIndex > 1) {\n        backReference.children.push({\n          type: 'element',\n          tagName: 'sup',\n          children: [{type: 'text', value: String(referenceIndex)}]\n        })\n      }\n\n      if (backReferences.length > 0) {\n        backReferences.push({type: 'text', value: ' '})\n      }\n\n      backReferences.push(backReference)\n    }\n\n    const tail = content[content.length - 1]\n\n    if (tail && tail.type === 'element' && tail.tagName === 'p') {\n      const tailTail = tail.children[tail.children.length - 1]\n      if (tailTail && tailTail.type === 'text') {\n        tailTail.value += ' '\n      } else {\n        tail.children.push({type: 'text', value: ' '})\n      }\n\n      tail.children.push(...backReferences)\n    } else {\n      content.push(...backReferences)\n    }\n\n    /** @type {Element} */\n    const listItem = {\n      type: 'element',\n      tagName: 'li',\n      properties: {id: h.clobberPrefix + 'fn-' + safeId},\n      children: wrap(content, true)\n    }\n\n    if (def.position) {\n      listItem.position = def.position\n    }\n\n    listItems.push(listItem)\n  }\n\n  if (listItems.length === 0) {\n    return null\n  }\n\n  return {\n    type: 'element',\n    tagName: 'section',\n    properties: {dataFootnotes: true, className: ['footnotes']},\n    children: [\n      {\n        type: 'element',\n        tagName: 'h2',\n        properties: {id: 'footnote-label', className: ['sr-only']},\n        children: [u('text', h.footnoteLabel)]\n      },\n      {type: 'text', value: '\\n'},\n      {\n        type: 'element',\n        tagName: 'ol',\n        properties: {},\n        children: wrap(listItems, true)\n      },\n      {type: 'text', value: '\\n'}\n    ]\n  }\n}\n","/**\n * @typedef {import('mdast').Blockquote} Blockquote\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {wrap} from '../wrap.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Blockquote} node\n */\nexport function blockquote(h, node) {\n  return h(node, 'blockquote', wrap(all(h, node), true))\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Text} Text\n * @typedef {import('mdast').Break} Break\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {Break} node\n * @returns {Array<Element|Text>}\n */\nexport function hardBreak(h, node) {\n  return [h(node, 'br'), u('text', '\\n')]\n}\n","/**\n * @typedef {import('mdast').Code} Code\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {Code} node\n */\nexport function code(h, node) {\n  const value = node.value ? node.value + '\\n' : ''\n  // To do: next major, use `node.lang` w/o regex, the splitting’s been going\n  // on for years in remark now.\n  const lang = node.lang && node.lang.match(/^[^ \\t]+(?=[ \\t]|$)/)\n  /** @type {Properties} */\n  const props = {}\n\n  if (lang) {\n    props.className = ['language-' + lang]\n  }\n\n  const code = h(node, 'code', props, [u('text', value)])\n\n  if (node.meta) {\n    code.data = {meta: node.meta}\n  }\n\n  return h(node.position, 'pre', [code])\n}\n","/**\n * @typedef {import('mdast').Delete} Delete\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Delete} node\n */\nexport function strikethrough(h, node) {\n  return h(node, 'del', all(h, node))\n}\n","/**\n * @typedef {import('mdast').Emphasis} Emphasis\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Emphasis} node\n */\nexport function emphasis(h, node) {\n  return h(node, 'em', all(h, node))\n}\n","/**\n * @typedef {import('mdast').FootnoteReference} FootnoteReference\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {sanitizeUri} from 'micromark-util-sanitize-uri'\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {FootnoteReference} node\n */\nexport function footnoteReference(h, node) {\n  const id = String(node.identifier)\n  const safeId = sanitizeUri(id.toLowerCase())\n  const index = h.footnoteOrder.indexOf(id)\n  /** @type {number} */\n  let counter\n\n  if (index === -1) {\n    h.footnoteOrder.push(id)\n    h.footnoteCounts[id] = 1\n    counter = h.footnoteOrder.length\n  } else {\n    h.footnoteCounts[id]++\n    counter = index + 1\n  }\n\n  const reuseCounter = h.footnoteCounts[id]\n\n  return h(node, 'sup', [\n    h(\n      node.position,\n      'a',\n      {\n        href: '#' + h.clobberPrefix + 'fn-' + safeId,\n        id:\n          h.clobberPrefix +\n          'fnref-' +\n          safeId +\n          (reuseCounter > 1 ? '-' + reuseCounter : ''),\n        dataFootnoteRef: true,\n        ariaDescribedBy: 'footnote-label'\n      },\n      [u('text', String(counter))]\n    )\n  ])\n}\n","/**\n * @typedef {import('mdast').Footnote} Footnote\n * @typedef {import('../index.js').Handler} Handler\n *\n * @todo\n *   `footnote` (or “inline note”) are a pandoc footnotes feature (`^[a note]`)\n *   that does not exist in GFM.\n *   We still have support for it, so that things remain working with\n *   `micromark-extension-footnote` and `mdast-util-footnote`, but in the future\n *   we might be able to remove it?\n */\n\nimport {footnoteReference} from './footnote-reference.js'\n\n/**\n * @type {Handler}\n * @param {Footnote} node\n */\nexport function footnote(h, node) {\n  const footnoteById = h.footnoteById\n  let no = 1\n\n  while (no in footnoteById) no++\n\n  const identifier = String(no)\n\n  footnoteById[identifier] = {\n    type: 'footnoteDefinition',\n    identifier,\n    children: [{type: 'paragraph', children: node.children}],\n    position: node.position\n  }\n\n  return footnoteReference(h, {\n    type: 'footnoteReference',\n    identifier,\n    position: node.position\n  })\n}\n","/**\n * @typedef {import('mdast').Heading} Heading\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Heading} node\n */\nexport function heading(h, node) {\n  return h(node, 'h' + node.depth, all(h, node))\n}\n","/**\n * @typedef {import('mdast').HTML} HTML\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * Return either a `raw` node in dangerous mode, otherwise nothing.\n *\n * @type {Handler}\n * @param {HTML} node\n */\nexport function html(h, node) {\n  return h.dangerous ? h.augment(node, u('raw', node.value)) : null\n}\n","/**\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('mdast').ImageReference} ImageReference\n * @typedef {import('./index.js').Handler} Handler\n * @typedef {import('./index.js').Content} Content\n */\n\nimport {u} from 'unist-builder'\nimport {all} from './traverse.js'\n\n/**\n * Return the content of a reference without definition as plain text.\n *\n * @type {Handler}\n * @param {ImageReference|LinkReference} node\n * @returns {Content|Array<Content>}\n */\nexport function revert(h, node) {\n  const subtype = node.referenceType\n  let suffix = ']'\n\n  if (subtype === 'collapsed') {\n    suffix += '[]'\n  } else if (subtype === 'full') {\n    suffix += '[' + (node.label || node.identifier) + ']'\n  }\n\n  if (node.type === 'imageReference') {\n    return u('text', '![' + node.alt + suffix)\n  }\n\n  const contents = all(h, node)\n  const head = contents[0]\n\n  if (head && head.type === 'text') {\n    head.value = '[' + head.value\n  } else {\n    contents.unshift(u('text', '['))\n  }\n\n  const tail = contents[contents.length - 1]\n\n  if (tail && tail.type === 'text') {\n    tail.value += suffix\n  } else {\n    contents.push(u('text', suffix))\n  }\n\n  return contents\n}\n","/**\n * @typedef {import('mdast').ImageReference} ImageReference\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport normalize from 'mdurl/encode.js'\nimport {revert} from '../revert.js'\n\n/**\n * @type {Handler}\n * @param {ImageReference} node\n */\nexport function imageReference(h, node) {\n  const def = h.definition(node.identifier)\n\n  if (!def) {\n    return revert(h, node)\n  }\n\n  /** @type {Properties} */\n  const props = {src: normalize(def.url || ''), alt: node.alt}\n\n  if (def.title !== null && def.title !== undefined) {\n    props.title = def.title\n  }\n\n  return h(node, 'img', props)\n}\n","/**\n * @typedef {import('mdast').Image} Image\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport normalize from 'mdurl/encode.js'\n\n/**\n * @type {Handler}\n * @param {Image} node\n */\nexport function image(h, node) {\n  /** @type {Properties} */\n  const props = {src: normalize(node.url), alt: node.alt}\n\n  if (node.title !== null && node.title !== undefined) {\n    props.title = node.title\n  }\n\n  return h(node, 'img', props)\n}\n","/**\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {InlineCode} node\n */\nexport function inlineCode(h, node) {\n  return h(node, 'code', [u('text', node.value.replace(/\\r?\\n|\\r/g, ' '))])\n}\n","/**\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport normalize from 'mdurl/encode.js'\nimport {revert} from '../revert.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {LinkReference} node\n */\nexport function linkReference(h, node) {\n  const def = h.definition(node.identifier)\n\n  if (!def) {\n    return revert(h, node)\n  }\n\n  /** @type {Properties} */\n  const props = {href: normalize(def.url || '')}\n\n  if (def.title !== null && def.title !== undefined) {\n    props.title = def.title\n  }\n\n  return h(node, 'a', props, all(h, node))\n}\n","/**\n * @typedef {import('mdast').Link} Link\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport normalize from 'mdurl/encode.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Link} node\n */\nexport function link(h, node) {\n  /** @type {Properties} */\n  const props = {href: normalize(node.url)}\n\n  if (node.title !== null && node.title !== undefined) {\n    props.title = node.title\n  }\n\n  return h(node, 'a', props, all(h, node))\n}\n","/**\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').List} List\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('hast').Element} Element\n * @typedef {import('../index.js').Handler} Handler\n * @typedef {import('../index.js').Content} Content\n */\n\nimport {u} from 'unist-builder'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {ListItem} node\n * @param {List} parent\n */\nexport function listItem(h, node, parent) {\n  const result = all(h, node)\n  const loose = parent ? listLoose(parent) : listItemLoose(node)\n  /** @type {Properties} */\n  const props = {}\n  /** @type {Array<Content>} */\n  const wrapped = []\n\n  if (typeof node.checked === 'boolean') {\n    /** @type {Element} */\n    let paragraph\n\n    if (\n      result[0] &&\n      result[0].type === 'element' &&\n      result[0].tagName === 'p'\n    ) {\n      paragraph = result[0]\n    } else {\n      paragraph = h(null, 'p', [])\n      result.unshift(paragraph)\n    }\n\n    if (paragraph.children.length > 0) {\n      paragraph.children.unshift(u('text', ' '))\n    }\n\n    paragraph.children.unshift(\n      h(null, 'input', {\n        type: 'checkbox',\n        checked: node.checked,\n        disabled: true\n      })\n    )\n\n    // According to github-markdown-css, this class hides bullet.\n    // See: <https://github.com/sindresorhus/github-markdown-css>.\n    props.className = ['task-list-item']\n  }\n\n  let index = -1\n\n  while (++index < result.length) {\n    const child = result[index]\n\n    // Add eols before nodes, except if this is a loose, first paragraph.\n    if (\n      loose ||\n      index !== 0 ||\n      child.type !== 'element' ||\n      child.tagName !== 'p'\n    ) {\n      wrapped.push(u('text', '\\n'))\n    }\n\n    if (child.type === 'element' && child.tagName === 'p' && !loose) {\n      wrapped.push(...child.children)\n    } else {\n      wrapped.push(child)\n    }\n  }\n\n  const tail = result[result.length - 1]\n\n  // Add a final eol.\n  if (tail && (loose || !('tagName' in tail) || tail.tagName !== 'p')) {\n    wrapped.push(u('text', '\\n'))\n  }\n\n  return h(node, 'li', props, wrapped)\n}\n\n/**\n * @param {List} node\n * @return {Boolean}\n */\nfunction listLoose(node) {\n  let loose = node.spread\n  const children = node.children\n  let index = -1\n\n  while (!loose && ++index < children.length) {\n    loose = listItemLoose(children[index])\n  }\n\n  return Boolean(loose)\n}\n\n/**\n * @param {ListItem} node\n * @return {Boolean}\n */\nfunction listItemLoose(node) {\n  const spread = node.spread\n\n  return spread === undefined || spread === null\n    ? node.children.length > 1\n    : spread\n}\n","/**\n * @typedef {import('mdast').List} List\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {wrap} from '../wrap.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {List} node\n * @returns {Element}\n */\nexport function list(h, node) {\n  /** @type {Properties} */\n  const props = {}\n  const name = node.ordered ? 'ol' : 'ul'\n  const items = all(h, node)\n  let index = -1\n\n  if (typeof node.start === 'number' && node.start !== 1) {\n    props.start = node.start\n  }\n\n  // Like GitHub, add a class for custom styling.\n  while (++index < items.length) {\n    const item = items[index]\n\n    if (\n      item.type === 'element' &&\n      item.tagName === 'li' &&\n      item.properties &&\n      Array.isArray(item.properties.className) &&\n      item.properties.className.includes('task-list-item')\n    ) {\n      props.className = ['contains-task-list']\n      break\n    }\n  }\n\n  return h(node, name, props, wrap(items, true))\n}\n","/**\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Paragraph} node\n */\nexport function paragraph(h, node) {\n  return h(node, 'p', all(h, node))\n}\n","/**\n * @typedef {import('mdast').Root} Root\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\nimport {all} from '../traverse.js'\nimport {wrap} from '../wrap.js'\n\n/**\n * @type {Handler}\n * @param {Root} node\n */\nexport function root(h, node) {\n  // @ts-expect-error `root`s are also fine.\n  return h.augment(node, u('root', wrap(all(h, node))))\n}\n","/**\n * @typedef {import('mdast').Strong} Strong\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Strong} node\n */\nexport function strong(h, node) {\n  return h(node, 'strong', all(h, node))\n}\n","/**\n * @typedef {import('mdast').Table} Table\n * @typedef {import('mdast').TableCell} TableCell\n * @typedef {import('hast').Element} Element\n * @typedef {import('../index.js').Handler} Handler\n * @typedef {import('../index.js').Content} Content\n */\n\nimport {pointStart, pointEnd} from 'unist-util-position'\nimport {wrap} from '../wrap.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Table} node\n */\nexport function table(h, node) {\n  const rows = node.children\n  let index = -1\n  const align = node.align || []\n  /** @type {Array<Element>} */\n  const result = []\n\n  while (++index < rows.length) {\n    const row = rows[index].children\n    const name = index === 0 ? 'th' : 'td'\n    /** @type {Array<Content>} */\n    const out = []\n    let cellIndex = -1\n    const length = node.align ? align.length : row.length\n\n    while (++cellIndex < length) {\n      const cell = row[cellIndex]\n      out.push(\n        h(cell, name, {align: align[cellIndex]}, cell ? all(h, cell) : [])\n      )\n    }\n\n    result[index] = h(rows[index], 'tr', wrap(out, true))\n  }\n\n  return h(\n    node,\n    'table',\n    wrap(\n      [h(result[0].position, 'thead', wrap([result[0]], true))].concat(\n        result[1]\n          ? h(\n              {\n                start: pointStart(result[1]),\n                end: pointEnd(result[result.length - 1])\n              },\n              'tbody',\n              wrap(result.slice(1), true)\n            )\n          : []\n      ),\n      true\n    )\n  )\n}\n","/**\n * @typedef {import('mdast').Text} Text\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {Text} node\n */\nexport function text(h, node) {\n  return h.augment(\n    node,\n    u('text', String(node.value).replace(/[ \\t]*(\\r?\\n|\\r)[ \\t]*/g, '$1'))\n  )\n}\n","/**\n * @typedef {import('mdast').ThematicBreak} ThematicBreak\n * @typedef {import('hast').Element} Element\n * @typedef {import('../index.js').Handler} Handler\n */\n\n/**\n * @type {Handler}\n * @param {ThematicBreak} [node]\n * @returns {Element}\n */\nexport function thematicBreak(h, node) {\n  return h(node, 'hr')\n}\n","import {blockquote} from './blockquote.js'\nimport {hardBreak} from './break.js'\nimport {code} from './code.js'\nimport {strikethrough} from './delete.js'\nimport {emphasis} from './emphasis.js'\nimport {footnoteReference} from './footnote-reference.js'\nimport {footnote} from './footnote.js'\nimport {heading} from './heading.js'\nimport {html} from './html.js'\nimport {imageReference} from './image-reference.js'\nimport {image} from './image.js'\nimport {inlineCode} from './inline-code.js'\nimport {linkReference} from './link-reference.js'\nimport {link} from './link.js'\nimport {listItem} from './list-item.js'\nimport {list} from './list.js'\nimport {paragraph} from './paragraph.js'\nimport {root} from './root.js'\nimport {strong} from './strong.js'\nimport {table} from './table.js'\nimport {text} from './text.js'\nimport {thematicBreak} from './thematic-break.js'\n\nexport const handlers = {\n  blockquote,\n  break: hardBreak,\n  code,\n  delete: strikethrough,\n  emphasis,\n  footnoteReference,\n  footnote,\n  heading,\n  html,\n  imageReference,\n  image,\n  inlineCode,\n  linkReference,\n  link,\n  listItem,\n  list,\n  paragraph,\n  root,\n  strong,\n  table,\n  text,\n  thematicBreak,\n  toml: ignore,\n  yaml: ignore,\n  definition: ignore,\n  footnoteDefinition: ignore\n}\n\n// Return nothing for nodes that are ignored.\nfunction ignore() {\n  return null\n}\n","/**\n * @typedef {import('mdast').Root|import('mdast').Parent['children'][number]} MdastNode\n * @typedef {import('hast').Root|import('hast').Parent['children'][number]} HastNode\n * @typedef {import('mdast').Parent} Parent\n * @typedef {import('mdast').Definition} Definition\n * @typedef {import('mdast').FootnoteDefinition} FootnoteDefinition\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('hast').Text} Text\n * @typedef {import('hast').Comment} Comment\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').ElementContent} Content\n * @typedef {import('unist-util-position').PositionLike} PositionLike\n *\n * @typedef EmbeddedHastFields\n * @property {string} [hName] Defines the tag name of an element\n * @property {Properties} [hProperties] Defines the properties of an element\n * @property {Array<Content>} [hChildren] Defines the (hast) children of an element\n *\n * @typedef {Record<string, unknown> & EmbeddedHastFields} Data unist data with embedded hast fields\n *\n * @typedef {MdastNode & {data?: Data}} NodeWithData unist node with embedded hast data\n *\n * @callback Handler\n * @param {H} h Handle context\n * @param {any} node mdast node to handle\n * @param {Parent|null} parent Parent of `node`\n * @returns {Content|Array<Content>|null|undefined} hast node\n *\n * @callback HFunctionProps\n * @param {MdastNode|PositionLike|null|undefined} node mdast node or unist position\n * @param {string} tagName HTML tag name\n * @param {Properties} props Properties\n * @param {Array<Content>?} [children] hast content\n * @returns {Element}\n *\n * @callback HFunctionNoProps\n * @param {MdastNode|PositionLike|null|undefined} node mdast node or unist position\n * @param {string} tagName HTML tag name\n * @param {Array<Content>?} [children] hast content\n * @returns {Element}\n *\n * @typedef HFields\n * @property {boolean} dangerous Whether HTML is allowed\n * @property {string} clobberPrefix Prefix to use to prevent DOM clobbering\n * @property {string} footnoteLabel Label to use to introduce the footnote section\n * @property {string} footnoteBackLabel Label to use to go back to a footnote call from the footnote section\n * @property {(identifier: string) => Definition|null} definition Definition cache\n * @property {Record<string, FootnoteDefinition>} footnoteById Footnote cache\n * @property {Array<string>} footnoteOrder Order in which footnotes occur\n * @property {Record<string, number>} footnoteCounts Counts the same footnote was used\n * @property {Handlers} handlers Applied handlers\n * @property {Handler} unknownHandler Handler for any none not in `passThrough` or otherwise handled\n * @property {(left: NodeWithData|PositionLike|null|undefined, right: Content) => Content} augment Like `h` but lower-level and usable on non-elements.\n * @property {Array<string>} passThrough List of node types to pass through untouched (except for their children).\n *\n * @typedef Options\n * @property {boolean} [allowDangerousHtml=false]\n *   Whether to allow `html` nodes and inject them as `raw` HTML\n * @property {string} [clobberPrefix='user-content-']\n *   Prefix to use before the `id` attribute to prevent it from *clobbering*.\n *   attributes.\n *   DOM clobbering is this:\n *\n *   ```html\n *   <p id=x></p>\n *   <script>alert(x)</script>\n *   ```\n *\n *   Elements by their ID are made available in browsers on the `window` object.\n *   Using a prefix prevents this from being a problem.\n * @property {string} [footnoteLabel='Footnotes']\n *   Label to use for the footnotes section.\n *   Affects screen reader users.\n *   Change it if you’re authoring in a different language.\n * @property {string} [footnoteBackLabel='Back to content']\n *   Label to use from backreferences back to their footnote call.\n *   Affects screen reader users.\n *   Change it if you’re authoring in a different language.\n * @property {Handlers} [handlers]\n *   Object mapping mdast nodes to functions handling them\n * @property {Array<string>} [passThrough]\n *   List of custom mdast node types to pass through (keep) in hast\n * @property {Handler} [unknownHandler]\n *   Handler for all unknown nodes.\n *\n * @typedef {Record<string, Handler>} Handlers\n *   Map of node types to handlers\n * @typedef {HFunctionProps & HFunctionNoProps & HFields} H\n *   Handle context\n */\n\nimport {u} from 'unist-builder'\nimport {visit} from 'unist-util-visit'\nimport {pointStart, pointEnd} from 'unist-util-position'\nimport {generated} from 'unist-util-generated'\nimport {definitions} from 'mdast-util-definitions'\nimport {one} from './traverse.js'\nimport {footer} from './footer.js'\nimport {handlers} from './handlers/index.js'\n\nconst own = {}.hasOwnProperty\n\n/**\n * Factory to transform.\n * @param {MdastNode} tree mdast node\n * @param {Options} [options] Configuration\n * @returns {H} `h` function\n */\nfunction factory(tree, options) {\n  const settings = options || {}\n  const dangerous = settings.allowDangerousHtml || false\n  /** @type {Record<string, FootnoteDefinition>} */\n  const footnoteById = {}\n\n  h.dangerous = dangerous\n  h.clobberPrefix =\n    settings.clobberPrefix === undefined || settings.clobberPrefix === null\n      ? 'user-content-'\n      : settings.clobberPrefix\n  h.footnoteLabel = settings.footnoteLabel || 'Footnotes'\n  h.footnoteBackLabel = settings.footnoteBackLabel || 'Back to content'\n  h.definition = definitions(tree)\n  h.footnoteById = footnoteById\n  /** @type {Array<string>} */\n  h.footnoteOrder = []\n  /** @type {Record<string, number>} */\n  h.footnoteCounts = {}\n  h.augment = augment\n  h.handlers = {...handlers, ...settings.handlers}\n  h.unknownHandler = settings.unknownHandler\n  h.passThrough = settings.passThrough\n\n  visit(tree, 'footnoteDefinition', (definition) => {\n    const id = String(definition.identifier).toUpperCase()\n\n    // Mimick CM behavior of link definitions.\n    // See: <https://github.com/syntax-tree/mdast-util-definitions/blob/8290999/index.js#L26>.\n    if (!own.call(footnoteById, id)) {\n      footnoteById[id] = definition\n    }\n  })\n\n  // @ts-expect-error Hush, it’s fine!\n  return h\n\n  /**\n   * Finalise the created `right`, a hast node, from `left`, an mdast node.\n   * @param {(NodeWithData|PositionLike)?} left\n   * @param {Content} right\n   * @returns {Content}\n   */\n  function augment(left, right) {\n    // Handle `data.hName`, `data.hProperties, `data.hChildren`.\n    if (left && 'data' in left && left.data) {\n      /** @type {Data} */\n      const data = left.data\n\n      if (data.hName) {\n        if (right.type !== 'element') {\n          right = {\n            type: 'element',\n            tagName: '',\n            properties: {},\n            children: []\n          }\n        }\n\n        right.tagName = data.hName\n      }\n\n      if (right.type === 'element' && data.hProperties) {\n        right.properties = {...right.properties, ...data.hProperties}\n      }\n\n      if ('children' in right && right.children && data.hChildren) {\n        right.children = data.hChildren\n      }\n    }\n\n    if (left) {\n      const ctx = 'type' in left ? left : {position: left}\n\n      if (!generated(ctx)) {\n        right.position = {start: pointStart(ctx), end: pointEnd(ctx)}\n      }\n    }\n\n    return right\n  }\n\n  /**\n   * Create an element for `node`.\n   *\n   * @type {HFunctionProps}\n   */\n  function h(node, tagName, props, children) {\n    if (Array.isArray(props)) {\n      children = props\n      props = {}\n    }\n\n    // @ts-expect-error augmenting an element yields an element.\n    return augment(node, {\n      type: 'element',\n      tagName,\n      properties: props || {},\n      children: children || []\n    })\n  }\n}\n\n/**\n * Transform `tree` (an mdast node) to a hast node.\n *\n * @param {MdastNode} tree mdast node\n * @param {Options} [options] Configuration\n * @returns {HastNode|null|undefined} hast node\n */\nexport function toHast(tree, options) {\n  const h = factory(tree, options)\n  const node = one(h, tree, null)\n  const foot = footer(h)\n\n  if (foot) {\n    // @ts-expect-error If there’s a footer, there were definitions, meaning block\n    // content.\n    // So assume `node` is a parent node.\n    node.children.push(u('text', '\\n'), foot)\n  }\n\n  return Array.isArray(node) ? {type: 'root', children: node} : node\n}\n\nexport {handlers as defaultHandlers} from './handlers/index.js'\n","/**\n * @typedef {import('mdast').Root|import('mdast').Parent['children'][number]} MdastNode\n * @typedef {import('./index.js').H} H\n * @typedef {import('./index.js').Handler} Handler\n * @typedef {import('./index.js').Content} Content\n */\n\nimport {u} from 'unist-builder'\n\nconst own = {}.hasOwnProperty\n\n/**\n * Transform an unknown node.\n * @type {Handler}\n * @param {MdastNode} node\n */\nfunction unknown(h, node) {\n  const data = node.data || {}\n\n  if (\n    'value' in node &&\n    !(\n      own.call(data, 'hName') ||\n      own.call(data, 'hProperties') ||\n      own.call(data, 'hChildren')\n    )\n  ) {\n    return h.augment(node, u('text', node.value))\n  }\n\n  return h(node, 'div', all(h, node))\n}\n\n/**\n * @type {Handler}\n * @param {MdastNode} node\n */\nexport function one(h, node, parent) {\n  const type = node && node.type\n  /** @type {Handler} */\n  let fn\n\n  // Fail on non-nodes.\n  if (!type) {\n    throw new Error('Expected node, got `' + node + '`')\n  }\n\n  if (own.call(h.handlers, type)) {\n    fn = h.handlers[type]\n  } else if (h.passThrough && h.passThrough.includes(type)) {\n    fn = returnNode\n  } else {\n    fn = h.unknownHandler\n  }\n\n  return (typeof fn === 'function' ? fn : unknown)(h, node, parent)\n}\n\n/**\n * @type {Handler}\n * @param {MdastNode} node\n */\nfunction returnNode(h, node) {\n  // @ts-expect-error: Pass through custom node.\n  return 'children' in node ? {...node, children: all(h, node)} : node\n}\n\n/**\n * @param {H} h\n * @param {MdastNode} parent\n */\nexport function all(h, parent) {\n  /** @type {Array<Content>} */\n  const values = []\n\n  if ('children' in parent) {\n    const nodes = parent.children\n    let index = -1\n\n    while (++index < nodes.length) {\n      const result = one(h, nodes[index], parent)\n\n      if (result) {\n        if (index && nodes[index - 1].type === 'break') {\n          if (!Array.isArray(result) && result.type === 'text') {\n            result.value = result.value.replace(/^\\s+/, '')\n          }\n\n          if (!Array.isArray(result) && result.type === 'element') {\n            const head = result.children[0]\n\n            if (head && head.type === 'text') {\n              head.value = head.value.replace(/^\\s+/, '')\n            }\n          }\n        }\n\n        if (Array.isArray(result)) {\n          values.push(...result)\n        } else {\n          values.push(result)\n        }\n      }\n    }\n  }\n\n  return values\n}\n","/**\n * @typedef {import('./index.js').Content} Content\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * Wrap `nodes` with line feeds between each entry.\n * Optionally adds line feeds at the start and end.\n *\n * @param {Array<Content>} nodes\n * @param {boolean} [loose=false]\n * @returns {Array<Content>}\n */\nexport function wrap(nodes, loose) {\n  /** @type {Array<Content>} */\n  const result = []\n  let index = -1\n\n  if (loose) {\n    result.push(u('text', '\\n'))\n  }\n\n  while (++index < nodes.length) {\n    if (index) result.push(u('text', '\\n'))\n    result.push(nodes[index])\n  }\n\n  if (loose && nodes.length > 0) {\n    result.push(u('text', '\\n'))\n  }\n\n  return result\n}\n","// This module is generated by `script/`.\n//\n// CommonMark handles attention (emphasis, strong) markers based on what comes\n// before or after them.\n// One such difference is if those characters are Unicode punctuation.\n// This script is generated from the Unicode data.\nexport const unicodePunctuationRegex =\n  /[!-/:-@[-`{-~\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n */\nimport {unicodePunctuationRegex} from './lib/unicode-punctuation-regex.js'\n/**\n * Check whether the character code represents an ASCII alpha (`a` through `z`,\n * case insensitive).\n *\n * An **ASCII alpha** is an ASCII upper alpha or ASCII lower alpha.\n *\n * An **ASCII upper alpha** is a character in the inclusive range U+0041 (`A`)\n * to U+005A (`Z`).\n *\n * An **ASCII lower alpha** is a character in the inclusive range U+0061 (`a`)\n * to U+007A (`z`).\n */\n\nexport const asciiAlpha = regexCheck(/[A-Za-z]/)\n/**\n * Check whether the character code represents an ASCII digit (`0` through `9`).\n *\n * An **ASCII digit** is a character in the inclusive range U+0030 (`0`) to\n * U+0039 (`9`).\n */\n\nexport const asciiDigit = regexCheck(/\\d/)\n/**\n * Check whether the character code represents an ASCII hex digit (`a` through\n * `f`, case insensitive, or `0` through `9`).\n *\n * An **ASCII hex digit** is an ASCII digit (see `asciiDigit`), ASCII upper hex\n * digit, or an ASCII lower hex digit.\n *\n * An **ASCII upper hex digit** is a character in the inclusive range U+0041\n * (`A`) to U+0046 (`F`).\n *\n * An **ASCII lower hex digit** is a character in the inclusive range U+0061\n * (`a`) to U+0066 (`f`).\n */\n\nexport const asciiHexDigit = regexCheck(/[\\dA-Fa-f]/)\n/**\n * Check whether the character code represents an ASCII alphanumeric (`a`\n * through `z`, case insensitive, or `0` through `9`).\n *\n * An **ASCII alphanumeric** is an ASCII digit (see `asciiDigit`) or ASCII alpha\n * (see `asciiAlpha`).\n */\n\nexport const asciiAlphanumeric = regexCheck(/[\\dA-Za-z]/)\n/**\n * Check whether the character code represents ASCII punctuation.\n *\n * An **ASCII punctuation** is a character in the inclusive ranges U+0021\n * EXCLAMATION MARK (`!`) to U+002F SLASH (`/`), U+003A COLON (`:`) to U+0040 AT\n * SIGN (`@`), U+005B LEFT SQUARE BRACKET (`[`) to U+0060 GRAVE ACCENT\n * (`` ` ``), or U+007B LEFT CURLY BRACE (`{`) to U+007E TILDE (`~`).\n */\n\nexport const asciiPunctuation = regexCheck(/[!-/:-@[-`{-~]/)\n/**\n * Check whether the character code represents an ASCII atext.\n *\n * atext is an ASCII alphanumeric (see `asciiAlphanumeric`), or a character in\n * the inclusive ranges U+0023 NUMBER SIGN (`#`) to U+0027 APOSTROPHE (`'`),\n * U+002A ASTERISK (`*`), U+002B PLUS SIGN (`+`), U+002D DASH (`-`), U+002F\n * SLASH (`/`), U+003D EQUALS TO (`=`), U+003F QUESTION MARK (`?`), U+005E\n * CARET (`^`) to U+0060 GRAVE ACCENT (`` ` ``), or U+007B LEFT CURLY BRACE\n * (`{`) to U+007E TILDE (`~`).\n *\n * See:\n * **\\[RFC5322]**:\n * [Internet Message Format](https://tools.ietf.org/html/rfc5322).\n * P. Resnick.\n * IETF.\n */\n\nexport const asciiAtext = regexCheck(/[#-'*+\\--9=?A-Z^-~]/)\n/**\n * Check whether a character code is an ASCII control character.\n *\n * An **ASCII control** is a character in the inclusive range U+0000 NULL (NUL)\n * to U+001F (US), or U+007F (DEL).\n *\n * @param {Code} code\n * @returns {code is number}\n */\n\nexport function asciiControl(code) {\n  return (\n    // Special whitespace codes (which have negative values), C0 and Control\n    // character DEL\n    code !== null && (code < 32 || code === 127)\n  )\n}\n/**\n * Check whether a character code is a markdown line ending (see\n * `markdownLineEnding`) or markdown space (see `markdownSpace`).\n *\n * @param {Code} code\n * @returns {code is number}\n */\n\nexport function markdownLineEndingOrSpace(code) {\n  return code !== null && (code < 0 || code === 32)\n}\n/**\n * Check whether a character code is a markdown line ending.\n *\n * A **markdown line ending** is the virtual characters M-0003 CARRIAGE RETURN\n * LINE FEED (CRLF), M-0004 LINE FEED (LF) and M-0005 CARRIAGE RETURN (CR).\n *\n * In micromark, the actual character U+000A LINE FEED (LF) and U+000D CARRIAGE\n * RETURN (CR) are replaced by these virtual characters depending on whether\n * they occurred together.\n *\n * @param {Code} code\n * @returns {code is number}\n */\n\nexport function markdownLineEnding(code) {\n  return code !== null && code < -2\n}\n/**\n * Check whether a character code is a markdown space.\n *\n * A **markdown space** is the concrete character U+0020 SPACE (SP) and the\n * virtual characters M-0001 VIRTUAL SPACE (VS) and M-0002 HORIZONTAL TAB (HT).\n *\n * In micromark, the actual character U+0009 CHARACTER TABULATION (HT) is\n * replaced by one M-0002 HORIZONTAL TAB (HT) and between 0 and 3 M-0001 VIRTUAL\n * SPACE (VS) characters, depending on the column at which the tab occurred.\n *\n * @param {Code} code\n * @returns {code is number}\n */\n\nexport function markdownSpace(code) {\n  return code === -2 || code === -1 || code === 32\n}\n/**\n * Check whether the character code represents Unicode whitespace.\n *\n * Note that this does handle micromark specific markdown whitespace characters.\n * See `markdownLineEndingOrSpace` to check that.\n *\n * A **Unicode whitespace** is a character in the Unicode `Zs` (Separator,\n * Space) category, or U+0009 CHARACTER TABULATION (HT), U+000A LINE FEED (LF),\n * U+000C (FF), or U+000D CARRIAGE RETURN (CR) (**\\[UNICODE]**).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n */\n\nexport const unicodeWhitespace = regexCheck(/\\s/)\n/**\n * Check whether the character code represents Unicode punctuation.\n *\n * A **Unicode punctuation** is a character in the Unicode `Pc` (Punctuation,\n * Connector), `Pd` (Punctuation, Dash), `Pe` (Punctuation, Close), `Pf`\n * (Punctuation, Final quote), `Pi` (Punctuation, Initial quote), `Po`\n * (Punctuation, Other), or `Ps` (Punctuation, Open) categories, or an ASCII\n * punctuation (see `asciiPunctuation`).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n */\n// Size note: removing ASCII from the regex and using `asciiPunctuation` here\n// In fact adds to the bundle size.\n\nexport const unicodePunctuation = regexCheck(unicodePunctuationRegex)\n/**\n * Create a code check from a regex.\n *\n * @param {RegExp} regex\n * @returns {(code: Code) => code is number}\n */\n\nfunction regexCheck(regex) {\n  return check\n  /**\n   * Check whether a code matches the bound regex.\n   *\n   * @param {Code} code Character code\n   * @returns {code is number} Whether the character code matches the bound regex\n   */\n\n  function check(code) {\n    return code !== null && regex.test(String.fromCharCode(code))\n  }\n}\n","const characterReferences = {'\"': 'quot', '&': 'amp', '<': 'lt', '>': 'gt'}\n\n/**\n * Encode only the dangerous HTML characters.\n *\n * This ensures that certain characters which have special meaning in HTML are\n * dealt with.\n * Technically, we can skip `>` and `\"` in many cases, but CM includes them.\n *\n * @param {string} value\n * @returns {string}\n */\nexport function encode(value) {\n  return value.replace(/[\"&<>]/g, replace)\n\n  /**\n   * @param {string} value\n   * @returns {string}\n   */\n  function replace(value) {\n    // @ts-expect-error Hush, it’s fine.\n    return '&' + characterReferences[value] + ';'\n  }\n}\n","import {asciiAlphanumeric} from 'micromark-util-character'\nimport {encode} from 'micromark-util-encode'\n\n/**\n * Make a value safe for injection as a URL.\n *\n * This encodes unsafe characters with percent-encoding and skips already\n * encoded sequences (see `normalizeUri` below).\n * Further unsafe characters are encoded as character references (see\n * `micromark-util-encode`).\n *\n * Then, a regex of allowed protocols can be given, in which case the URL is\n * sanitized.\n * For example, `/^(https?|ircs?|mailto|xmpp)$/i` can be used for `a[href]`,\n * or `/^https?$/i` for `img[src]`.\n * If the URL includes an unknown protocol (one not matched by `protocol`, such\n * as a dangerous example, `javascript:`), the value is ignored.\n *\n * @param {string|undefined} url\n * @param {RegExp} [protocol]\n * @returns {string}\n */\nexport function sanitizeUri(url, protocol) {\n  const value = encode(normalizeUri(url || ''))\n\n  if (!protocol) {\n    return value\n  }\n\n  const colon = value.indexOf(':')\n  const questionMark = value.indexOf('?')\n  const numberSign = value.indexOf('#')\n  const slash = value.indexOf('/')\n\n  if (\n    // If there is no protocol, it’s relative.\n    colon < 0 || // If the first colon is after a `?`, `#`, or `/`, it’s not a protocol.\n    (slash > -1 && colon > slash) ||\n    (questionMark > -1 && colon > questionMark) ||\n    (numberSign > -1 && colon > numberSign) || // It is a protocol, it should be allowed.\n    protocol.test(value.slice(0, colon))\n  ) {\n    return value\n  }\n\n  return ''\n}\n/**\n * Normalize a URL (such as used in definitions).\n *\n * Encode unsafe characters with percent-encoding, skipping already encoded\n * sequences.\n *\n * @param {string} value\n * @returns {string}\n */\n\nfunction normalizeUri(value) {\n  /** @type {string[]} */\n  const result = []\n  let index = -1\n  let start = 0\n  let skip = 0\n\n  while (++index < value.length) {\n    const code = value.charCodeAt(index)\n    /** @type {string} */\n\n    let replace = '' // A correct percent encoded value.\n\n    if (\n      code === 37 &&\n      asciiAlphanumeric(value.charCodeAt(index + 1)) &&\n      asciiAlphanumeric(value.charCodeAt(index + 2))\n    ) {\n      skip = 2\n    } // ASCII.\n    else if (code < 128) {\n      if (!/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(code))) {\n        replace = String.fromCharCode(code)\n      }\n    } // Astral.\n    else if (code > 55295 && code < 57344) {\n      const next = value.charCodeAt(index + 1) // A correct surrogate pair.\n\n      if (code < 56320 && next > 56319 && next < 57344) {\n        replace = String.fromCharCode(code, next)\n        skip = 1\n      } // Lone surrogate.\n      else {\n        replace = '\\uFFFD'\n      }\n    } // Unicode.\n    else {\n      replace = String.fromCharCode(code)\n    }\n\n    if (replace) {\n      result.push(value.slice(start, index), encodeURIComponent(replace))\n      start = index + skip + 1\n      replace = ''\n    }\n\n    if (skip) {\n      index += skip\n      skip = 0\n    }\n  }\n\n  return result.join('') + value.slice(start)\n}\n","/**\n * Throw a given error.\n *\n * @param {Error|null|undefined} [error]\n *   Maybe error.\n * @returns {asserts error is null|undefined}\n */\nexport function bail(error) {\n  if (error) {\n    throw error\n  }\n}\n","export default function isPlainObject(value) {\n\tif (Object.prototype.toString.call(value) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tconst prototype = Object.getPrototypeOf(value);\n\treturn prototype === null || prototype === Object.prototype;\n}\n","/**\n * @typedef {(error?: Error|null|undefined, ...output: Array<any>) => void} Callback\n * @typedef {(...input: Array<any>) => any} Middleware\n *\n * @typedef {(...input: Array<any>) => void} Run\n *   Call all middleware.\n * @typedef {(fn: Middleware) => Pipeline} Use\n *   Add `fn` (middleware) to the list.\n * @typedef {{run: Run, use: Use}} Pipeline\n *   Middleware.\n */\n\n/**\n * Create new middleware.\n *\n * @returns {Pipeline}\n */\nexport function trough() {\n  /** @type {Array<Middleware>} */\n  const fns = []\n  /** @type {Pipeline} */\n  const pipeline = {run, use}\n\n  return pipeline\n\n  /** @type {Run} */\n  function run(...values) {\n    let middlewareIndex = -1\n    /** @type {Callback} */\n    const callback = values.pop()\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Expected function as last argument, not ' + callback)\n    }\n\n    next(null, ...values)\n\n    /**\n     * Run the next `fn`, or we’re done.\n     *\n     * @param {Error|null|undefined} error\n     * @param {Array<any>} output\n     */\n    function next(error, ...output) {\n      const fn = fns[++middlewareIndex]\n      let index = -1\n\n      if (error) {\n        callback(error)\n        return\n      }\n\n      // Copy non-nullish input into values.\n      while (++index < values.length) {\n        if (output[index] === null || output[index] === undefined) {\n          output[index] = values[index]\n        }\n      }\n\n      // Save the newly created `output` for the next call.\n      values = output\n\n      // Next or done.\n      if (fn) {\n        wrap(fn, next)(...output)\n      } else {\n        callback(null, ...output)\n      }\n    }\n  }\n\n  /** @type {Use} */\n  function use(middelware) {\n    if (typeof middelware !== 'function') {\n      throw new TypeError(\n        'Expected `middelware` to be a function, not ' + middelware\n      )\n    }\n\n    fns.push(middelware)\n    return pipeline\n  }\n}\n\n/**\n * Wrap `middleware`.\n * Can be sync or async; return a promise, receive a callback, or return new\n * values and errors.\n *\n * @param {Middleware} middleware\n * @param {Callback} callback\n */\nexport function wrap(middleware, callback) {\n  /** @type {boolean} */\n  let called\n\n  return wrapped\n\n  /**\n   * Call `middleware`.\n   * @this {any}\n   * @param {Array<any>} parameters\n   * @returns {void}\n   */\n  function wrapped(...parameters) {\n    const fnExpectsCallback = middleware.length > parameters.length\n    /** @type {any} */\n    let result\n\n    if (fnExpectsCallback) {\n      parameters.push(done)\n    }\n\n    try {\n      result = middleware.apply(this, parameters)\n    } catch (error) {\n      const exception = /** @type {Error} */ (error)\n\n      // Well, this is quite the pickle.\n      // `middleware` received a callback and called it synchronously, but that\n      // threw an error.\n      // The only thing left to do is to throw the thing instead.\n      if (fnExpectsCallback && called) {\n        throw exception\n      }\n\n      return done(exception)\n    }\n\n    if (!fnExpectsCallback) {\n      if (result instanceof Promise) {\n        result.then(then, done)\n      } else if (result instanceof Error) {\n        done(result)\n      } else {\n        then(result)\n      }\n    }\n  }\n\n  /**\n   * Call `callback`, only once.\n   * @type {Callback}\n   */\n  function done(error, ...output) {\n    if (!called) {\n      called = true\n      callback(error, ...output)\n    }\n  }\n\n  /**\n   * Call `done` with one value.\n   *\n   * @param {any} [value]\n   */\n  function then(value) {\n    done(null, value)\n  }\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('vfile').VFileCompatible} VFileCompatible\n * @typedef {import('vfile').VFileValue} VFileValue\n * @typedef {import('..').Processor} Processor\n * @typedef {import('..').Plugin} Plugin\n * @typedef {import('..').Preset} Preset\n * @typedef {import('..').Pluggable} Pluggable\n * @typedef {import('..').PluggableList} PluggableList\n * @typedef {import('..').Transformer} Transformer\n * @typedef {import('..').Parser} Parser\n * @typedef {import('..').Compiler} Compiler\n * @typedef {import('..').RunCallback} RunCallback\n * @typedef {import('..').ProcessCallback} ProcessCallback\n *\n * @typedef Context\n * @property {Node} tree\n * @property {VFile} file\n */\n\nimport {bail} from 'bail'\nimport isBuffer from 'is-buffer'\nimport extend from 'extend'\nimport isPlainObj from 'is-plain-obj'\nimport {trough} from 'trough'\nimport {VFile} from 'vfile'\n\n// Expose a frozen processor.\nexport const unified = base().freeze()\n\nconst own = {}.hasOwnProperty\n\n// Function to create the first processor.\n/**\n * @returns {Processor}\n */\nfunction base() {\n  const transformers = trough()\n  /** @type {Processor['attachers']} */\n  const attachers = []\n  /** @type {Record<string, unknown>} */\n  let namespace = {}\n  /** @type {boolean|undefined} */\n  let frozen\n  let freezeIndex = -1\n\n  // Data management.\n  // @ts-expect-error: overloads are handled.\n  processor.data = data\n  processor.Parser = undefined\n  processor.Compiler = undefined\n\n  // Lock.\n  processor.freeze = freeze\n\n  // Plugins.\n  processor.attachers = attachers\n  // @ts-expect-error: overloads are handled.\n  processor.use = use\n\n  // API.\n  processor.parse = parse\n  processor.stringify = stringify\n  // @ts-expect-error: overloads are handled.\n  processor.run = run\n  processor.runSync = runSync\n  // @ts-expect-error: overloads are handled.\n  processor.process = process\n  processor.processSync = processSync\n\n  // Expose.\n  return processor\n\n  // Create a new processor based on the processor in the current scope.\n  /** @type {Processor} */\n  function processor() {\n    const destination = base()\n    let index = -1\n\n    while (++index < attachers.length) {\n      destination.use(...attachers[index])\n    }\n\n    destination.data(extend(true, {}, namespace))\n\n    return destination\n  }\n\n  /**\n   * @param {string|Record<string, unknown>} [key]\n   * @param {unknown} [value]\n   * @returns {unknown}\n   */\n  function data(key, value) {\n    if (typeof key === 'string') {\n      // Set `key`.\n      if (arguments.length === 2) {\n        assertUnfrozen('data', frozen)\n        namespace[key] = value\n        return processor\n      }\n\n      // Get `key`.\n      return (own.call(namespace, key) && namespace[key]) || null\n    }\n\n    // Set space.\n    if (key) {\n      assertUnfrozen('data', frozen)\n      namespace = key\n      return processor\n    }\n\n    // Get space.\n    return namespace\n  }\n\n  /** @type {Processor['freeze']} */\n  function freeze() {\n    if (frozen) {\n      return processor\n    }\n\n    while (++freezeIndex < attachers.length) {\n      const [attacher, ...options] = attachers[freezeIndex]\n\n      if (options[0] === false) {\n        continue\n      }\n\n      if (options[0] === true) {\n        options[0] = undefined\n      }\n\n      /** @type {Transformer|void} */\n      const transformer = attacher.call(processor, ...options)\n\n      if (typeof transformer === 'function') {\n        transformers.use(transformer)\n      }\n    }\n\n    frozen = true\n    freezeIndex = Number.POSITIVE_INFINITY\n\n    return processor\n  }\n\n  /**\n   * @param {Pluggable|null|undefined} [value]\n   * @param {...unknown} options\n   * @returns {Processor}\n   */\n  function use(value, ...options) {\n    /** @type {Record<string, unknown>|undefined} */\n    let settings\n\n    assertUnfrozen('use', frozen)\n\n    if (value === null || value === undefined) {\n      // Empty.\n    } else if (typeof value === 'function') {\n      addPlugin(value, ...options)\n    } else if (typeof value === 'object') {\n      if (Array.isArray(value)) {\n        addList(value)\n      } else {\n        addPreset(value)\n      }\n    } else {\n      throw new TypeError('Expected usable value, not `' + value + '`')\n    }\n\n    if (settings) {\n      namespace.settings = Object.assign(namespace.settings || {}, settings)\n    }\n\n    return processor\n\n    /**\n     * @param {import('..').Pluggable<unknown[]>} value\n     * @returns {void}\n     */\n    function add(value) {\n      if (typeof value === 'function') {\n        addPlugin(value)\n      } else if (typeof value === 'object') {\n        if (Array.isArray(value)) {\n          const [plugin, ...options] = value\n          addPlugin(plugin, ...options)\n        } else {\n          addPreset(value)\n        }\n      } else {\n        throw new TypeError('Expected usable value, not `' + value + '`')\n      }\n    }\n\n    /**\n     * @param {Preset} result\n     * @returns {void}\n     */\n    function addPreset(result) {\n      addList(result.plugins)\n\n      if (result.settings) {\n        settings = Object.assign(settings || {}, result.settings)\n      }\n    }\n\n    /**\n     * @param {PluggableList|null|undefined} [plugins]\n     * @returns {void}\n     */\n    function addList(plugins) {\n      let index = -1\n\n      if (plugins === null || plugins === undefined) {\n        // Empty.\n      } else if (Array.isArray(plugins)) {\n        while (++index < plugins.length) {\n          const thing = plugins[index]\n          add(thing)\n        }\n      } else {\n        throw new TypeError('Expected a list of plugins, not `' + plugins + '`')\n      }\n    }\n\n    /**\n     * @param {Plugin} plugin\n     * @param {...unknown} [value]\n     * @returns {void}\n     */\n    function addPlugin(plugin, value) {\n      let index = -1\n      /** @type {Processor['attachers'][number]|undefined} */\n      let entry\n\n      while (++index < attachers.length) {\n        if (attachers[index][0] === plugin) {\n          entry = attachers[index]\n          break\n        }\n      }\n\n      if (entry) {\n        if (isPlainObj(entry[1]) && isPlainObj(value)) {\n          value = extend(true, entry[1], value)\n        }\n\n        entry[1] = value\n      } else {\n        // @ts-expect-error: fine.\n        attachers.push([...arguments])\n      }\n    }\n  }\n\n  /** @type {Processor['parse']} */\n  function parse(doc) {\n    processor.freeze()\n    const file = vfile(doc)\n    const Parser = processor.Parser\n    assertParser('parse', Parser)\n\n    if (newable(Parser, 'parse')) {\n      // @ts-expect-error: `newable` checks this.\n      return new Parser(String(file), file).parse()\n    }\n\n    // @ts-expect-error: `newable` checks this.\n    return Parser(String(file), file) // eslint-disable-line new-cap\n  }\n\n  /** @type {Processor['stringify']} */\n  function stringify(node, doc) {\n    processor.freeze()\n    const file = vfile(doc)\n    const Compiler = processor.Compiler\n    assertCompiler('stringify', Compiler)\n    assertNode(node)\n\n    if (newable(Compiler, 'compile')) {\n      // @ts-expect-error: `newable` checks this.\n      return new Compiler(node, file).compile()\n    }\n\n    // @ts-expect-error: `newable` checks this.\n    return Compiler(node, file) // eslint-disable-line new-cap\n  }\n\n  /**\n   * @param {Node} node\n   * @param {VFileCompatible|RunCallback} [doc]\n   * @param {RunCallback} [callback]\n   * @returns {Promise<Node>|void}\n   */\n  function run(node, doc, callback) {\n    assertNode(node)\n    processor.freeze()\n\n    if (!callback && typeof doc === 'function') {\n      callback = doc\n      doc = undefined\n    }\n\n    if (!callback) {\n      return new Promise(executor)\n    }\n\n    executor(null, callback)\n\n    /**\n     * @param {null|((node: Node) => void)} resolve\n     * @param {(error: Error) => void} reject\n     * @returns {void}\n     */\n    function executor(resolve, reject) {\n      // @ts-expect-error: `doc` can’t be a callback anymore, we checked.\n      transformers.run(node, vfile(doc), done)\n\n      /**\n       * @param {Error|null} error\n       * @param {Node} tree\n       * @param {VFile} file\n       * @returns {void}\n       */\n      function done(error, tree, file) {\n        tree = tree || node\n        if (error) {\n          reject(error)\n        } else if (resolve) {\n          resolve(tree)\n        } else {\n          // @ts-expect-error: `callback` is defined if `resolve` is not.\n          callback(null, tree, file)\n        }\n      }\n    }\n  }\n\n  /** @type {Processor['runSync']} */\n  function runSync(node, file) {\n    /** @type {Node|undefined} */\n    let result\n    /** @type {boolean|undefined} */\n    let complete\n\n    processor.run(node, file, done)\n\n    assertDone('runSync', 'run', complete)\n\n    // @ts-expect-error: we either bailed on an error or have a tree.\n    return result\n\n    /**\n     * @param {Error|null} [error]\n     * @param {Node} [tree]\n     * @returns {void}\n     */\n    function done(error, tree) {\n      bail(error)\n      result = tree\n      complete = true\n    }\n  }\n\n  /**\n   * @param {VFileCompatible} doc\n   * @param {ProcessCallback} [callback]\n   * @returns {Promise<VFile>|undefined}\n   */\n  function process(doc, callback) {\n    processor.freeze()\n    assertParser('process', processor.Parser)\n    assertCompiler('process', processor.Compiler)\n\n    if (!callback) {\n      return new Promise(executor)\n    }\n\n    executor(null, callback)\n\n    /**\n     * @param {null|((file: VFile) => void)} resolve\n     * @param {(error?: Error|null|undefined) => void} reject\n     * @returns {void}\n     */\n    function executor(resolve, reject) {\n      const file = vfile(doc)\n\n      processor.run(processor.parse(file), file, (error, tree, file) => {\n        if (error || !tree || !file) {\n          done(error)\n        } else {\n          /** @type {unknown} */\n          const result = processor.stringify(tree, file)\n\n          if (result === undefined || result === null) {\n            // Empty.\n          } else if (looksLikeAVFileValue(result)) {\n            file.value = result\n          } else {\n            file.result = result\n          }\n\n          done(error, file)\n        }\n      })\n\n      /**\n       * @param {Error|null|undefined} [error]\n       * @param {VFile|undefined} [file]\n       * @returns {void}\n       */\n      function done(error, file) {\n        if (error || !file) {\n          reject(error)\n        } else if (resolve) {\n          resolve(file)\n        } else {\n          // @ts-expect-error: `callback` is defined if `resolve` is not.\n          callback(null, file)\n        }\n      }\n    }\n  }\n\n  /** @type {Processor['processSync']} */\n  function processSync(doc) {\n    /** @type {boolean|undefined} */\n    let complete\n\n    processor.freeze()\n    assertParser('processSync', processor.Parser)\n    assertCompiler('processSync', processor.Compiler)\n\n    const file = vfile(doc)\n\n    processor.process(file, done)\n\n    assertDone('processSync', 'process', complete)\n\n    return file\n\n    /**\n     * @param {Error|null|undefined} [error]\n     * @returns {void}\n     */\n    function done(error) {\n      complete = true\n      bail(error)\n    }\n  }\n}\n\n/**\n * Check if `value` is a constructor.\n *\n * @param {unknown} value\n * @param {string} name\n * @returns {boolean}\n */\nfunction newable(value, name) {\n  return (\n    typeof value === 'function' &&\n    // Prototypes do exist.\n    // type-coverage:ignore-next-line\n    value.prototype &&\n    // A function with keys in its prototype is probably a constructor.\n    // Classes’ prototype methods are not enumerable, so we check if some value\n    // exists in the prototype.\n    // type-coverage:ignore-next-line\n    (keys(value.prototype) || name in value.prototype)\n  )\n}\n\n/**\n * Check if `value` is an object with keys.\n *\n * @param {Record<string, unknown>} value\n * @returns {boolean}\n */\nfunction keys(value) {\n  /** @type {string} */\n  let key\n\n  for (key in value) {\n    if (own.call(value, key)) {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * Assert a parser is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Parser}\n */\nfunction assertParser(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `Parser`')\n  }\n}\n\n/**\n * Assert a compiler is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Compiler}\n */\nfunction assertCompiler(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `Compiler`')\n  }\n}\n\n/**\n * Assert the processor is not frozen.\n *\n * @param {string} name\n * @param {unknown} frozen\n * @returns {asserts frozen is false}\n */\nfunction assertUnfrozen(name, frozen) {\n  if (frozen) {\n    throw new Error(\n      'Cannot call `' +\n        name +\n        '` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.'\n    )\n  }\n}\n\n/**\n * Assert `node` is a unist node.\n *\n * @param {unknown} node\n * @returns {asserts node is Node}\n */\nfunction assertNode(node) {\n  // `isPlainObj` unfortunately uses `any` instead of `unknown`.\n  // type-coverage:ignore-next-line\n  if (!isPlainObj(node) || typeof node.type !== 'string') {\n    throw new TypeError('Expected node, got `' + node + '`')\n    // Fine.\n  }\n}\n\n/**\n * Assert that `complete` is `true`.\n *\n * @param {string} name\n * @param {string} asyncName\n * @param {unknown} complete\n * @returns {asserts complete is true}\n */\nfunction assertDone(name, asyncName, complete) {\n  if (!complete) {\n    throw new Error(\n      '`' + name + '` finished async. Use `' + asyncName + '` instead'\n    )\n  }\n}\n\n/**\n * @param {VFileCompatible} [value]\n * @returns {VFile}\n */\nfunction vfile(value) {\n  return looksLikeAVFile(value) ? value : new VFile(value)\n}\n\n/**\n * @param {VFileCompatible} [value]\n * @returns {value is VFile}\n */\nfunction looksLikeAVFile(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'message' in value &&\n      'messages' in value\n  )\n}\n\n/**\n * @param {unknown} [value]\n * @returns {value is VFileValue}\n */\nfunction looksLikeAVFileValue(value) {\n  return typeof value === 'string' || isBuffer(value)\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n * @typedef {import('unist').Literal} Literal\n * @typedef {Object.<string, unknown>} Props\n * @typedef {Array.<Node>|string} ChildrenOrValue\n *\n * @typedef {(<T extends string, P extends Record<string, unknown>, C extends Node[]>(type: T, props: P, children: C) => {type: T, children: C} & P)} BuildParentWithProps\n * @typedef {(<T extends string, P extends Record<string, unknown>>(type: T, props: P, value: string) => {type: T, value: string} & P)} BuildLiteralWithProps\n * @typedef {(<T extends string, P extends Record<string, unknown>>(type: T, props: P) => {type: T} & P)} BuildVoidWithProps\n * @typedef {(<T extends string, C extends Node[]>(type: T, children: C) => {type: T, children: C})} BuildParent\n * @typedef {(<T extends string>(type: T, value: string) => {type: T, value: string})} BuildLiteral\n * @typedef {(<T extends string>(type: T) => {type: T})} BuildVoid\n */\n\nexport var u = /**\n * @type {BuildVoid & BuildVoidWithProps & BuildLiteral & BuildLiteralWithProps & BuildParent & BuildParentWithProps}\n */ (\n  /**\n   * @param {string} type Type of node\n   * @param {Props|ChildrenOrValue} [props] Additional properties for node (or `children` or `value`)\n   * @param {ChildrenOrValue} [value] `children` or `value` of node\n   * @returns {Node}\n   */\n  function (type, props, value) {\n    /** @type {Node} */\n    var node = {type: String(type)}\n\n    if (\n      (value === undefined || value === null) &&\n      (typeof props === 'string' || Array.isArray(props))\n    ) {\n      value = props\n    } else {\n      Object.assign(node, props)\n    }\n\n    if (Array.isArray(value)) {\n      node.children = value\n    } else if (value !== undefined && value !== null) {\n      node.value = String(value)\n    }\n\n    return node\n  }\n)\n","/**\n * @typedef {Object} PointLike\n * @property {number} [line]\n * @property {number} [column]\n * @property {number} [offset]\n *\n * @typedef {Object} PositionLike\n * @property {PointLike} [start]\n * @property {PointLike} [end]\n *\n * @typedef {Object} NodeLike\n * @property {PositionLike} [position]\n */\n\n/**\n * Check if `node` is *generated*.\n *\n * @param {NodeLike} [node]\n * @returns {boolean}\n */\nexport function generated(node) {\n  return (\n    !node ||\n    !node.position ||\n    !node.position.start ||\n    !node.position.start.line ||\n    !node.position.start.column ||\n    !node.position.end ||\n    !node.position.end.line ||\n    !node.position.end.column\n  )\n}\n","/**\n * @typedef {import('unist').Position} Position\n * @typedef {import('unist').Point} Point\n *\n * @typedef {Partial<Point>} PointLike\n *\n * @typedef {Object} PositionLike\n * @property {PointLike} [start]\n * @property {PointLike} [end]\n *\n * @typedef {Object} NodeLike\n * @property {PositionLike} [position]\n */\n\nexport var pointStart = point('start')\nexport var pointEnd = point('end')\n\n/**\n * Get the positional info of `node`.\n *\n * @param {NodeLike} [node]\n * @returns {Position}\n */\nexport function position(node) {\n  return {start: pointStart(node), end: pointEnd(node)}\n}\n\n/**\n * Get the positional info of `node`.\n *\n * @param {'start'|'end'} type\n */\nfunction point(type) {\n  return point\n\n  /**\n   * Get the positional info of `node`.\n   *\n   * @param {NodeLike} [node]\n   * @returns {Point}\n   */\n  function point(node) {\n    /** @type {Point} */\n    // @ts-ignore looks like a point\n    var point = (node && node.position && node.position[type]) || {}\n\n    return {\n      line: point.line || null,\n      column: point.column || null,\n      offset: point.offset > -1 ? point.offset : null\n    }\n  }\n}\n","/**\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Position} Position\n * @typedef {object & {type: string, position?: Position|undefined}} NodeLike\n */\n\n/**\n * Stringify one point, a position (start and end points), or a node’s\n * positional information.\n *\n * @param {Node|NodeLike|Position|Point|null} [value]\n * @returns {string}\n */\nexport function stringifyPosition(value) {\n  // Nothing.\n  if (!value || typeof value !== 'object') {\n    return ''\n  }\n\n  // Node.\n  if ('position' in value || 'type' in value) {\n    return position(value.position)\n  }\n\n  // Position.\n  if ('start' in value || 'end' in value) {\n    return position(value)\n  }\n\n  // Point.\n  if ('line' in value || 'column' in value) {\n    return point(value)\n  }\n\n  // ?\n  return ''\n}\n\n/**\n * @param {Point|undefined} point\n * @returns {string}\n */\nfunction point(point) {\n  return index(point && point.line) + ':' + index(point && point.column)\n}\n\n/**\n * @param {Position|undefined} pos\n * @returns {string}\n */\nfunction position(pos) {\n  return point(pos && pos.start) + '-' + point(pos && pos.end)\n}\n\n/**\n * @param {number|undefined} value\n * @returns {number}\n */\nfunction index(value) {\n  return value && typeof value === 'number' ? value : 1\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Position} Position\n * @typedef {import('unist').Point} Point\n * @typedef {object & {type: string, position?: Position|undefined}} NodeLike\n */\n\nimport {stringifyPosition} from 'unist-util-stringify-position'\n\nexport class VFileMessage extends Error {\n  /**\n   * Constructor of a message for `reason` at `place` from `origin`.\n   * When an error is passed in as `reason`, copies the `stack`.\n   *\n   * @param {string|Error} reason Reason for message (`string` or `Error`). Uses the stack and message of the error if given.\n   * @param {Node|NodeLike|Position|Point} [place] Place at which the message occurred in a file (`Node`, `Position`, or `Point`, optional).\n   * @param {string} [origin] Place in code the message originates from (`string`, optional).\n   */\n  constructor(reason, place, origin) {\n    /** @type {[string|null, string|null]} */\n    const parts = [null, null]\n    /** @type {Position} */\n    let position = {\n      // @ts-expect-error: we always follows the structure of `position`.\n      start: {line: null, column: null},\n      // @ts-expect-error: \"\n      end: {line: null, column: null}\n    }\n\n    super()\n\n    if (typeof place === 'string') {\n      origin = place\n      place = undefined\n    }\n\n    if (typeof origin === 'string') {\n      const index = origin.indexOf(':')\n\n      if (index === -1) {\n        parts[1] = origin\n      } else {\n        parts[0] = origin.slice(0, index)\n        parts[1] = origin.slice(index + 1)\n      }\n    }\n\n    if (place) {\n      // Node.\n      if ('type' in place || 'position' in place) {\n        if (place.position) {\n          position = place.position\n        }\n      }\n      // Position.\n      else if ('start' in place || 'end' in place) {\n        position = place\n      }\n      // Point.\n      else if ('line' in place || 'column' in place) {\n        position.start = place\n      }\n    }\n\n    // Fields from `Error`\n    this.name = stringifyPosition(place) || '1:1'\n    this.message = typeof reason === 'object' ? reason.message : reason\n    this.stack = typeof reason === 'object' ? reason.stack : ''\n\n    /**\n     * Reason for message.\n     * @type {string}\n     */\n    this.reason = this.message\n    /**\n     * If true, marks associated file as no longer processable.\n     * @type {boolean?}\n     */\n    // eslint-disable-next-line no-unused-expressions\n    this.fatal\n    /**\n     * Starting line of error.\n     * @type {number?}\n     */\n    this.line = position.start.line\n    /**\n     * Starting column of error.\n     * @type {number?}\n     */\n    this.column = position.start.column\n    /**\n     * Namespace of warning.\n     * @type {string?}\n     */\n    this.source = parts[0]\n    /**\n     * Category of message.\n     * @type {string?}\n     */\n    this.ruleId = parts[1]\n    /**\n     * Full range information, when available.\n     * Has start and end properties, both set to an object with line and column, set to number?.\n     * @type {Position?}\n     */\n    this.position = position\n\n    // The following fields are “well known”.\n    // Not standard.\n    // Feel free to add other non-standard fields to your messages.\n\n    /* eslint-disable no-unused-expressions */\n    /**\n     * You can use this to specify the source value that’s being reported, which\n     * is deemed incorrect.\n     * @type {string?}\n     */\n    this.actual\n    /**\n     * You can use this to suggest values that should be used instead of\n     * `actual`, one or more values that are deemed as acceptable.\n     * @type {Array<string>?}\n     */\n    this.expected\n    /**\n     * You may add a file property with a path of a file (used throughout the VFile ecosystem).\n     * @type {string?}\n     */\n    this.file\n    /**\n     * You may add a url property with a link to documentation for the message.\n     * @type {string?}\n     */\n    this.url\n    /**\n     * You may add a note property with a long form description of the message (supported by vfile-reporter).\n     * @type {string?}\n     */\n    this.note\n    /* eslint-enable no-unused-expressions */\n  }\n}\n\nVFileMessage.prototype.file = ''\nVFileMessage.prototype.name = ''\nVFileMessage.prototype.reason = ''\nVFileMessage.prototype.message = ''\nVFileMessage.prototype.stack = ''\nVFileMessage.prototype.fatal = null\nVFileMessage.prototype.column = null\nVFileMessage.prototype.line = null\nVFileMessage.prototype.source = null\nVFileMessage.prototype.ruleId = null\nVFileMessage.prototype.position = null\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"process\");","/**\n * @typedef URL\n * @property {string} hash\n * @property {string} host\n * @property {string} hostname\n * @property {string} href\n * @property {string} origin\n * @property {string} password\n * @property {string} pathname\n * @property {string} port\n * @property {string} protocol\n * @property {string} search\n * @property {any} searchParams\n * @property {string} username\n * @property {() => string} toString\n * @property {() => string} toJSON\n */\n\n/**\n * @param {unknown} fileURLOrPath\n * @returns {fileURLOrPath is URL}\n */\n// From: <https://github.com/nodejs/node/blob/fcf8ba4/lib/internal/url.js#L1501>\nexport function isUrl(fileURLOrPath) {\n  return (\n    fileURLOrPath !== null &&\n    typeof fileURLOrPath === 'object' &&\n    // @ts-expect-error: indexable.\n    fileURLOrPath.href &&\n    // @ts-expect-error: indexable.\n    fileURLOrPath.origin\n  )\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Position} Position\n * @typedef {import('unist').Point} Point\n * @typedef {Record<string, unknown> & {type: string, position?: Position|undefined}} NodeLike\n * @typedef {import('./minurl.shared.js').URL} URL\n * @typedef {import('..').VFileData} VFileData\n * @typedef {import('..').VFileValue} VFileValue\n *\n * @typedef {'ascii'|'utf8'|'utf-8'|'utf16le'|'ucs2'|'ucs-2'|'base64'|'base64url'|'latin1'|'binary'|'hex'} BufferEncoding\n *   Encodings supported by the buffer class.\n *   This is a copy of the typing from Node, copied to prevent Node globals from\n *   being needed.\n *   Copied from: <https://github.com/DefinitelyTyped/DefinitelyTyped/blob/90a4ec8/types/node/buffer.d.ts#L170>\n *\n * @typedef {VFileValue|VFileOptions|VFile|URL} VFileCompatible\n *   Things that can be passed to the constructor.\n *\n * @typedef VFileCoreOptions\n * @property {VFileValue} [value]\n * @property {string} [cwd]\n * @property {Array<string>} [history]\n * @property {string|URL} [path]\n * @property {string} [basename]\n * @property {string} [stem]\n * @property {string} [extname]\n * @property {string} [dirname]\n * @property {VFileData} [data]\n *\n * @typedef Map\n *   Raw source map, see:\n *   <https://github.com/mozilla/source-map/blob/58819f0/source-map.d.ts#L15-L23>.\n * @property {number} version\n * @property {Array<string>} sources\n * @property {Array<string>} names\n * @property {string|undefined} [sourceRoot]\n * @property {Array<string>|undefined} [sourcesContent]\n * @property {string} mappings\n * @property {string} file\n *\n * @typedef {{[key: string]: unknown} & VFileCoreOptions} VFileOptions\n *   Configuration: a bunch of keys that will be shallow copied over to the new\n *   file.\n *\n * @typedef {Record<string, unknown>} VFileReporterSettings\n * @typedef {<T = VFileReporterSettings>(files: Array<VFile>, options: T) => string} VFileReporter\n */\n\nimport buffer from 'is-buffer'\nimport {VFileMessage} from 'vfile-message'\nimport {path} from './minpath.js'\nimport {proc} from './minproc.js'\nimport {urlToPath, isUrl} from './minurl.js'\n\n// Order of setting (least specific to most), we need this because otherwise\n// `{stem: 'a', path: '~/b.js'}` would throw, as a path is needed before a\n// stem can be set.\nconst order = ['history', 'path', 'basename', 'stem', 'extname', 'dirname']\n\nexport class VFile {\n  /**\n   * Create a new virtual file.\n   *\n   * If `options` is `string` or `Buffer`, treats it as `{value: options}`.\n   * If `options` is a `VFile`, shallow copies its data over to the new file.\n   * All other given fields are set on the newly created `VFile`.\n   *\n   * Path related properties are set in the following order (least specific to\n   * most specific): `history`, `path`, `basename`, `stem`, `extname`,\n   * `dirname`.\n   *\n   * It’s not possible to set either `dirname` or `extname` without setting\n   * either `history`, `path`, `basename`, or `stem` as well.\n   *\n   * @param {VFileCompatible} [value]\n   */\n  constructor(value) {\n    /** @type {VFileOptions} */\n    let options\n\n    if (!value) {\n      options = {}\n    } else if (typeof value === 'string' || buffer(value)) {\n      // @ts-expect-error Looks like a buffer.\n      options = {value}\n    } else if (isUrl(value)) {\n      options = {path: value}\n    } else {\n      // @ts-expect-error Looks like file or options.\n      options = value\n    }\n\n    /**\n     * Place to store custom information.\n     * It’s OK to store custom data directly on the file, moving it to `data`\n     * gives a little more privacy.\n     * @type {VFileData}\n     */\n    this.data = {}\n\n    /**\n     * List of messages associated with the file.\n     * @type {Array<VFileMessage>}\n     */\n    this.messages = []\n\n    /**\n     * List of file paths the file moved between.\n     * @type {Array<string>}\n     */\n    this.history = []\n\n    /**\n     * Base of `path`.\n     * Defaults to `process.cwd()` (`/` in browsers).\n     * @type {string}\n     */\n    this.cwd = proc.cwd()\n\n    /* eslint-disable no-unused-expressions */\n    /**\n     * Raw value.\n     * @type {VFileValue}\n     */\n    this.value\n\n    // The below are non-standard, they are “well-known”.\n    // As in, used in several tools.\n\n    /**\n     * Whether a file was saved to disk.\n     * This is used by vfile reporters.\n     * @type {boolean}\n     */\n    this.stored\n\n    /**\n     * Sometimes files have a non-string representation.\n     * This can be stored in the `result` field.\n     * One example is when turning markdown into React nodes.\n     * This is used by unified to store non-string results.\n     * @type {unknown}\n     */\n    this.result\n\n    /**\n     * Sometimes files have a source map associated with them.\n     * This can be stored in the `map` field.\n     * This should be a `RawSourceMap` type from the `source-map` module.\n     * @type {Map|undefined}\n     */\n    this.map\n    /* eslint-enable no-unused-expressions */\n\n    // Set path related properties in the correct order.\n    let index = -1\n\n    while (++index < order.length) {\n      const prop = order[index]\n\n      // Note: we specifically use `in` instead of `hasOwnProperty` to accept\n      // `vfile`s too.\n      if (prop in options && options[prop] !== undefined) {\n        // @ts-expect-error: TS is confused by the different types for `history`.\n        this[prop] = prop === 'history' ? [...options[prop]] : options[prop]\n      }\n    }\n\n    /** @type {string} */\n    let prop\n\n    // Set non-path related properties.\n    for (prop in options) {\n      // @ts-expect-error: fine to set other things.\n      if (!order.includes(prop)) this[prop] = options[prop]\n    }\n  }\n\n  /**\n   * Access full path (`~/index.min.js`).\n   *\n   * @returns {string}\n   */\n  get path() {\n    return this.history[this.history.length - 1]\n  }\n\n  /**\n   * Set full path (`~/index.min.js`).\n   * Cannot be nullified.\n   *\n   * @param {string|URL} path\n   */\n  set path(path) {\n    if (isUrl(path)) {\n      path = urlToPath(path)\n    }\n\n    assertNonEmpty(path, 'path')\n\n    if (this.path !== path) {\n      this.history.push(path)\n    }\n  }\n\n  /**\n   * Access parent path (`~`).\n   */\n  get dirname() {\n    return typeof this.path === 'string' ? path.dirname(this.path) : undefined\n  }\n\n  /**\n   * Set parent path (`~`).\n   * Cannot be set if there's no `path` yet.\n   */\n  set dirname(dirname) {\n    assertPath(this.basename, 'dirname')\n    this.path = path.join(dirname || '', this.basename)\n  }\n\n  /**\n   * Access basename (including extname) (`index.min.js`).\n   */\n  get basename() {\n    return typeof this.path === 'string' ? path.basename(this.path) : undefined\n  }\n\n  /**\n   * Set basename (`index.min.js`).\n   * Cannot contain path separators.\n   * Cannot be nullified either (use `file.path = file.dirname` instead).\n   */\n  set basename(basename) {\n    assertNonEmpty(basename, 'basename')\n    assertPart(basename, 'basename')\n    this.path = path.join(this.dirname || '', basename)\n  }\n\n  /**\n   * Access extname (including dot) (`.js`).\n   */\n  get extname() {\n    return typeof this.path === 'string' ? path.extname(this.path) : undefined\n  }\n\n  /**\n   * Set extname (including dot) (`.js`).\n   * Cannot be set if there's no `path` yet and cannot contain path separators.\n   */\n  set extname(extname) {\n    assertPart(extname, 'extname')\n    assertPath(this.dirname, 'extname')\n\n    if (extname) {\n      if (extname.charCodeAt(0) !== 46 /* `.` */) {\n        throw new Error('`extname` must start with `.`')\n      }\n\n      if (extname.includes('.', 1)) {\n        throw new Error('`extname` cannot contain multiple dots')\n      }\n    }\n\n    this.path = path.join(this.dirname, this.stem + (extname || ''))\n  }\n\n  /**\n   * Access stem (w/o extname) (`index.min`).\n   */\n  get stem() {\n    return typeof this.path === 'string'\n      ? path.basename(this.path, this.extname)\n      : undefined\n  }\n\n  /**\n   * Set stem (w/o extname) (`index.min`).\n   * Cannot be nullified, and cannot contain path separators.\n   */\n  set stem(stem) {\n    assertNonEmpty(stem, 'stem')\n    assertPart(stem, 'stem')\n    this.path = path.join(this.dirname || '', stem + (this.extname || ''))\n  }\n\n  /**\n   * Serialize the file.\n   *\n   * @param {BufferEncoding} [encoding='utf8'] If `file.value` is a buffer, `encoding` is used to serialize buffers.\n   * @returns {string}\n   */\n  toString(encoding) {\n    return (this.value || '').toString(encoding)\n  }\n\n  /**\n   * Create a message and associates it w/ the file.\n   *\n   * @param {string|Error} reason Reason for message (`string` or `Error`). Uses the stack and message of the error if given.\n   * @param {Node|NodeLike|Position|Point} [place] Place at which the message occurred in a file (`Node`, `Position`, or `Point`, optional).\n   * @param {string} [origin] Place in code the message originates from (`string`, optional).\n   * @returns {VFileMessage}\n   */\n  message(reason, place, origin) {\n    const message = new VFileMessage(reason, place, origin)\n\n    if (this.path) {\n      message.name = this.path + ':' + message.name\n      message.file = this.path\n    }\n\n    message.fatal = false\n\n    this.messages.push(message)\n\n    return message\n  }\n\n  /**\n   * Info: create a message, associate it with the file, and mark the fatality\n   * as `null`.\n   * Calls `message()` internally.\n   *\n   * @param {string|Error} reason Reason for message (`string` or `Error`). Uses the stack and message of the error if given.\n   * @param {Node|NodeLike|Position|Point} [place] Place at which the message occurred in a file (`Node`, `Position`, or `Point`, optional).\n   * @param {string} [origin] Place in code the message originates from (`string`, optional).\n   * @returns {VFileMessage}\n   */\n  info(reason, place, origin) {\n    const message = this.message(reason, place, origin)\n\n    message.fatal = null\n\n    return message\n  }\n\n  /**\n   * Fail: create a message, associate it with the file, mark the fatality as\n   * `true`.\n   * Note: fatal errors mean a file is no longer processable.\n   * Calls `message()` internally.\n   *\n   * @param {string|Error} reason Reason for message (`string` or `Error`). Uses the stack and message of the error if given.\n   * @param {Node|NodeLike|Position|Point} [place] Place at which the message occurred in a file (`Node`, `Position`, or `Point`, optional).\n   * @param {string} [origin] Place in code the message originates from (`string`, optional).\n   * @returns {never}\n   */\n  fail(reason, place, origin) {\n    const message = this.message(reason, place, origin)\n\n    message.fatal = true\n\n    throw message\n  }\n}\n\n/**\n * Assert that `part` is not a path (as in, does not contain `path.sep`).\n *\n * @param {string|undefined} part\n * @param {string} name\n * @returns {void}\n */\nfunction assertPart(part, name) {\n  if (part && part.includes(path.sep)) {\n    throw new Error(\n      '`' + name + '` cannot be a path: did not expect `' + path.sep + '`'\n    )\n  }\n}\n\n/**\n * Assert that `part` is not empty.\n *\n * @param {string|undefined} part\n * @param {string} name\n * @returns {asserts part is string}\n */\nfunction assertNonEmpty(part, name) {\n  if (!part) {\n    throw new Error('`' + name + '` cannot be empty')\n  }\n}\n\n/**\n * Assert `path` exists.\n *\n * @param {string|undefined} path\n * @param {string} name\n * @returns {asserts path is string}\n */\nfunction assertPath(path, name) {\n  if (!path) {\n    throw new Error('Setting `' + name + '` requires `path` to be set too')\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var webpackThen = typeof Symbol === \"function\" ? Symbol(\"webpack then\") : \"__webpack_then__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar completeQueue = (queue) => {\n\tif(queue) {\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar completeFunction = (fn) => (!--fn.r && fn());\nvar queueFunction = (queue, fn) => (queue ? queue.push(fn) : completeFunction(fn));\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackThen]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tcompleteQueue(queue);\n\t\t\t\tqueue = 0;\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tcompleteQueue(queue);\n\t\t\t\tqueue = 0;\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackThen] = (fn, reject) => (queueFunction(queue, fn), dep['catch'](reject));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackThen] = (fn) => (completeFunction(fn));\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue = hasAwait && [];\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar isEvaluating = true;\n\tvar nested = false;\n\tvar whenAll = (deps, onResolve, onReject) => {\n\t\tif (nested) return;\n\t\tnested = true;\n\t\tonResolve.r += deps.length;\n\t\tdeps.map((dep, i) => (dep[webpackThen](onResolve, onReject)));\n\t\tnested = false;\n\t};\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = () => (resolve(exports), completeQueue(queue), queue = 0);\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackThen] = (fn, rejectFn) => {\n\t\tif (isEvaluating) { return completeFunction(fn); }\n\t\tif (currentDeps) whenAll(currentDeps, fn, rejectFn);\n\t\tqueueFunction(queue, fn);\n\t\tpromise['catch'](rejectFn);\n\t};\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\twhenAll(currentDeps, fn, reject);\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => (err && reject(promise[webpackError] = err), outerResolve()));\n\tisEvaluating = false;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(9877);\n",""],"names":[],"sourceRoot":""}